<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="æ•°æ®åº“å®éªŒ
ä¸€ã€å®è®­1 æ•°æ®åº“ã€è¡¨ä¸å®Œæ•´æ€§çº¦æŸçš„å®šä¹‰(Create)
1.1 åˆ›å»ºæ•°æ®åº“
åˆ›å»º2022å¹´åŒ—äº¬å†¬å¥¥ä¼šä¿¡æ¯ç³»ç»Ÿæ•°æ®åº“
-- æœ¬å…³æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç‚¹å‡»æœ¬ç¼–è¾‘çª—å£ä¸Šæ–¹çš„â€œå‘½ä»¤è¡Œâ€èœå•æ‰“å¼€Linuxçš„å‘½ä»¤è¡Œï¼Œ
-- å¹¶é€šè¿‡mysqlå‘½ä»¤..." />
    <meta name="keywords" content="mysql,java" />
    <link rel="stylesheet" href="https://2006wzt.github.io/media/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://2006wzt.github.io/styles/main.css">
    <!-- ä»£ç æ¸²æŸ“é£æ ¼css -->
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/dracula.min.css">
    
    <!-- ä»£ç é«˜äº®æ’ä»¶ -->
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>
    <!-- ä»£ç å¤åˆ¶æ’ä»¶ -->
    <script src="https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/clipboard.min.js"></script>
    <!-- live2dæ’ä»¶ -->
    <link rel="stylesheet" href="https://2006wzt.github.io/media/css/live2d.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
    <!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">
    <!-- æ•°å­¦å…¬å¼ -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css"
        integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js"
        integrity="sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js"
        integrity="sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH" crossorigin="anonymous">
        </script>
    <script>
        renderMathInElement(document.body, {
            delimiters: [{
                left: "$$",
                right: "$$",
                display: true
            },
            {
                left: "$",
                right: "$",
                display: false
            }
            ]
        });
    </script>
    
    <title>æ•°æ®åº“ç³»ç»Ÿå®éªŒ</title>

    <!-- å¤§çº²ç´¢å¼•cssè°ƒæ•´ -->
    
    <style>
        .markdownIt-TOC {
            margin-left: 28%;
            padding-left: 2px;
            width: 80%;
        }

        .markdownIt-TOC li {
            padding-left: 8%;
        }
    </style>
    
</head>

<body>
    <div id="landlord">
        <div class="message" style="opacity:0"></div>
        <canvas id="live2d" width="240" height="250" class="live2d"></canvas>
    </div>
    <div id="domainname" style="display:none">https://2006wzt.github.io</div>
    <div id="content">
        <div>
            <!----------- ç§»åŠ¨ç«¯å¯¼èˆªæ ğŸ‘‡ ----------------->
            <div id="bar">
                <style>
  .navmobile {
    z-index: 15;
    max-height: 40vh;
    overflow-y: scroll;
    overflow-x: hidden;
  }

  @media screen and (max-width: 1200px) {
    .navbar {
      max-width: 100vw;
    }
  }

  @media screen and (max-width:1200px) and (min-width: 768px) {
    @media (min-width: 768px) {
      .navbar-nav {
        float: right;
        margin: 0;
      }
    }
  }

  @media screen and (max-width:768px) {
    .mbapspan {
      padding: 0;
    }
  }
</style>
<div class="pjaxloading"  onclick="pjaxloadingClose()">
  <div class="loadingbackground"></div>
  <div id="loading">
    <div class="loading">
    </div>
  </div>
</div>
<nav class="navbar navbar-inverse navbar-fixed-top navmobile">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#barmenu"
        aria-expanded="false" id="barbutton">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a data-pjax class="navbar-brand" style="color:white" href="https://2006wzt.github.io">My Brain&nbsp;&nbsp;|</a>
      <span class="navbar-brand mbapspan"><i id="mbaplayer" class="fa fa-play-circle-o" aria-hidden="true"
          style="font-size: 28px;top: 12px;position: absolute;" onclick="aplayerPlay();"></i></span>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="barmenu">
      <ul class="nav navbar-nav">
        
        
        <li>
          <a data-pjax href="/" style="color:white">
            é¦–é¡µ
          </a>
        </li>
        
        
        
        <li>
          <a data-pjax href="/archives" style="color:white">
            å½’æ¡£
          </a>
        </li>
        
        
        
        <li>
          <a data-pjax href="/tags" style="color:white">
            æ ‡ç­¾
          </a>
        </li>
        
        
        
        <li>
          <a data-pjax href="/post/about" style="color:white">
            å…³äº
          </a>
        </li>
        
        
        
        
          
        <li><a data-pjax href="https://2006wzt.github.io/friends" style="color:white">å‹é“¾</a></li>

        
        </ul>
      </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
  </nav>


  <!-- å¼•å…¥jQueryæ ¸å¿ƒjsæ–‡ä»¶ -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script>
  <script>
    let btstate = false;
    var bt = $("#barbutton");
    var bm = $("#barmenu");
    bt.click(function () {
      dropdown();
    })
    function dropdown() {
      console.log(btstate);
      //ä¸‹æ‹‰
      if (btstate == false) {
        bt.removeClass("collapsed");
        bt.attr("aria-expanded", "true");
        bm.attr("aria-expanded", "true")
        bm.fadeIn(700);
        btstate = true;
      }
      else {
        bt.addClass("collapsed");
        bt.attr("aria-expanded", "false");
        bm.removeClass("in");
        bm.hide();
        bm.attr("aria-expanded", "false");
        btstate = false;
      }
    }
  </script> 
            </div>
            <!----------- ç§»åŠ¨ç«¯å¯¼èˆªæ ğŸ‘† ----------------->

            <!--------------- pcç«¯èœå•æ ğŸ‘‡ ---------------->
            <div class="side"><head>
    <link rel="stylesheet" href="https://2006wzt.github.io/media/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://2006wzt.github.io/styles/main.css">
    
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/styles/dracula.min.css">
    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/850552586/ericamcdn@0.1/js/clipboard.min.js"></script>
    <link rel="stylesheet" href="https://2006wzt.github.io/media/css/live2d.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <!-- æœ€æ–°ç‰ˆæœ¬çš„ Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- fancybox -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


    <!--------- æ•°å­¦å…¬å¼ğŸ‘‡---- -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css"
        integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.js"
        integrity="sha384-U8Vrjwb8fuHMt6ewaCy8uqeUXv4oitYACKdB0VziCerzt011iQ/0TqlSlv8MReCm" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/contrib/auto-render.min.js"
        integrity="sha384-aGfk5kvhIq5x1x5YdvCp4upKZYnA8ckafviDpmWEKp4afOZEqOli7gqSnh8I6enH" crossorigin="anonymous">
    </script>
    <script>
        renderMathInElement(document.body, {
            delimiters: [{
                    left: "$$",
                    right: "$$",
                    display: true
                },
                {
                    left: "$",
                    right: "$",
                    display: false
                }
            ]
        });
    </script>
    
    <!--------- æ•°å­¦å…¬å¼ğŸ‘†----------------- -->
    <!--------- daovocieåŠŸèƒ½ğŸ‘‡ ------------------->
    
    <!--------- daovocieåŠŸèƒ½ğŸ‘† ------------------->
    <!-- -----------------twikooè¯„è®ºç³»ç»Ÿå¼•å…¥ğŸ‘‡ --------->
    <script src="https://cdn.jsdelivr.net/npm/twikoo@1.3.1/dist/twikoo.all.min.js"></script>
    <!-- -----------------twikooè¯„è®ºç³»ç»Ÿå¼•å…¥ğŸ‘† --------->
    <!---------------- leancloud api åŠŸèƒ½ä¾èµ–å¼•å…¥ğŸ‘‡ -------->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.13.0/dist/av-min.js"></script>
    <!---------------- leancloud api åŠŸèƒ½ä¾èµ–å¼•å…¥ğŸ‘† -------->
    <!------------------ valineè¯„è®ºç³»ç»Ÿå¼•å…¥ğŸ‘‡ ------------------>
    <script src="https://2006wzt.github.io/media/js/valine.min.js"></script>
    <!------------------ valineè¯„è®ºç³»ç»Ÿå¼•å…¥ğŸ‘† ------------------>
    <!---------------- ä»Šæ—¥è¯—è¯apiåŠŸèƒ½ä¾èµ–ğŸ‘‡ ----------------------->
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <!---------------- ä»Šæ—¥è¯—è¯apiåŠŸèƒ½ä¾èµ–ğŸ‘† ----------------------->
    <!---------------- ä»Šæ—¥è¯—è¯apiåŠŸèƒ½ä¾èµ–ğŸ‘‡ ----------------------->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ispeak-bber/ispeak-bber.min.js" charset="utf-8"></script>
    <!---------------- å“”å“”åŠŸèƒ½ä¾èµ–ğŸ‘† ----------------------->


</head>

<style>
    body {
        overflow-x: hidden;
        height: 100vh;
        overflow-y: scroll;
        cursor: url("https://2006wzt.github.io/media/images/mouse_cursor.png"), auto
    }
</style>

<body>
    <!--=------ é¡µé¢åŠ è½½åŠ¨æ€ç”»é¢ğŸ‘‡ --------------->
    <div class="pjaxloading" onclick="pjaxloadingClose()">
        <div class="loadingbackground"></div>
        <div id="loading-aname">
            <div class="loading-aname">
            </div>
        </div>
    </div>
    <!--=------ é¡µé¢åŠ è½½åŠ¨æ€ç”»é¢ğŸ‘† --------------->

    <!--------------- å·¦ä¾§èœå•æ ğŸ‘‡ ------------------------>
    
    <div id=side>
        <div class="r_m_div">
            <a onclick="showAaplayer()"><i style="font-size: 20px;"><img
                        src='https://2006wzt.github.io/media/images/music.png' alt="éŸ³ä¹æ’­æ”¾å™¨" class="musicbtn"></i></a>
        </div>
        <div class="avatar-border">
            <img src="https://2006wzt.github.io/images/avatar.png?v=1668391733932" class="avatar">
        </div>
        <div class="sitename">My Brain</div>
        <span class="description" data-text='["There is no end to learning. "]'>&nbsp;</span>
        <div class="siteinfocontainer">
            <span class="siteinfo">æ–‡ç« </span>
            <span class="siteinfo">æ ‡ç­¾</span>
        </div>
        <div class="siteinfocontainer">
            <span class="siteinfo" id="siteinfo-postsnum"></span>
            <span class="siteinfo">7</span>
        </div>
        
        <div class="search">
            <!-- <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢(â—'â—¡'â—)" /> -->
            <input type="text" class="search-input" placeholder="æ ‡é¢˜æœç´¢ âš†_âš† ã¤â™¡">
            <div class="search-results"></div>
        </div>
        
    <div class="share-button">
        <span>Know meğŸ˜Š</span>
        
        <a href="https://github.com/2006wzt" target="_blank"><i style="font-size: 20px;"><img class="icon"
                    src="https://2006wzt.github.io/media/images/github.png" alt=""></i></a>
        
        
        <a onclick="showqq()"><i style="font-size: 20px;"><img class="icon"
                    src="https://2006wzt.github.io/media/images/QQ.png" alt=""></i></a>
        
        
        
        <a href="https://space.bilibili.com/662167120" target="_blank"><i style="font-size: 20px;"><img class="icon"
                    src="https://2006wzt.github.io/media/images/bilibili.png" alt=""></i></a>
        
        
        
        
        
    </div>
    <div id="qq" style="display:none">1335287851</div>
    <!------------ åŠ è½½èœå•æŒ‰é’®ğŸ‘‡ ------------------------->
    <div class="menucontainer">
        
        
        <div class="mchocie description">
            <a data-pjax href="/" class="menubutton" style="margin-right: 15px;">
                <i><img class="icon menuicon" src="" alt="é¦–é¡µ"></i>&nbsp;<span
                    data-text="é¦–é¡µ">é¦–é¡µ</span>
            </a>
        </div>
        
        
        
        <div class="mchocie description">
            <a data-pjax href="/archives" class="menubutton" style="margin-right: 15px;">
                <i><img class="icon menuicon" src="" alt="å½’æ¡£"></i>&nbsp;<span
                    data-text="å½’æ¡£">å½’æ¡£</span>
            </a>
        </div>
        
        
        
        <div class="mchocie description">
            <a data-pjax href="/tags" class="menubutton" style="margin-right: 15px;">
                <i><img class="icon menuicon" src="" alt="æ ‡ç­¾"></i>&nbsp;<span
                    data-text="æ ‡ç­¾">æ ‡ç­¾</span>
            </a>
        </div>
        
        
        
        <div class="mchocie description">
            <a data-pjax href="/post/about" class="menubutton" style="margin-right: 15px;">
                <i><img class="icon menuicon" src="" alt="å…³äº"></i>&nbsp;<span
                    data-text="å…³äº">å…³äº</span>
            </a>
        </div>
        
        

        
        
        
        <div class="mchocie description">
            <a data-pjax href="https://2006wzt.github.io/friends" class="menubutton" style="margin-right: 15px;">
                <i><img class="icon menuicon" src="" alt="å‹äººå¸"></i>&nbsp;<span data-text="å‹äººå¸">å‹äººå¸</span>
            </a>
        </div>
        
        <!--  -->
    </div>
    <!------------ åŠ è½½èœå•æŒ‰é’®ğŸ‘† ------------------------->
    <hr>
    <style>
    .copyright {
        font-size: 15px;
        color: #d9d9d9;
    }


    @media screen and (min-width: 1200px) {
        .foot {
            width: 100%;
            height: 130px;
        }
    }

    @media screen and (max-width: 1200px) {
        .foot {
            display: none;
        }
    }
</style>

<body>
    <div class="foot">
        <div id="footinfo">Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | Theme: <a
                href="https://github.com/850552586/gridea-theme-fog">Fog</a>
            <div>
                
                <div id="sitegotimeDate">è½½å…¥å¤©æ•°...</div>
                <div id="sitegotimes">è½½å…¥æ—¶åˆ†ç§’...</div>
                <div id="cussitetime" style="display:none">07/18/2022</div>
                
            </div>
            <div>
                
            </div>
            <div class="copyright" style="color:white;text-align: center;">
            </div>
        </div>



    </div>
</body>

<script>
    //----------------------ç«™ç‚¹è¿è¡Œæ—¶é—´
    var now = new Date();

    function createtime() {
        var sitegotime = document.getElementById("cussitetime").innerHTML + " 00:00:00";
        var grt = new Date(sitegotime); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´ 
        now.setTime(now.getTime() + 250);
        days = (now - grt) / 1000 / 60 / 60 / 24;
        dnum = Math.floor(days);
        hours = (now - grt) / 1000 / 60 / 60 - (24 * dnum);
        hnum = Math.floor(hours);
        if (String(hnum).length == 1) {
            hnum = "0" + hnum;
        }
        minutes = (now - grt) / 1000 / 60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes);
        if (String(mnum).length == 1) {
            mnum = "0" + mnum;
        }
        seconds = (now - grt) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds);
        if (String(snum).length == 1) {
            snum = "0" + snum;
        }
        document.getElementById("sitegotimeDate").innerHTML = "æœ¬ç«™å·²å®‰å…¨è¿è¡Œ " + dnum + " å¤© ";
        document.getElementById("sitegotimes").innerHTML = hnum + " å°æ—¶ " + mnum + " åˆ† " + snum + " ç§’";
    }

    let intervalId = setInterval("createtime()", 250);
</script>

    </div>

    <img class="moon" src="https://2006wzt.github.io/media/images/moon.png" onclick="moonlight()">
    <script src="https://2006wzt.github.io/media/js/wordshow.js"></script>
    
    <!--------------- å·¦ä¾§èœå•æ ğŸ‘† ------------------------>

    <!----------------- é¡¶éƒ¨èœå•æ ğŸ‘‡ ------------------------>
    
    <!----------------- é¡¶éƒ¨èœå•æ ğŸ‘† ------------------------>

<!--æ ¸å¿ƒåŠŸèƒ½åŠ è½½-->
<script src="https://2006wzt.github.io/media/js/mainfunc.js"></script>

<!------------- Fog1.0ç‰ˆæœ¬å½©è›‹ğŸ‘‡ -------------->
    <!-- <section id="terrestrial" class="popup">
        <a href="#" class="back">&lt; back</a>
    </section>

    <div class="flycontainer">
        <div class="flyword">å¾¡é£é£è¡Œä¸­...</div>
    </div>

    <script>
        $("#fog_go").click(function(){fog_go()});
        async function fog_go(){
            $(".bars").hide()
            $("#live2d").hide()
            await sleep(3000);
            $(".flycontainer").css("display","flex");
            $(".popup").fadeOut(500)
            await sleep(2000);
            var sitename = "My Brain";
            getFogUser(sitename);
        }

        function fog_goregis(){
            var sitename = "My Brain";
            var siteurl = "https://2006wzt.github.io";
            regisFogUser(sitename,siteurl);
        }
        fog_goregis();
    </script> -->
<!------------- Fog1.0ç‰ˆæœ¬å½©è›‹ğŸ‘† -------------->
<script>
    function change_topmenu(){
        tmcolor = "antiquewhite"
        tsnamecolor = "antiquewhite"
        $(".navbar-inverse .navbar-nav>li>a").css("color",tmcolor)
        $(".navbar-inverse .navbar-brand").css("color",tsnamecolor)
        $(".navbar-fixed-top").css("border-radius","0 0 10px 10px")
    }
</script>

<!------ æ ¹æ®è‡ªå®šä¹‰é…ç½®å£°æ˜å˜é‡ğŸ‘‡ --------------------->
    
    <script>
        var postnumChoice = false
    </script>
    
    
    <script>
        var shareChoice = true
    </script>
    
    
    <script>
        var donateChoice = false
    </script>
    
    
    <script>
        var searchChoice = true
    </script>
    
    <script>let postsnum = 0;</script>
    <div id="side-posttitle" style="display: none;">
    
    
    æ•°æ®åº“ç³»ç»Ÿå®éªŒ
    <script>
        postsnum += 1
    </script>
    
    
    
    Socketç¼–ç¨‹å®éªŒ
    <script>
        postsnum += 1
    </script>
    
    
    
    CSP-ç²¾ç‚¼
    <script>
        postsnum += 1
    </script>
    
    
    
    æ·±åº¦å­¦ä¹ å®æˆ˜ï¼ˆäºŒï¼‰ï¼šçŸ¥è¯†å›é¡¾
    <script>
        postsnum += 1
    </script>
    
    
    
    æ·±åº¦å­¦ä¹ å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šæ·±åº¦å­¦ä¹ å¯¼è®º
    <script>
        postsnum += 1
    </script>
    
    
    
    ç®—æ³•åˆ·é¢˜å°è®°
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆåå››ï¼‰ï¼šæ ‘æ¨¡å‹
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆåä¸‰ï¼‰ï¼šæ ¸å‡½æ•°
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆåäºŒï¼‰ï¼šå‚æ•°æƒè¡¡
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆåä¸€ï¼‰ï¼šç»éªŒé£é™©æœ€å°åŒ–
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆåï¼‰ï¼šæ”¯æŒå‘é‡æœº
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆä¹ï¼‰ï¼šçº¿æ€§å›å½’
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆå…«ï¼‰ï¼šæ¢¯åº¦ä¸‹é™
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆä¸ƒï¼‰ï¼šé€»è¾‘å›å½’
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆå…­ï¼‰ï¼šæœ´ç´ è´å¶æ–¯
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆäº”ï¼‰ï¼šæ¦‚ç‡ä¼°è®¡
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆå››ï¼‰ï¼šæ„ŸçŸ¥æœºç®—æ³•
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆä¸‰ï¼‰ï¼šKNNç®—æ³•
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆäºŒï¼‰ï¼šç›‘ç£å­¦ä¹ 
    <script>
        postsnum += 1
    </script>
    
    
    
    æœºå™¨å­¦ä¹ å®æˆ˜ï¼ˆä¸€ï¼‰ï¼šæœºå™¨å­¦ä¹ å¯¼è®º
    <script>
        postsnum += 1
    </script>
    
    
    
    Pythonå…¥é—¨ä¸å®æˆ˜
    <script>
        postsnum += 1
    </script>
    
    
    
    
    
    
    </div>
    
        <script>
            var menupos = 'left';
            $("#siteinfo-postsnum").html(postsnum);
        </script>
    
    <script>
        let commentsHide = false
    </script>
    <!------ æ ¹æ®è‡ªå®šä¹‰é…ç½®å£°æ˜å˜é‡ğŸ‘† --------------------->


    <!----------æ ¹æ®è‡ªå®šä¹‰é…ç½®è®¾ç½®å›¾æ ‡ä¿¡æ¯ğŸ‘‡---------->
    <script>
        var icondict = new Array();
    </script>
    
        
    
    <!----------æ ¹æ®è‡ªå®šä¹‰é…ç½®è®¾ç½®å›¾æ ‡ä¿¡æ¯ğŸ‘†---------->
</body>

<script src="https://2006wzt.github.io/media/share/dist/Share.js"></script>
<!-- é¡µé¢pjaxæµ‹è¯• -->
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.js"></script>
<!--ç¡®ä¿jQueryå·²ç»åœ¨æ­¤ä¹‹å‰åŠ è½½-->
<!-- <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script> -->
<script src="https://2006wzt.github.io/media/js/all-pjax.js"></script>
<script>
    //-------------------------------è¯´è¯´åŠŸèƒ½ğŸ‘‡--------------------------------------
    let talksall = [];
    let talks = [];
    let talkindex = 0;
    get();

    function get() {
        var t = JSON.parse('[]');
        talkindex = t.length - 1;
        for (var i = 0; i <= t.length - 1; i++) {
            var d = {};
            d["time"] = t[i].time;
            d["author"] = t[i].author;
            d["text"] = t[i].text;
            d["img"] = t[i].img;
            talksall.push(d);
        }
    }

    function add() {
        for (var i = talkindex; i >= 0 && i > talkindex - 3; i--) {
            talks.push(talksall[i]);
        }
        talkindex = (talkindex - 3) >= 0 ? (talkindex - 3) : -1;
        if (talkindex < 0) $("#getmorebt").hide();
        show();
    }

    function show() {
        var talkT = document.getElementById("talkContainer");
        talkT.innerHTML = "";
        for (var i = 0; i < talks.length; i++) {
            if (talks[i].img != '') {
                talkT.innerHTML += '\
            <div class="talk" v-for="t in talks"> \
                <span data-fancybox="images" href="' + talks[i].img + '"><img src="' + talks[i].img + '" class="talkimg"></span> \
                <div class="ainfo">\
                    <div class="ainfo-intro">\
                        <div class="author">' + talks[i].author + '</div>Â·\
                        <div class="time">' + talks[i].time + '</div>\
                    </div>\
                </div>\
                <div class="talkcontent">' + talks[i].text + '\
                </div\>\
            ';
            } else {
                talkT.innerHTML += '\
            <div class="talk" v-for="t in talks"> \
                <div class="ainfo">\
                    <div class="ainfo-intro">\
                        <div class="author">' + talks[i].author + '</div>Â·\
                        <div class="time">' + talks[i].time + '</div>\
                    </div>\
                </div>\
                <div class="talkcontent">' + talks[i].text + '\
                </div\>\
            ';
            }
        }
    }
    //-------------------------------è¯´è¯´åŠŸèƒ½ğŸ‘†--------------------------------------
</script>

<!---->
<script>
    function replaceAvatar() {
        twikoo_avatar = $(".tk-avatar-img");
        for (var i = 0; i < twikoo_avatar.length; i++) {
            var asrc = twikoo_avatar.eq(i).attr('src');
            if (asrc.search('cn.gravatar.com') != -1) {
                twikoo_avatar.eq(i).attr('src', 'https://2006wzt.github.io/media/images/comavatar.png');
            }
        }
    }

    function showWechat() {
        var wechat = '';
        alert("åšä¸»å¾®ä¿¡å·ï¼š" + wechat);
        return false;
    }
</script>

<script>
    /**
     * https://github.com/tangkaichuan/gridea-search
     */
    // æ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ€æ–°
    function checkCache() {
        var caches_postsnum = localStorage.getItem("postsnum");
        var pt = document.getElementById("side-posttitle").innerHTML;
        pt = pt.replace(/\s+/g, '').replace(/<script>.*?<\/script>/gi, "")
        var ptlen = pt.length;
        var ptlen_storage = localStorage.getItem("poststitlelen");
        if (caches_postsnum != postsnum || ptlen != ptlen_storage) {
            console.log("æ›´æ–°ç¼“å­˜");
            return false
        }
        return true;
    }

    (function () {
        var CACHES = checkCache()
        if (!CACHES) {
            var NOW = Date.now()
            var API_CONTENT = '../api-content/index.html' + '?_=' + NOW
            preload(API_CONTENT);
            getContents(show_getContentresult);
        }

        function show_getContentresult(data) {
            console.log("è·å–æˆåŠŸ");
            var postslen = data["posts"].length;
            localStorage.setItem('postsnum', postslen);
            var poststitlelen = 0;
            var pt = document.getElementById("side-posttitle").innerHTML;
            pt = pt.replace(/\s+/g, '').replace(/<script>.*?<\/script>/gi, "");
            localStorage.setItem('poststitlelen', pt.length);
        }



        // preload
        function preload(url) {
            var preloadLink = document.createElement('link')
            preloadLink.href = url
            preloadLink.rel = 'preload'
            preloadLink.as = 'fetch'
            preloadLink.crossOrigin = 'anonymous'
            document.head.appendChild(preloadLink)
        }

        // å¼‚æ­¥ GET è¯·æ±‚
        function get(obj) {
            var xhr = new XMLHttpRequest()
            xhr.open('get', obj.url, true)
            xhr.send(null)
            xhr.onreadystatechange = function () {
                // å¼‚æ­¥è¯·æ±‚ï¼šå“åº”çŠ¶æ€ä¸º4ï¼Œæ•°æ®åŠ è½½å®Œæ¯•
                if (xhr.readyState === 4) {
                    if (xhr.status === 200) {
                        obj.success(xhr.responseText)
                    } else {
                        obj.error(xhr.status)
                    }
                }
            }
        }

        // è·å–åšå®¢å…¨æ–‡ api
        function getContents(callback) {
            if (CACHES) {
                callback(CACHES.contents)
            } else {
                get({
                    url: API_CONTENT,
                    success: function (data) {
                        callback(JSON.parse(data));
                        localStorage.setItem('ContentsCache', data);
                        getStorageContent();
                    }
                })
            }
        }
    })()
    //------------------------æ ¸å¿ƒåŠŸèƒ½--pjaxå…¨å±€æ¸²æŸ“ğŸ‘‡-------------------
    let talkinit = false;
    $(document).pjax('a[data-pjax]', '#main', {
        fragment: '#main',
        timeout: 8000
    }).on('pjax:complete', function () {
        //ä»£ç å—é«˜äº®æ¸²æŸ“
        document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightBlock(block);
        });
        //æ–‡ç« çƒ­åº¦
        if(postnumChoice){
            getHotnum();
        }
        //æ–‡ç« ç´¢å¼•
        toginit();
        //æ¸…ç©ºæœç´¢æ 
        if (searchChoice) {
            searchInit();
            searchInput.value = "";
        }
        var pl = window.location.pathname;
        //è¯´è¯´æ›´æ–°
        if (pl.search("talk") != -1 && !talkinit) {
            add();
            talkinit = true;
        } else if (pl.search("talk") != -1) {
            show();
        }
        if (pl.search("post") != -1) {
            if (shareChoice)
                shareInit();
            if (donateChoice)
                donateInit();
            if ("default" == "default"&&!commentsHide) {
                $("#comment").hide()
                commentsHide = true
            }
            lazyload();
            codeinit();
            if ("default" == "twikoo") {
                //twikooå¤´åƒæ›´æ¢
                setTimeout(replaceAvatar, 3000);
                setTimeout(replaceAvatar, 8000); //éƒ¨åˆ†åšä¸»ç«™ç‚¹é€Ÿåº¦åŠ è½½è¿‡æ…¢ï¼Œå†æ·»åŠ ä¸€ä¸ªå»¶è¿Ÿ
            }
        }
        if (btstate == true)
            dropdown();
    }).on('pjax:start', function () {
        $(".pjaxloading").fadeIn(50);
    }).on('pjax:end', function () {
        $(".pjaxloading").fadeOut(50);
    });
    //------------------------æ ¸å¿ƒåŠŸèƒ½--pjaxå…¨å±€æ¸²æŸ“ğŸ‘†-------------------

    //-------------------------------------------------æœç´¢
    // è·å–æœç´¢æ¡†ã€æœç´¢æŒ‰é’®ã€æ¸…ç©ºæœç´¢ã€ç»“æœè¾“å‡ºå¯¹åº”çš„å…ƒç´ 
    if (searchChoice) {
        var searchInput = document.querySelector('.search-input');
        var searchResults = document.querySelector('.search-results');
    }
    // ç”³æ˜ä¿å­˜æ–‡ç« çš„æ ‡é¢˜ã€é“¾æ¥ã€å†…å®¹çš„æ•°ç»„å˜é‡
    var searchValue = '',
        arrItems = [],
        arrLinks = [],
        arrTitles = [],
        arrContents = [],
        arrResults = [],
        indexItem = [],
        itemLength = 0;
    var tmpDiv = document.createElement('div');
    tmpDiv.className = 'result-item';


    function getStorageContent() {
        var data = localStorage.getItem('ContentsCache');
        data = JSON.parse(data);
        posts = data["posts"];
        for (var i = 0; i < posts.length; i++) {
            arrLinks[i] = posts[i].link;
            arrTitles[i] = posts[i].title;
            arrContents[i] = posts[i].content;
            itemLength++;
        }
    }
    if (checkCache())
        getStorageContent();
    // è¾“å…¥æ¡†å†…å®¹å˜åŒ–åå°±å¼€å§‹åŒ¹é…ï¼Œå¯ä»¥ä¸ç”¨ç‚¹æŒ‰é’®
    // ç»æµ‹è¯•ï¼Œonkeydown, onchange ç­‰æ–¹æ³•æ•ˆæœä¸å¤ªç†æƒ³ï¼Œ
    // å­˜åœ¨è¾“å…¥å»¶è¿Ÿç­‰é—®é¢˜ï¼Œæœ€åå‘ç°è§¦å‘ input äº‹ä»¶æœ€ç†æƒ³ï¼Œ
    // å¹¶ä¸”å¯ä»¥å¤„ç†ä¸­æ–‡è¾“å…¥æ³•æ‹¼å†™çš„å˜åŒ–
    searchInput.oninput = function () {
        setTimeout(searchConfirm, 0);
    }
    searchInput.onfocus = function () {
        searchResults.style.display = 'block';
    }

    function searchConfirm() {
        if (searchInput.value == '') {
            searchResults.style.display = 'none';
        } else if (searchInput.value.search(/^\s+$/) >= 0) {
            // æ£€æµ‹è¾“å…¥å€¼å…¨æ˜¯ç©ºç™½çš„æƒ…å†µ
            searchInit();
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'è¯·è¾“å…¥æœ‰æ•ˆå†…å®¹...';
            searchResults.appendChild(itemDiv);
        } else {
            // åˆæ³•è¾“å…¥å€¼çš„æƒ…å†µ
            searchInit();
            searchValue = searchInput.value;
            // åœ¨æ ‡é¢˜ã€å†…å®¹ä¸­æŸ¥æ‰¾
            searchMatching(arrTitles, arrContents, searchValue);
        }
    }

    // æ¯æ¬¡æœç´¢å®Œæˆåçš„åˆå§‹åŒ–
    function searchInit() {
        arrResults = [];
        indexItem = [];
        searchResults.innerHTML = '';
        searchResults.style.display = 'block';
    }

    function searchMatching(arr1, arr2, input) {
        // å¿½ç•¥è¾“å…¥å¤§å°å†™
        input = new RegExp(input, 'i');
        var step = 10;
        // åœ¨æ‰€æœ‰æ–‡ç« æ ‡é¢˜ã€å†…å®¹ä¸­åŒ¹é…æŸ¥è¯¢å€¼
        for (i = 0; i < itemLength; i++) {
            var indexContent = arr2[i].search(input);
            //æ ‡é¢˜åŒ¹é…
            if (arr1[i].search(input) != -1) {
                indexItem.push(i); // ä¿å­˜åŒ¹é…å€¼çš„ç´¢å¼•
                if (indexContent != -1) {
                    startindex = (indexContent - step) >= 0 ? (indexContent - step) : 0;
                    var searchcontent = arr2[i].slice(indexContent - step, indexContent + 5)
                    arrResults.push("....." + searchcontent + ".....");
                } else
                    arrResults.push("");
            }
            //å†…å®¹åŒ¹é…
            else if (indexContent != -1) {
                indexItem.push(i); // ä¿å­˜åŒ¹é…å€¼çš„ç´¢å¼•

                startindex = (indexContent - step) >= 0 ? (indexContent - step) : 0;
                var searchcontent = arr2[i].slice(indexContent - step, indexContent + 5)
                arrResults.push("....." + searchcontent + ".....");
            }
        }

        // è¾“å‡ºæ€»å…±åŒ¹é…åˆ°çš„æ•°ç›®
        var totalDiv = tmpDiv.cloneNode(true);
        totalDiv.innerHTML = '<b>æ€»åŒ¹é…ï¼š' + indexItem.length + ' é¡¹<hr></b>';
        searchResults.appendChild(totalDiv);

        // æœªåŒ¹é…åˆ°å†…å®¹çš„æƒ…å†µ
        if (indexItem.length == 0) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerText = 'æœªåŒ¹é…åˆ°å†…å®¹...';
            searchResults.appendChild(itemDiv);
        }

        // å°†æ‰€æœ‰åŒ¹é…å†…å®¹è¿›è¡Œç»„åˆ
        for (i = 0; i < arrResults.length; i++) {
            var itemDiv = tmpDiv.cloneNode(true);
            itemDiv.innerHTML = '<a data-pjax class="searchresults" href="' + arrLinks[indexItem[i]] + '"><b>[' +
                arrTitles[indexItem[i]] +
                ']</b><p>' + arrResults[i] + '</p></a><hr />';
            searchResults.appendChild(itemDiv);
        }
    }
</script>



<!--------------------- èœå•æ å›¾æ ‡åŠ è½½åŠŸèƒ½ğŸ‘‡ ----------------------->
<script>
var menulist = $(".menuicon");
var menulength = menulist.length;
for (var i = 0; i < menulength; i++) {
    var altname = menulist.eq(i).attr("alt");
    var iconurl = icondict[altname];
    if (iconurl == undefined || iconurl == '')
        continue;
    if (iconurl == 'Home') {
        menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/Home.png");
menulist.eq(i).show();
} else if (iconurl == 'Archive') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/Archive.png");
menulist.eq(i).show();
} else if (iconurl == 'Tag') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/Tag.png");
menulist.eq(i).show();
} else if (iconurl == 'About') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/About.png");
menulist.eq(i).show();
} else if (iconurl == 'Talk') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/Talk.png");
menulist.eq(i).show();
} else if (iconurl == 'Friends') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/Friends.png");
menulist.eq(i).show();
} else if (iconurl == 'Fly') {
menulist.eq(i).attr("src", "https://2006wzt.github.io/media/images/wind.png");
menulist.eq(i).show();
} else {
menulist.eq(i).attr("src", iconurl);
menulist.eq(i).show();
}
}
</script>
<!--------------------- èœå•æ å›¾æ ‡åŠ è½½åŠŸèƒ½ğŸ‘† ----------------------->

<script>
    //--------------------bber-onetalkåŠ è½½ğŸ‘‡--------------------------------
    function bberonetalkLoad(){
        bberjsonurl = '';
        if ( $("#bber-talk").length > 0 ) {
        jsonUrl = bberjsonurl
        $.getJSON(jsonUrl+"?t="+Date.parse( new Date()),function(res){
        var bberHtml = ''
        $.each(res.data, function(i, item){
            d = new Date(item.date)
            date = d.getFullYear()+'/'+(d.getMonth()+1)+'/'+d.getDate() +' '+d.getHours()+':'+d.getMinutes()+':'+d.getSeconds()
            dataTime = '<span class="datatime">'+date+'</span>'
            bberHtml += '<li class="item item-'+(i+1)+'">'+dataTime+'ï¼š <a data-pjax href="https://2006wzt.github.io/bber">'+item.content+'</a></li>'
        });
        $('#bber-talk').append('<span class="index-talk-icon"><svg viewBox="0 0 1024 1024" width="21" height="21"><path d="M184.32 891.667692c-12.603077 0-25.206154-2.363077-37.809231-7.876923-37.021538-14.966154-59.864615-49.624615-59.864615-89.009231v-275.692307c0-212.676923 173.292308-385.969231 385.969231-385.969231h78.76923c212.676923 0 385.969231 173.292308 385.969231 385.969231 0 169.353846-137.846154 307.2-307.2 307.2H289.083077l-37.021539 37.021538c-18.904615 18.116923-43.323077 28.356923-67.741538 28.356923zM472.615385 195.347692c-178.018462 0-322.953846 144.935385-322.953847 322.953846v275.692308c0 21.267692 15.753846 29.144615 20.48 31.507692 4.726154 2.363077 22.055385 7.876923 37.021539-7.08923l46.473846-46.473846c6.301538-6.301538 14.178462-9.452308 22.055385-9.452308h354.461538c134.695385 0 244.184615-109.489231 244.184616-244.184616 0-178.018462-144.935385-322.953846-322.953847-322.953846H472.615385z"></path><path d="M321.378462 512m-59.076924 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z"></path><path d="M518.301538 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153847 0 59.076923 59.076923 0 1 0-118.153847 0Z"></path><path d="M715.224615 512m-59.076923 0a59.076923 59.076923 0 1 0 118.153846 0 59.076923 59.076923 0 1 0-118.153846 0Z"></path></svg></span><ul class="talk-list">'+bberHtml+'</ul>')
        //Lately({ 'target': '#bber-talk .datatime' });
        });
        function Roll (){
        var list_li = $('.talk-list li'),cur_li = list_li.first(),last_li = list_li.last();
        last_li.after(cur_li);
        };
        setInterval(Roll,3000);
    }
    }
  //--------------------bber-onetalkåŠ è½½ğŸ‘†--------------------------------
</script>

<script>
    var ClicksideState = 1
    var cur_readingmode = false
    function readingmode(){
        if (!cur_readingmode){
            if(menupos == 'left'){
                if(ClicksideState==1)
                menu_openclose1()
            }
            $("#tab1").fadeOut(50)
            $("#bg").fadeOut(50)
            $(".navbar").fadeOut(50)
            $(".markdownIt-TOC li a").css("color","black")
            cur_readingmode = true
        }else{
            if(menupos == 'left'){
                if(ClicksideState==0)
                    menu_openclose1()
            }
            $("#tab1").fadeIn(50)
            $("#bg").fadeIn(50)
            $(".navbar").fadeIn(50)
            $(".markdownIt-TOC li a").css("color","antiquewhite")
            cur_readingmode = false  
        }
    }
</script>


<!----å¤œé—´æ¨¡å¼ğŸ‘‡-->
<script>
    var moonlightState = false
    function moonlight(){
        if(!moonlightState){
            $("#bg").fadeOut(200)
            $('body').css("background","rgba(0,0,0,0.8)")
            $(".markdownIt-TOC li a").css("color","white")
            $(".text p, .text ul").css("color","white")
            $("#articlecontent").css("color","white")
            $(".post-copyright").css("background","rgba(10,10,10,0.5)")
            $('blockquote').css("background","rgba(10,10,10,0.6)")
            $("#articlecontent").css("background","rgba(10,10,10,0.5)")
            moonlightState = true
            $(".moon").attr("src","https://2006wzt.github.io/media/images/sun.png")
        }else{
            $("#bg").show()
            $(".markdownIt-TOC li a").css("color","antiquewhite")
            $(".text p, .text ul").css("color","rgba(0, 0, 0, 0.7)")
            $("#articlecontent").css("color","black")
            $(".post-copyright").css("background","#f9f9f9")
            $('blockquote').css("background","#eff8f0")
            $("#articlecontent").css("background","white")
            $(".moon").attr("src","https://2006wzt.github.io/media/images/moon.png")
            $('body').css("background","white")
            moonlightState = false
        }
    }
</script>
<!----å¤œé—´æ¨¡å¼ğŸ‘†--></div>
            <!--------------- pcç«¯èœå•æ ğŸ‘† ---------------->

            <!-- ----------------å·¦ä¾§èœå•æ html ğŸ‘‡-------------------------------------->
            
            <div>
                <div id="tab1" class="tab">
                    <div class="bars">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <div class="close"></div>
                </div>
                <div class="col-md-1 col-lg-3"></div>
                <!-- mainæ ‡ç­¾ï¼Œpjaxæ¸²æŸ“æ—¶åŠ è½½ä»¥ä¸‹å†…å®¹ğŸ‘‡ -->
                <div id="main" class="col-xs-12 col-sm-12 col-md-12 col-lg-7" style="padding:0;">
                    <div class="readingmode" onclick="readingmode()">é˜…</div>
                    <link rel="stylesheet" href="https://2006wzt.github.io/media/css/font-awesome.css">

<body>
    <div class="allcontent" id="postdetail">
        <div class="postshow postpadding" style="padding-bottom: 0;">
            
            <div class="postdetailimg">
                <img src="https://2006wzt.github.io/post-images/æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºå®éªŒ.png" class="postimage" style="cursor:auto">
            </div>
            <div class="postinfo-detail">
                <div class="postdate"><i class="fa fa-calendar"></i>2022-11-13</div>
                <div class="poststatus postdate"><i class="fa fa-clock-o"></i> 91 min read</div>
                <div class="posttag">
                    
                    <a data-pjax href="https://2006wzt.github.io/tag/fG7_jixa3/" class="postlink">
                        <i class="fa fa-tag"></i> mysql
                    </a>
                    
                    <a data-pjax href="https://2006wzt.github.io/tag/Fc-b8517my/" class="postlink">
                        <i class="fa fa-tag"></i> java
                    </a>
                    
                </div>
            </div>
            
        <div id="articlecontent">
            <div id="texttitle" style="text-align: center">
                <h2 id="ptitle">æ•°æ®åº“ç³»ç»Ÿå®éªŒ</h2>
                <!-- id å°†ä½œä¸ºæŸ¥è¯¢æ¡ä»¶ -->
                <div id="pl" style="display:none">https://2006wzt.github.io/post/æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºå®éªŒ/</div>
                <div id="rootaddr" style="display:none">https://2006wzt.github.io</div>
                
            </div>
            <div class="text ">
                <h1 id="æ•°æ®åº“å®éªŒ">æ•°æ®åº“å®éªŒ</h1>
<h2 id="ä¸€-å®è®­1-æ•°æ®åº“-è¡¨ä¸å®Œæ•´æ€§çº¦æŸçš„å®šä¹‰create">ä¸€ã€<strong>å®è®­1 æ•°æ®åº“ã€è¡¨ä¸å®Œæ•´æ€§çº¦æŸçš„å®šä¹‰(Create)</strong></h2>
<h3 id="11-åˆ›å»ºæ•°æ®åº“">1.1 åˆ›å»ºæ•°æ®åº“</h3>
<p>åˆ›å»º2022å¹´åŒ—äº¬å†¬å¥¥ä¼šä¿¡æ¯ç³»ç»Ÿæ•°æ®åº“</p>
<pre><code class="language-mysql">-- æœ¬å…³æˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ç‚¹å‡»æœ¬ç¼–è¾‘çª—å£ä¸Šæ–¹çš„â€œå‘½ä»¤è¡Œâ€èœå•æ‰“å¼€Linuxçš„å‘½ä»¤è¡Œï¼Œ
-- å¹¶é€šè¿‡mysqlå‘½ä»¤è¡Œå·¥å…·è¿æ¥å¹¶ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œ
-- ç„¶ååœ¨mysqlçš„å‘½ä»¤è¡Œå·¥å…·é‡Œé€šè¿‡æ°å½“çš„è¯­å¥å®Œæˆä»»åŠ¡ã€‚
-- åœ¨ä»¥åçš„å…³å¡ä¸­ä½ å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œè°ƒè¯•æˆ–æµ‹è¯•è¯­å¥ï¼Œå†å°†æ­£ç¡®çš„è¯­å¥ç²˜è´´åˆ°æ–‡ä»¶ç¼–è¾‘çª—å£ã€‚

-- ä½ ä¹Ÿå¯ä»¥é€‰æ‹©åœ¨ä»¥ä¸‹ç©ºç™½è¡Œå¡«å†™å®Œæˆç›®æ ‡ä»»åŠ¡çš„SQLè¯­å¥ï¼š
-- åˆ›å»º2022å¹´åŒ—äº¬å†¬å¥¥ä¼šä¿¡æ¯ç³»ç»Ÿæ•°æ®åº“
CREATE DATABASE beijing2022;
-- end
</code></pre>
<h3 id="12-åˆ›å»ºè¡¨åŠè¡¨çš„ä¸»ç çº¦æŸ">1.2 åˆ›å»ºè¡¨åŠè¡¨çš„ä¸»ç çº¦æŸ</h3>
<p>å»ºæ•°æ®åº“<code>TestDb</code>ï¼Œåœ¨<code>TestDb</code>ä¸‹åˆ›å»ºè¡¨<code>t_emp</code>ï¼Œè¡¨ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>INT</td>
<td>å‘˜å·¥ç¼–å·ï¼Œä¸»ç </td>
</tr>
<tr>
<td>name</td>
<td>VARCHAR(32)</td>
<td>å‘˜å·¥åç§°</td>
</tr>
<tr>
<td>deptId</td>
<td>INT</td>
<td>æ‰€åœ¨éƒ¨é—¨æ ‡å·</td>
</tr>
<tr>
<td>salary</td>
<td>FLOAT</td>
<td>å·¥èµ„</td>
</tr>
</tbody>
</table>
<pre><code class="language-mysql"># è¯·åœ¨ä»¥ä¸‹é€‚å½“çš„ç©ºç™½å¤„å¡«å†™SQLè¯­å¥ï¼Œå®Œæˆä»»åŠ¡ä¹¦çš„è¦æ±‚ã€‚ç©ºç™½è¡Œå¯é€šè¿‡å›è½¦æ¢è¡Œæ·»åŠ ã€‚ 
USE TestDb;
CREATE TABLE t_emp(
    id INT PRIMARY KEY,
    name VARCHAR(32),
    deptId INT,
    salary FLOAT
);
/* *********** ç»“æŸ ************* */
</code></pre>
<h3 id="13-åˆ›å»ºå¤–ç çº¦æŸforeign-key">1.3 åˆ›å»ºå¤–ç çº¦æŸ(foreign key)</h3>
<p>è®¾æœ‰ä»¥ä¸‹ä¸¤å¼ è¡¨ï¼š</p>
<p><strong>dept(éƒ¨é—¨)</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>deptNo</td>
<td>INT</td>
<td>éƒ¨é—¨å·ï¼Œä¸»é”®</td>
</tr>
<tr>
<td>deptName</td>
<td>VARCHAR(32)</td>
<td>éƒ¨é—¨åç§°</td>
</tr>
</tbody>
</table>
<p><strong>staff(èŒå·¥)</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>staffNo</td>
<td>INT</td>
<td>èŒå·¥å·ï¼Œä¸»é”®</td>
</tr>
<tr>
<td>staffName</td>
<td>VARCHAR(32)</td>
<td>èŒå·¥å§“å</td>
</tr>
<tr>
<td>gender</td>
<td>CHAR(1)</td>
<td>æ€§åˆ«ï¼ŒF-å¥³ï¼ŒM-ç”·</td>
</tr>
<tr>
<td>dob</td>
<td>date</td>
<td>å‡ºç”Ÿæ—¥æœŸ</td>
</tr>
<tr>
<td>salary</td>
<td>numeric(8,2)</td>
<td>å·¥èµ„</td>
</tr>
<tr>
<td>deptNo</td>
<td>INT</td>
<td>éƒ¨é—¨å·,å¤–é”®</td>
</tr>
</tbody>
</table>
<p>è¯·åˆ›å»ºä¸Šè¿°ä¸¤ä¸ªè¡¨ï¼Œä¸ºè¡¨å®šä¹‰ä¸»é”®ï¼Œå¹¶ç»™è¡¨staffåˆ›å»ºå¤–é”®ï¼Œè¿™ä¸ªå¤–é”®çº¦æŸçš„åç§°ä¸ºFK_staff_deptNoã€‚åœ¨åˆ›å»ºè¡¨ä¹‹å‰ä½ å¯èƒ½éœ€è¦å…ˆåˆ›å»ºæ•°æ®åº“ï¼š<code>MyDb</code>ï¼Œå¹¶ä¸”å°†ä¸¤å¼ è¡¨åˆ›å»ºåœ¨<code>MyDb</code>æ•°æ®åº“ä¸­ã€‚ä¸éœ€è€ƒè™‘å…³äºæ€§åˆ«çš„çº¦æŸã€‚ï¼ˆæ³¨æ„ï¼šå¦‚æœä½ åœ¨å®éªŒ1ä¹‹åæ¥ç€ä½œæœ¬å®éªŒï¼Œæ•°æ®åº“<code>MyDb</code>å¯èƒ½å·²ç»å­˜åœ¨ï¼‰</p>
<pre><code class="language-mysql"># è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„å¡«å†™å®Œæˆä»»åŠ¡çš„è¯­å¥ï¼Œç©ºç™½è¡Œå¯é€šè¿‡å›è½¦æ¢è¡Œæ·»åŠ ã€‚
# ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£å®Œæˆä»»åŠ¡ï¼Œä¸è¿‡ï¼Œåœ¨å‘½ä»¤è¡Œé”®å…¥çš„è¯­å¥ä¸ä¼šè¢«ä¿å­˜ã€‚
CREATE DATABASE MyDb;
USE MyDb;
CREATE TABLE dept(
    deptNo INT PRIMARY KEY,
    deptName VARCHAR(32)
);
CREATE TABLE staff(
    staffNo INT PRIMARY KEY,
    staffName VARCHAR(32),
    gender CHAR(1),
    dob date,
    salary numeric(8,2),
    deptNo INT,
    CONSTRAINT FK_staff_deptNo FOREIGN KEY(deptNo) REFERENCES dept(deptNo)
);
# ç»“æŸ 
</code></pre>
<h3 id="14-checkçº¦æŸ">1.4 CHECKçº¦æŸ</h3>
<p>è¡¨productsçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>pid</td>
<td>char(10)</td>
<td>äº§å“æˆ·ID,ä¸»ç </td>
</tr>
<tr>
<td>name</td>
<td>varchar(32)</td>
<td>äº§å“åç§°</td>
</tr>
<tr>
<td>brand</td>
<td>char(10)</td>
<td>å“ç‰Œï¼Œåªèƒ½æ˜¯('A','B')ä¸­çš„æŸä¸€ä¸ª</td>
</tr>
<tr>
<td>price</td>
<td>int</td>
<td>ä»·æ ¼ï¼Œå¿…é¡»&gt;0</td>
</tr>
</tbody>
</table>
<p>è¯·åœ¨æ•°æ®åº“MyDbä¸­åˆ›å»ºè¡¨productsï¼Œå¹¶åˆ†åˆ«å®ç°å¯¹å“ç‰Œå’Œä»·æ ¼çš„çº¦æŸï¼Œä¸¤ä¸ªCHECKçº¦æŸçš„åç§°åˆ†åˆ«ä¸ºCK_products_brandå’ŒCK_products_priceï¼Œä¸»ç çº¦æŸä¸è¦æ˜¾ç¤ºå‘½åã€‚ï¼ˆæç¤ºï¼šå¦‚æœæ•°æ®åº“MyDbä¸å­˜åœ¨ï¼Œè¯·é¦–å…ˆåˆ›å»ºå®ƒï¼Œå¹¶å°†å®ƒä½œä¸ºå·¥ä½œæ•°æ®åº“ã€‚ï¼‰</p>
<pre><code class="language-mysql"># è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„å¡«å†™å®Œæˆä»»åŠ¡çš„è¯­å¥ï¼Œç©ºç™½è¡Œå¯é€šè¿‡å›è½¦æ¢è¡Œæ·»åŠ ã€‚
# ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£å®Œæˆä»»åŠ¡ï¼Œä¸è¿‡ï¼Œåœ¨å‘½ä»¤è¡Œé”®å…¥çš„è¯­å¥ä¸ä¼šè¢«ä¿å­˜ã€‚
# CREATE DATABASE MyDb;
USE MyDb;
CREATE TABLE products(
    pid char(10) PRIMARY KEY,
    name VARCHAR(32),
    brand CHAR(10) CONSTRAINT CK_products_brand CHECK(brand in ('A','B')),
    price INT CONSTRAINT CK_products_price CHECK(price&gt;0)
);
# ç»“æŸ 
</code></pre>
<h3 id="15-defaultçº¦æŸ">1.5 DEFAULTçº¦æŸ</h3>
<p>è¡¨hrçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>char(10)</td>
<td>å·¥å·,ä¸»ç </td>
</tr>
<tr>
<td>name</td>
<td>varchar(32)</td>
<td>å§“å,ä¸å…è®¸ä¸ºç©ºå€¼</td>
</tr>
<tr>
<td>mz</td>
<td>char(16)</td>
<td>æ°‘æ—, ç¼ºçœå€¼ä¸ºâ€œæ±‰æ—â€</td>
</tr>
</tbody>
</table>
<p>è¯·åœ¨æ•°æ®åº“MyDbä¸­åˆ›å»ºè¡¨hrï¼Œå¹¶å®ç°nameåˆ—çš„NOT NULLçº¦æŸå’Œmzåˆ—çš„Defaultçº¦æŸï¼ˆåˆ«å¿˜äº†ä¸»ç çº¦æŸï¼‰</p>
<pre><code class="language-mysql"># è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„å¡«å†™å®Œæˆä»»åŠ¡çš„è¯­å¥ï¼Œç©ºç™½è¡Œå¯é€šè¿‡å›è½¦æ¢è¡Œæ·»åŠ ã€‚
# ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£å®Œæˆä»»åŠ¡ï¼Œä¸è¿‡ï¼Œåœ¨å‘½ä»¤è¡Œé”®å…¥çš„è¯­å¥ä¸ä¼šè¢«ä¿å­˜ã€‚
USE MyDb;
CREATE TABLE hr(
    id CHAR(10) PRIMARY KEY,
    name VARCHAR(32) NOT NULL,
    mz CHAR(16) DEFAULT &quot;æ±‰æ—&quot;
);
# ç»“æŸ 
</code></pre>
<h3 id="16-uniqueçº¦æŸ">1.6 UNIQUEçº¦æŸ</h3>
<p>è¡¨sçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>sno</td>
<td>char(10)</td>
<td>å­¦å·,ä¸»ç </td>
</tr>
<tr>
<td>name</td>
<td>varchar(32)</td>
<td>å§“å,ä¸å…è®¸ä¸ºç©ºå€¼</td>
</tr>
<tr>
<td>ID</td>
<td>char(18)</td>
<td>èº«ä»½è¯å·, ä¸å…è®¸æœ‰ä¸¤ä¸ªç›¸åŒçš„èº«ä»½è¯å·</td>
</tr>
</tbody>
</table>
<p>è¯·åœ¨æ•°æ®åº“MyDbä¸­åˆ›å»ºè¡¨sï¼Œå¹¶å®ç°ç›¸å…³çº¦æŸï¼ˆä¸»ç ï¼ŒNOT NULLå’ŒUniqueçº¦æŸï¼‰ã€‚ æ³¨æ„è¡¨åsæ˜¯å°å†™çš„ï¼Œåˆ—åIDæ˜¯å…¨å¤§å†™çš„ã€‚å¦‚æœæ²¡æœ‰æ•°æ®åº“MyDb,ä½ éœ€è¦åˆ›å»ºå®ƒï¼Œå¹¶ä½¿å…¶æˆä¸ºå½“å‰å·¥ä½œæ•°æ®åº“ã€‚</p>
<pre><code class="language-mysql"># è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„å¡«å†™å®Œæˆä»»åŠ¡çš„è¯­å¥ï¼Œç©ºç™½è¡Œå¯é€šè¿‡å›è½¦æ¢è¡Œæ·»åŠ ã€‚
# ä½ ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œçª—å£å®Œæˆä»»åŠ¡ï¼Œä¸è¿‡ï¼Œåœ¨å‘½ä»¤è¡Œé”®å…¥çš„è¯­å¥ä¸ä¼šè¢«ä¿å­˜ã€‚
USE MyDb;
CREATE TABLE s(
    sno CHAR(10) PRIMARY KEY,
    name VARCHAR(32) NOT NULL,
    ID CHAR(18) UNIQUE
);
# ç»“æŸ 
</code></pre>
<h2 id="äºŒ-å®è®­2-è¡¨ç»“æ„ä¸å®Œæ•´æ€§çš„ä¿®æ”¹alter">äºŒã€å®è®­2 è¡¨ç»“æ„ä¸å®Œæ•´æ€§çš„ä¿®æ”¹(ALTER)</h2>
<h3 id="21-ä¿®æ”¹è¡¨å">2.1 ä¿®æ”¹è¡¨å</h3>
<p>æ•°æ®åº“TestDb1ä¸­æœ‰è¡¨your_tableï¼Œè¯·æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘çª—ä¸­æ·»åŠ æ°å½“çš„è¯­å¥ï¼Œå°†è¡¨åyour_tableæ›´æ”¹ä¸ºmy_tableã€‚</p>
<pre><code class="language-mysql">USE TestDb1;

#è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„æ·»åŠ æ°å½“çš„è¯­å¥ï¼Œå°†è¡¨åyour_tableæ›´æ”¹ä¸ºmy_table:
ALTER TABLE your_table rename my_table;
</code></pre>
<h3 id="22-æ·»åŠ ä¸åˆ é™¤å­—æ®µ">2.2 æ·»åŠ ä¸åˆ é™¤å­—æ®µ</h3>
<p>å‡è®¾æ•°æ®åº“MyDbä¸­æœ‰è¡¨order(è®¢å•)å’ŒorderDetail(è®¢å•æ˜ç»†) ç­‰è¡¨ï¼Œä¸¤è¡¨çš„ç»“æ„åˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<p><strong>orderè¡¨</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>orderNo</td>
<td>char(12)</td>
<td>è®¢å•å·ï¼Œä¸»ç </td>
</tr>
<tr>
<td>orderDate</td>
<td>date</td>
<td>è®¢è´­æ—¥æœŸ</td>
</tr>
<tr>
<td>customerNo</td>
<td>char(12)</td>
<td>å®¢æˆ·ç¼–å·ï¼Œå¤–ç ï¼Œä¸customer.customerNoå¯¹åº”</td>
</tr>
<tr>
<td>employeeNo</td>
<td>char(12)</td>
<td>é›‡å‘˜å·¥å·ï¼Œå¤–ç ï¼Œä¸employee.employeeNoå¯¹åº”</td>
</tr>
</tbody>
</table>
<p><strong>orderDetailè¡¨</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>orderNo</td>
<td>char(12)</td>
<td>è®¢å•å·ï¼Œä¸»å±æ€§ï¼Œå¤–ç ï¼Œä¸order.orderNoå¯¹åº”</td>
</tr>
<tr>
<td>productNo</td>
<td>char(12)</td>
<td>äº§å“ç¼–å·ï¼Œä¸»å±æ€§ï¼Œå¤–ç ï¼Œä¸product.productNoå¯¹åº”</td>
</tr>
<tr>
<td>quantityOrdered</td>
<td>int</td>
<td>è®¢è´­æ•°é‡</td>
</tr>
<tr>
<td>orderDate</td>
<td>date</td>
<td>è®¢è´­æ—¥æœŸ</td>
</tr>
</tbody>
</table>
<p><em>æ³¨ï¼šè¡¨orderDetailçš„ä¸»ç ç”±(orderNo,productNo)ç»„æˆ</em></p>
<p>ç¼–ç¨‹çš„ä»»åŠ¡æ˜¯å¯¹orderDetailè¡¨è¿›è¡Œä¿®æ”¹ï¼š</p>
<ol>
<li>orderDetailè¡¨çš„orderDateåˆ—æ˜æ˜¾å¤šä½™ï¼Œå› ä¸ºåŒä¸€è®¢å•ä¸­çš„æ¯ä¸€ç¬”äº¤æ˜“éƒ½å‘ç”Ÿåœ¨åŒä¸€å¤©ï¼Œè¿™ä¸ªæ—¥æœŸåœ¨è®¢å•ä¸»ä½“è¡¨orderä¸­å·²æœ‰è®°å½•ï¼Œè¯·åˆ é™¤åˆ—orderDateã€‚</li>
<li>äº§å“çš„å•ä»·æ˜¯è®¢å•æ˜ç»†éœ€è¦è®°å½•çš„å†…å®¹ï¼Œè¯·åœ¨orderDetailä¸­æ·»åŠ åˆ—unitPriceä»¥è®°å½•äº§å“çš„å•ä»·:</li>
</ol>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>unitPrice</td>
<td>numeric(10,2)</td>
<td>äº§å“çš„æˆäº¤å•ä»·</td>
</tr>
</tbody>
</table>
<p>è¯·æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘çª—ä¸­æ·»åŠ æ°å½“çš„è¯­å¥ï¼Œå®ç°ä¸Šè¿°ç¼–ç¨‹ä»»åŠ¡ã€‚</p>
<pre><code class="language-mysql">use MyDb;

#è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„æ·»åŠ é€‚å½“çš„SQLä»£ç ï¼Œå®ç°ç¼–ç¨‹è¦æ±‚
#è¯­å¥1ï¼šåˆ é™¤è¡¨orderDetailä¸­çš„åˆ—orderDate
ALTER TABLE orderDetail DROP orderDate;
#è¯­å¥2ï¼šæ·»åŠ åˆ—unitPrice
ALTER TABLE orderDetail ADD unitPrice numeric(10,2);
</code></pre>
<h3 id="23-ä¿®æ”¹å­—æ®µ">2.3 ä¿®æ”¹å­—æ®µ</h3>
<p>æ•°æ®åº“MyDbä¸­æœ‰è¡¨addressBook(é€šä¿¡å½•)ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>serialNo</td>
<td>int</td>
<td>è‡ªåŠ¨ç¼–å·ï¼Œä¸»ç </td>
</tr>
<tr>
<td>name</td>
<td>char(32)</td>
<td>å§“å</td>
</tr>
<tr>
<td>company</td>
<td>char(32)</td>
<td>å·¥ä½œå•ä½</td>
</tr>
<tr>
<td>position</td>
<td>char(10)</td>
<td>èŒä½</td>
</tr>
<tr>
<td>workPhone</td>
<td>char(16)</td>
<td>åŠå…¬ç”µè¯</td>
</tr>
<tr>
<td>mobile</td>
<td>char(11)</td>
<td>æ‰‹æœº</td>
</tr>
<tr>
<td>QQ</td>
<td>int</td>
<td>QQå·</td>
</tr>
<tr>
<td>weixin</td>
<td>char(12)</td>
<td>å¾®ä¿¡å·</td>
</tr>
</tbody>
</table>
<p>å½“åˆåˆ›å»ºè¡¨çš„è¯­å¥å¦‚ä¸‹ï¼š</p>
<pre><code class="language-mysql">create table addressBook(
    serialNo int auto_increment primary key,
    name char(32),
    company char(32),
    position char(10),
    workPhone char(16),
    mobile char(11),
    QQ int,
    weixin char(12)
);
</code></pre>
<p>ä½ çš„ç¼–ç¨‹ä»»åŠ¡æ˜¯å¯¹è¡¨addressBookä½œä»¥ä¸‹ä¿®æ”¹ï¼š</p>
<ol>
<li>å°†QQå·çš„æ•°æ®ç±»å‹æ”¹ä¸ºchar(12);</li>
<li>å°†åˆ—åweixinæ”¹ä¸ºwechatã€‚</li>
</ol>
<p>è¯·æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶test3.sqlç¼–è¾‘çª—ä¸­æ·»åŠ æ°å½“çš„è¯­å¥ï¼Œå®ç°ä¸Šè¿°ç¼–ç¨‹ä»»åŠ¡ã€‚</p>
<pre><code class="language-mysql">use MyDb;

#è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„æ·»åŠ é€‚å½“çš„SQLè¯­å¥ï¼Œå®ç°ç¼–ç¨‹è¦æ±‚
ALTER TABLE addressBook MODIFY QQ CHAR(12);
ALTER TABLE addressBook RENAME COLUMN weixin TO wechat;
</code></pre>
<h3 id="24-æ·»åŠ -åˆ é™¤ä¸ä¿®æ”¹çº¦æŸ">2.4 æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹çº¦æŸ</h3>
<p>æ•°æ®åº“MyDbä¸­æœ‰ä»¥ä¸‹ä¸¤è¡¨ï¼š</p>
<p><strong>Dept(éƒ¨é—¨)</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>deptNo</td>
<td>INT</td>
<td>éƒ¨é—¨å·ï¼Œä¸»é”®</td>
</tr>
<tr>
<td>deptName</td>
<td>VARCHAR(32)</td>
<td>éƒ¨é—¨åç§°ï¼Œä¸åŒéƒ¨é—¨ä¸å…è®¸é‡å</td>
</tr>
<tr>
<td>tel</td>
<td>char(11)</td>
<td>éƒ¨é—¨ç”µè¯</td>
</tr>
<tr>
<td>mgrStaffNo</td>
<td>int</td>
<td>éƒ¨é—¨ç»ç†çš„å·¥å·ï¼Œå¤–ç </td>
</tr>
</tbody>
</table>
<p><strong>Staff(èŒå·¥)</strong></p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>staffNo</td>
<td>INT</td>
<td>å·¥å·ï¼Œä¸»é”®</td>
</tr>
<tr>
<td>staffName</td>
<td>VARCHAR(32)</td>
<td>èŒå·¥å§“å</td>
</tr>
<tr>
<td>gender</td>
<td>CHAR(1)</td>
<td>æ€§åˆ«ï¼Œå–å€¼èŒƒå›´ï¼šF-å¥³ï¼ŒM-ç”·</td>
</tr>
<tr>
<td>dob</td>
<td>date</td>
<td>å‡ºç”Ÿæ—¥æœŸ</td>
</tr>
<tr>
<td>Salary</td>
<td>numeric(8,2)</td>
<td>å·¥èµ„</td>
</tr>
<tr>
<td>dept</td>
<td>INT</td>
<td>éƒ¨é—¨å·,å¤–é”®</td>
</tr>
</tbody>
</table>
<p>ç°é€šè¿‡ä»¥ä¸‹è¯­å¥ï¼Œå®Œæˆäº†ä¸¤è¡¨çš„åŸºç¡€åˆ›å»ºå·¥ä½œ(éƒ¨åˆ†çº¦æŸæ²¡æœ‰å®ç°):</p>
<pre><code class="language-mysql">create table Dept(
    deptNo int primary key,
    deptName varchar(32),
    tel char(11),
    mgrStaffNo int
);
create table Staff(
    staffNo int,
    staffName varchar(32),
    gender char(1),
    dob date,
    salary numeric(8,2),
    dept int
);
</code></pre>
<p>è¯·åœ¨å³ä¾§ä»£ç ç¼–è¾‘çª—å¯¹åº”ä½ç½®å†™å‡ºé€‚å½“çš„è¯­å¥ï¼Œå®Œæˆä»¥ä¸‹å·¥ä½œï¼š (1) ä¸ºè¡¨Staffæ·»åŠ ä¸»ç ; (2) Dept.mgrStaffNoæ˜¯å¤–ç ï¼Œå¯¹åº”çš„ä¸»ç æ˜¯Staff.staffNo,è¯·æ·»åŠ è¿™ä¸ªå¤–ç ï¼Œåå­—ä¸ºFK_Dept_mgrStaffNo; (3) Staff.deptæ˜¯å¤–ç ï¼Œå¯¹åº”çš„ä¸»ç æ˜¯Dept.deptNo. è¯·æ·»åŠ è¿™ä¸ªå¤–ç ï¼Œåå­—ä¸ºFK_Staff_dept; (4) ä¸ºè¡¨Staffæ·»åŠ checkçº¦æŸï¼Œè§„åˆ™ä¸ºï¼šgenderçš„å€¼åªèƒ½ä¸ºFæˆ–Mï¼›çº¦æŸåä¸ºCK_Staff_gender; (5) ä¸ºè¡¨Deptæ·»åŠ uniqueçº¦æŸï¼šdeptNameä¸å…è®¸é‡å¤ã€‚çº¦æŸåä¸ºUN_Dept_deptName.</p>
<pre><code class="language-mysql">use MyDb;
#è¯·åœ¨ä»¥ä¸‹ç©ºç™½å¤„å¡«å†™é€‚å½“çš„è¯˜å¥ï¼Œå®ç°ç¼–ç¨‹è¦æ±‚ã€‚
#(1) ä¸ºè¡¨Staffæ·»åŠ ä¸»ç 
ALTER TABLE Staff ADD PRIMARY KEY(staffNo);
#(2) Dept.mgrStaffNoæ˜¯å¤–ç ï¼Œå¯¹åº”çš„ä¸»ç æ˜¯Staff.staffNo,è¯·æ·»åŠ è¿™ä¸ªå¤–ç ï¼Œåå­—ä¸ºFK_Dept_mgrStaffNo:
ALTER TABLE Dept ADD CONSTRAINT FK_Dept_mgrStaffNo FOREIGN KEY(mgrStaffNo) REFERENCES Staff(staffNo);
#(3) Staff.deptæ˜¯å¤–ç ï¼Œå¯¹åº”çš„ä¸»ç æ˜¯Dept.deptNo. è¯·æ·»åŠ è¿™ä¸ªå¤–ç ï¼Œåå­—ä¸ºFK_Staff_dept:
ALTER TABLE Staff ADD CONSTRAINT FK_Staff_dept FOREIGN KEY(dept) REFERENCES Dept(deptNo);
#(4) ä¸ºè¡¨Staffæ·»åŠ checkçº¦æŸï¼Œè§„åˆ™ä¸ºï¼šgenderçš„å€¼åªèƒ½ä¸ºFæˆ–Mï¼›çº¦æŸåä¸ºCK_Staff_gender:
ALTER TABLE Staff ADD CONSTRAINT CK_Staff_gender CHECK(gender in('F','M'));
#(5) ä¸ºè¡¨Deptæ·»åŠ uniqueçº¦æŸï¼šdeptNameä¸å…è®¸é‡å¤ã€‚çº¦æŸåä¸ºUN_Dept_deptNameï¼š
ALTER TABLE Dept ADD CONSTRAINT UN_Dept_deptName UNIQUE(deptName);
</code></pre>
<h2 id="ä¸‰-å®è®­3-æ•°æ®æŸ¥è¯¢selectä¹‹ä¸€">ä¸‰ã€<strong>å®è®­3 æ•°æ®æŸ¥è¯¢(Select)ä¹‹ä¸€</strong></h2>
<h3 id="31-æŸ¥è¯¢å®¢æˆ·ä¸»è¦ä¿¡æ¯">3.1 æŸ¥è¯¢å®¢æˆ·ä¸»è¦ä¿¡æ¯</h3>
<p>æœ¬å®è®­é‡‡ç”¨çš„æ˜¯æŸé“¶è¡Œçš„ä¸€ä¸ªé‡‘èåœºæ™¯åº”ç”¨çš„æ¨¡æ‹Ÿæ•°æ®åº“ï¼Œæ•°æ®åº“ä¸­è¡¨ï¼Œè¡¨ç»“æ„ä»¥åŠæ‰€æœ‰å­—æ®µçš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<p>è¡¨1 client(å®¢æˆ·è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>c_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>å®¢æˆ·ç¼–å·</td>
</tr>
<tr>
<td>c_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·åç§°</td>
</tr>
<tr>
<td>c_mail</td>
<td>CHAR(30)</td>
<td>UNIQUE</td>
<td>å®¢æˆ·é‚®ç®±</td>
</tr>
<tr>
<td>c_id_card</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·èº«ä»½è¯</td>
</tr>
<tr>
<td>c_phone</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·æ‰‹æœºå·</td>
</tr>
<tr>
<td>c_password</td>
<td>CHAR(20)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·ç™»å½•å¯†ç </td>
</tr>
</tbody>
</table>
<p>è¡¨2 bank_card(é“¶è¡Œå¡)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>b_number</td>
<td>CHAR(30)</td>
<td>PRIMARY KEY</td>
<td>é“¶è¡Œå¡å·</td>
</tr>
<tr>
<td>b_type</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>é“¶è¡Œå¡ç±»å‹(å‚¨è“„å¡/ä¿¡ç”¨å¡)</td>
</tr>
<tr>
<td>b_c_id</td>
<td>INTEGER</td>
<td>NOT NULL FOREIGN KEY</td>
<td>æ‰€å±å®¢æˆ·ç¼–å·,å¼•ç”¨è‡ªclientè¡¨çš„c_idå­—æ®µã€‚</td>
</tr>
<tr>
<td>b_balance</td>
<td>NUMERIC(10,2)</td>
<td>NOT NULL</td>
<td>ä½™é¢,ä¿¡ç”¨å¡ä½™é¢ç³»æŒ‡å·²é€æ”¯çš„é‡‘é¢</td>
</tr>
</tbody>
</table>
<p>è¡¨3 finances_product(ç†è´¢äº§å“è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>p_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>äº§å“åç§°</td>
</tr>
<tr>
<td>p_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>äº§å“ç¼–å·</td>
</tr>
<tr>
<td>p_description</td>
<td>VARCHAR(4000)</td>
<td>æ— </td>
<td>äº§å“æè¿°</td>
</tr>
<tr>
<td>p_amount</td>
<td>INTEGER</td>
<td>æ— </td>
<td>è´­ä¹°é‡‘é¢</td>
</tr>
<tr>
<td>p_year</td>
<td>INTEGER</td>
<td>æ— </td>
<td>ç†è´¢å¹´é™</td>
</tr>
</tbody>
</table>
<p>è¡¨4 insurance(ä¿é™©è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>i_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>ä¿é™©åç§°</td>
</tr>
<tr>
<td>i_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>ä¿é™©ç¼–å·</td>
</tr>
<tr>
<td>i_amount</td>
<td>INTEGER</td>
<td>æ— </td>
<td>ä¿é™©é‡‘é¢</td>
</tr>
<tr>
<td>i_person</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>é€‚ç”¨äººç¾¤</td>
</tr>
<tr>
<td>i_year</td>
<td>INTEGER</td>
<td>æ— </td>
<td>ä¿é™©å¹´é™</td>
</tr>
<tr>
<td>i_project</td>
<td>VARCHAR(200)</td>
<td>æ— </td>
<td>ä¿éšœé¡¹ç›®</td>
</tr>
</tbody>
</table>
<p>è¡¨5 fund(åŸºé‡‘è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>f_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>åŸºé‡‘åç§°</td>
</tr>
<tr>
<td>f_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>åŸºé‡‘ç¼–å·</td>
</tr>
<tr>
<td>f_type</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>åŸºé‡‘ç±»å‹</td>
</tr>
<tr>
<td>f_amount</td>
<td>INTEGER</td>
<td>æ— </td>
<td>åŸºé‡‘é‡‘é¢</td>
</tr>
<tr>
<td>risk_level</td>
<td>CHAR(20)</td>
<td>NOT NULL</td>
<td>é£é™©ç­‰çº§</td>
</tr>
<tr>
<td>f_manager</td>
<td>INTEGER</td>
<td>NOT NULL</td>
<td>åŸºé‡‘ç®¡ç†è€…</td>
</tr>
</tbody>
</table>
<p>è¡¨6 property(èµ„äº§è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>pro_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>èµ„äº§ç¼–å·</td>
</tr>
<tr>
<td>pro_c_id</td>
<td>INTEGER</td>
<td>NOT NULL</td>
<td>FOREIGN KEY</td>
</tr>
<tr>
<td>pro_pif_id</td>
<td>INTEGER</td>
<td>NOT NULL</td>
<td>ä¸šåŠ¡çº¦æŸ</td>
</tr>
<tr>
<td>pro_type</td>
<td>INTEGER</td>
<td>NOT NULL</td>
<td>å•†å“ç±»å‹:1è¡¨ç¤ºç†è´¢äº§å“;2è¡¨ç¤ºä¿é™©;3è¡¨ç¤ºåŸºé‡‘</td>
</tr>
<tr>
<td>pro_status</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>å•†å“çŠ¶æ€:'å¯ç”¨','å†»ç»“'</td>
</tr>
<tr>
<td>pro_quantity</td>
<td>INTEGER</td>
<td>æ— </td>
<td>å•†å“æ•°é‡</td>
</tr>
<tr>
<td>pro_income</td>
<td>INTEGER</td>
<td>æ— </td>
<td>å•†å“æ”¶ç›Š</td>
</tr>
<tr>
<td>pro_purchase_time</td>
<td>DATE</td>
<td>æ— </td>
<td>è´­ä¹°æ—¶é—´</td>
</tr>
</tbody>
</table>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢æ‰€æœ‰å®¢æˆ·çš„åç§°ã€æ‰‹æœºå·å’Œé‚®ç®±ä¿¡æ¯ã€‚æŸ¥è¯¢ç»“æœæŒ‰ç…§å®¢æˆ·ç¼–å·æ’åºã€‚</p>
<pre><code class="language-mysql">-- 1) æŸ¥è¯¢æ‰€æœ‰å®¢æˆ·çš„åç§°ã€æ‰‹æœºå·å’Œé‚®ç®±ä¿¡æ¯ã€‚æŸ¥è¯¢ç»“æœæŒ‰ç…§å®¢æˆ·ç¼–å·æ’åºã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_phone,c_mail
FROM client
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="32-é‚®ç®±ä¸ºnullçš„å®¢æˆ·">3.2 é‚®ç®±ä¸ºnullçš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
æŸ¥è¯¢å®¢æˆ·è¡¨(client)ä¸­æ²¡æœ‰å¡«å†™é‚®ç®±ä¿¡æ¯(é‚®ç®±å­—æ®µå€¼ä¸ºnull)çš„å®¢æˆ·çš„ç¼–å·ã€åç§°ã€èº«ä»½è¯å·ã€æ‰‹æœºå·ã€‚</p>
<pre><code class="language-mysql">-- 2) æŸ¥è¯¢å®¢æˆ·è¡¨(client)ä¸­é‚®ç®±ä¿¡æ¯ä¸ºnullçš„å®¢æˆ·çš„ç¼–å·ã€åç§°ã€èº«ä»½è¯å·ã€æ‰‹æœºå·ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š

SELECT c_id,c_name,c_id_card,c_phone
FROM client
WHERE c_mail IS NULL;
/*  end  of  your code  */
</code></pre>
<h3 id="33-æ—¢ä¹°äº†ä¿é™©åˆä¹°äº†åŸºé‡‘çš„å®¢æˆ·">3.3 æ—¢ä¹°äº†ä¿é™©åˆä¹°äº†åŸºé‡‘çš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢æ—¢ä¹°äº†ä¿é™©åˆä¹°äº†åŸºé‡‘çš„å®¢æˆ·çš„åç§°ã€é‚®ç®±å’Œç”µè¯,ç»“æœä¾å®¢æˆ·ç¼–å·æ’åºã€‚</p>
<pre><code class="language-mysql">-- 3) æŸ¥è¯¢æ—¢ä¹°äº†ä¿é™©åˆä¹°äº†åŸºé‡‘çš„å®¢æˆ·çš„åç§°ã€é‚®ç®±å’Œç”µè¯ã€‚ç»“æœä¾c_idæ’åº
-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_mail,c_phone
FROM client
WHERE c_id IN(SELECT pro_c_id FROM property WHERE pro_type=2)
AND c_id IN(SELECT pro_c_id FROM property WHERE pro_type=3)
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="34-åŠç†äº†å‚¨è“„å¡çš„å®¢æˆ·ä¿¡æ¯">3.4 åŠç†äº†å‚¨è“„å¡çš„å®¢æˆ·ä¿¡æ¯</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢åŠç†äº†å‚¨è“„å¡çš„å®¢æˆ·åç§°ã€æ‰‹æœºå·å’Œé“¶è¡Œå¡å·ã€‚æ³¨æ„ä¸€ä¸ªå®¢æˆ·åœ¨æœ¬è¡Œå¯èƒ½ä¸æ­¢ä¸€å¼ å‚¨è“„å¡ï¼Œåº”å…¨åˆ—å‡ºã€‚æŸ¥è¯¢ç»“æœç»“æœä¾å®¢æˆ·ç¼–å·æ’åºã€‚</p>
<pre><code class="language-mysql">-- 4) æŸ¥è¯¢åŠç†äº†å‚¨è“„å¡çš„å®¢æˆ·åç§°ã€æ‰‹æœºå·ã€é“¶è¡Œå¡å·ã€‚ æŸ¥è¯¢ç»“æœç»“æœä¾å®¢æˆ·ç¼–å·æ’åºã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_phone,b_number
FROM client,bank_card
WHERE c_id=b_c_id AND b_type=&quot;å‚¨è“„å¡&quot;
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="35-æ¯ä»½é‡‘é¢åœ¨30000~50000ä¹‹é—´çš„ç†è´¢äº§å“">3.5 æ¯ä»½é‡‘é¢åœ¨30000ï½50000ä¹‹é—´çš„ç†è´¢äº§å“</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢ç†è´¢äº§å“ä¸­æ¯ä»½é‡‘é¢åœ¨30000ï½50000ä¹‹é—´çš„ç†è´¢äº§å“çš„ç¼–å·,æ¯ä»½é‡‘é¢ï¼Œç†è´¢å¹´é™ï¼Œå¹¶æŒ‰é‡‘é¢å‡åºæ’åºï¼Œé‡‘é¢ç›¸åŒçš„æŒ‰ç…§ç†è´¢å¹´é™é™åºæ’åºã€‚</p>
<pre><code class="language-mysql">-- 5) æŸ¥è¯¢ç†è´¢äº§å“ä¸­æ¯ä»½é‡‘é¢åœ¨30000ï½50000ä¹‹é—´çš„ç†è´¢äº§å“çš„ç¼–å·,æ¯ä»½é‡‘é¢ï¼Œç†è´¢å¹´é™ï¼Œå¹¶æŒ‰ç…§é‡‘é¢å‡åºæ’åºï¼Œé‡‘é¢ç›¸åŒçš„æŒ‰ç…§ç†è´¢å¹´é™é™åºæ’åºã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT p_id,p_amount,p_year
FROM finances_product
WHERE p_amount BETWEEN 30000 AND 50000
ORDER BY p_amount,p_year DESC;
/*  end  of  your code  */
</code></pre>
<h3 id="36-å•†å“æ”¶ç›Šçš„ä¼—æ•°">3.6 å•†å“æ”¶ç›Šçš„ä¼—æ•°</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š ä¼—æ•°æ˜¯ä¸€ç»„æ•°æ®ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°å€¼ï¼Œæœ‰æ—¶ä¼—æ•°åœ¨ä¸€ç»„æ•°ä¸­ä¼šæœ‰å¥½å‡ ä¸ªã€‚æŸ¥è¯¢èµ„äº§è¡¨ä¸­æ‰€æœ‰èµ„äº§è®°å½•é‡Œå•†å“æ”¶ç›Šçš„ä¼—æ•°å’Œå®ƒå‡ºç°çš„æ¬¡æ•°ï¼Œå‡ºç°çš„æ¬¡æ•°å‘½åä¸ºpresenceã€‚</p>
<pre><code class="language-mysql">-- 6) æŸ¥è¯¢èµ„äº§è¡¨ä¸­æ‰€æœ‰èµ„äº§è®°å½•é‡Œå•†å“æ”¶ç›Šçš„ä¼—æ•°å’Œå®ƒå‡ºç°çš„æ¬¡æ•°ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT A.pro_income,COUNT(*) presence
FROM property A
GROUP BY A.pro_income
HAVING presence&gt;=ALL(SELECT COUNT(*)
                    FROM property B
                    GROUP BY B.pro_income);
/*  end  of  your code  */
</code></pre>
<h3 id="37-æœªè´­ä¹°ä»»ä½•ç†è´¢äº§å“çš„æ­¦æ±‰å±…æ°‘">3.7 æœªè´­ä¹°ä»»ä½•ç†è´¢äº§å“çš„æ­¦æ±‰å±…æ°‘</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š å·²çŸ¥èº«ä»½è¯å‰6ä½è¡¨ç¤ºå±…æ°‘åœ°åŒºï¼Œå…¶ä¸­4201å¼€å¤´è¡¨ç¤ºæ¹–åŒ—çœæ­¦æ±‰å¸‚ã€‚æŸ¥è¯¢èº«ä»½è¯éš¶å±æ­¦æ±‰å¸‚æ²¡æœ‰ä¹°è¿‡ä»»ä½•ç†è´¢äº§å“çš„å®¢æˆ·çš„åç§°ã€ç”µè¯å·ã€é‚®ç®±ã€‚ä¾å®¢æˆ·ç¼–å·æ’åº</p>
<pre><code class="language-mysql">-- 7) æŸ¥è¯¢èº«ä»½è¯éš¶å±æ­¦æ±‰å¸‚æ²¡æœ‰ä¹°è¿‡ä»»ä½•ç†è´¢äº§å“çš„å®¢æˆ·çš„åç§°ã€ç”µè¯å·ã€é‚®ç®±ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_phone,c_mail
FROM client
WHERE c_id_card LIKE '4201%' 
AND c_id NOT IN(SELECT pro_c_id
                FROM property B
                WHERE B.pro_type=1)
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="38-æŒæœ‰ä¸¤å¼ ä¿¡ç”¨å¡çš„ç”¨æˆ·">3.8 æŒæœ‰ä¸¤å¼ ä¿¡ç”¨å¡çš„ç”¨æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢æŒæœ‰ä¸¤å¼ (å«ï¼‰ä»¥ä¸Šä¿¡ç”¨å¡çš„ç”¨æˆ·çš„åç§°ã€èº«ä»½è¯å·ã€æ‰‹æœºå·ã€‚æŸ¥è¯¢ç»“æœä¾å®¢æˆ·ç¼–å·æ’åº</p>
<pre><code class="language-mysql">-- 8) æŸ¥è¯¢æŒæœ‰ä¸¤å¼ (å«ï¼‰ä»¥ä¸Šä¿¡ç”¨å¡çš„ç”¨æˆ·çš„åç§°ã€èº«ä»½è¯å·ã€æ‰‹æœºå·ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_id_card,c_phone
FROM client,bank_card
WHERE c_id=b_c_id AND b_type=&quot;ä¿¡ç”¨å¡&quot;
GROUP BY c_id
HAVING COUNT(*)&gt;=2
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="39-è´­ä¹°äº†è´§å¸å‹åŸºé‡‘çš„å®¢æˆ·ä¿¡æ¯">3.9 è´­ä¹°äº†è´§å¸å‹åŸºé‡‘çš„å®¢æˆ·ä¿¡æ¯</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢è´­ä¹°äº†è´§å¸å‹(f_type='è´§å¸å‹')åŸºé‡‘çš„ç”¨æˆ·çš„åç§°ã€ç”µè¯å·ã€é‚®ç®±ã€‚ä¾å®¢æˆ·ç¼–å·æ’åº</p>
<pre><code class="language-mysql">-- 9) æŸ¥è¯¢è´­ä¹°äº†è´§å¸å‹(f_type='è´§å¸å‹')åŸºé‡‘çš„ç”¨æˆ·çš„åç§°ã€ç”µè¯å·ã€é‚®ç®±ã€‚
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_phone,c_mail
FROM client
WHERE EXISTS(
    SELECT *
    FROM property
    WHERE c_id=pro_c_id AND pro_type=3 AND EXISTS(
        SELECT *
        FROM fund
        WHERE f_type='è´§å¸å‹' AND f_id=pro_pif_id
    )
)
ORDER BY c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="310-æŠ•èµ„æ€»æ”¶ç›Šå‰ä¸‰åçš„å®¢æˆ·">3.10 æŠ•èµ„æ€»æ”¶ç›Šå‰ä¸‰åçš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢å½“å‰æ€»çš„å¯ç”¨èµ„äº§æ”¶ç›Š(è¢«å†»ç»“çš„èµ„äº§é™¤å¤–)å‰ä¸‰åçš„å®¢æˆ·çš„åç§°ã€èº«ä»½è¯å·åŠå…¶æ€»æ”¶ç›Šï¼ŒæŒ‰æ”¶ç›Šé™åºè¾“å‡ºï¼Œæ€»æ”¶ç›Šå‘½åä¸ºtotal_incomeã€‚ä¸è€ƒè™‘å¹¶åˆ—æ’åæƒ…å½¢ã€‚</p>
<pre><code class="language-mysql">-- 10) æŸ¥è¯¢å½“å‰æ€»çš„å¯ç”¨èµ„äº§æ”¶ç›Š(è¢«å†»ç»“çš„èµ„äº§é™¤å¤–)å‰ä¸‰åçš„å®¢æˆ·çš„åç§°ã€èº«ä»½è¯å·åŠå…¶æ€»æ”¶ç›Šï¼ŒæŒ‰æ”¶ç›Šé™åºè¾“å‡ºï¼Œæ€»æ”¶ç›Šå‘½åä¸ºtotal_incomeã€‚ä¸è€ƒè™‘å¹¶åˆ—æ’åæƒ…å½¢ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_id_card,S1.total_income
FROM client,(SELECT pro_c_id,SUM(pro_income) total_income
             FROM property
             WHERE pro_status=&quot;å¯ç”¨&quot;
             GROUP BY pro_c_id) S1
WHERE c_id=S1.pro_c_id
ORDER BY S1.total_income DESC
LIMIT 3;
/*  end  of  your code  */ 
</code></pre>
<h3 id="311-é»„å§“å®¢æˆ·æŒå¡æ•°é‡">3.11 é»„å§“å®¢æˆ·æŒå¡æ•°é‡</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š ç»™å‡ºé»„å§“ç”¨æˆ·çš„ç¼–å·ã€åç§°ã€åŠç†çš„é“¶è¡Œå¡çš„æ•°é‡(æ²¡æœ‰åŠå¡çš„å¡æ•°é‡è®¡ä¸º0). æŒ‰åŠç†é“¶è¡Œå¡æ•°é‡é™åºè¾“å‡º,æŒå¡æ•°é‡ç›¸åŒçš„,ä¾å®¢æˆ·ç¼–å·æ’åºã€‚</p>
<pre><code class="language-mysql">-- 11) ç»™å‡ºé»„å§“ç”¨æˆ·çš„ç¼–å·ã€åç§°ã€åŠç†çš„é“¶è¡Œå¡çš„æ•°é‡(æ²¡æœ‰åŠå¡çš„å¡æ•°é‡è®¡ä¸º0),æŒå¡æ•°é‡å‘½åä¸ºnumber_of_cards,
--     æŒ‰åŠç†é“¶è¡Œå¡æ•°é‡é™åºè¾“å‡º,æŒå¡æ•°é‡ç›¸åŒçš„,ä¾å®¢æˆ·ç¼–å·æ’åºã€‚
-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_id,c_name,COUNT(b_number) number_of_cards
FROM client LEFT OUTER JOIN bank_card ON(client.c_id=bank_card.b_c_id)
WHERE c_name LIKE 'é»„%'
GROUP BY c_id
ORDER BY number_of_cards DESC,c_id;
/*  end  of  your code  */ 
</code></pre>
<h3 id="312-å®¢æˆ·ç†è´¢-ä¿é™©ä¸åŸºé‡‘æŠ•èµ„æ€»é¢">3.12 å®¢æˆ·ç†è´¢ã€ä¿é™©ä¸åŸºé‡‘æŠ•èµ„æ€»é¢</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š ç»¼åˆå®¢æˆ·è¡¨(client)ã€èµ„äº§è¡¨(property)ã€ç†è´¢äº§å“è¡¨(finances_product)ã€ä¿é™©è¡¨(insurance)å’ŒåŸºé‡‘è¡¨(fund)ï¼Œåˆ—å‡ºå®¢æˆ·çš„åç§°ã€èº«ä»½è¯å·ä»¥åŠæŠ•èµ„æ€»é‡‘é¢ï¼ˆå³æŠ•èµ„æœ¬é‡‘ï¼Œæ¯ç¬”æŠ•èµ„é‡‘é¢=å•†å“æ•°é‡*è¯¥äº§å“æ¯ä»½é‡‘é¢)ï¼Œæ³¨æ„æŠ•èµ„é‡‘é¢æŒ‰ç±»å‹éœ€æŸ¥è¯¢ä¸åŒçš„è¡¨ï¼Œ æŠ•èµ„æ€»é‡‘é¢æ˜¯å®¢æˆ·è´­ä¹°çš„å„ç±»(ç†è´¢,ä¿é™©,åŸºé‡‘)èµ„äº§æŠ•èµ„é‡‘é¢çš„æ€»å’Œï¼Œæ€»é‡‘é¢å‘½åä¸ºtotal_amountã€‚æŸ¥è¯¢ç»“æœæŒ‰æ€»é‡‘é¢é™åºæ’åºã€‚</p>
<pre><code class="language-mysql"> -- 12) ç»¼åˆå®¢æˆ·è¡¨(client)ã€èµ„äº§è¡¨(property)ã€ç†è´¢äº§å“è¡¨(finances_product)ã€ä¿é™©è¡¨(insurance)å’Œ
 --     åŸºé‡‘è¡¨(fund)ï¼Œåˆ—å‡ºå®¢æˆ·çš„åç§°ã€èº«ä»½è¯å·ä»¥åŠæŠ•èµ„æ€»é‡‘é¢ï¼ˆå³æŠ•èµ„æœ¬é‡‘ï¼Œ
 --     æ¯ç¬”æŠ•èµ„é‡‘é¢=å•†å“æ•°é‡*è¯¥äº§å“æ¯ä»½é‡‘é¢)ï¼Œæ³¨æ„æŠ•èµ„é‡‘é¢æŒ‰ç±»å‹éœ€è¦æŸ¥è¯¢ä¸åŒçš„è¡¨ï¼Œ
 --     æŠ•èµ„æ€»é‡‘é¢æ˜¯å®¢æˆ·è´­ä¹°çš„å„ç±»èµ„äº§(ç†è´¢,ä¿é™©,åŸºé‡‘)æŠ•èµ„é‡‘é¢çš„æ€»å’Œï¼Œæ€»é‡‘é¢å‘½åä¸ºtotal_amountã€‚
 --     æŸ¥è¯¢ç»“æœæŒ‰æ€»é‡‘é¢é™åºæ’åºã€‚
 -- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_id_card,coalesce(SUM(final.amount_pif),0) total_amount
FROM client C1
LEFT OUTER JOIN
((SELECT C2.c_id c_id_p,SUM(pro_quantity*p_amount) amount_p
 FROM client C2,finances_product,property
 WHERE pro_c_id=C2.c_id AND p_id=pro_pif_id AND pro_type=1
 GROUP BY c_id_p)
 UNION ALL
(SELECT C3.c_id c_id_i,SUM(pro_quantity*i_amount) amount_i
 FROM client C3,insurance,property
 WHERE pro_c_id=C3.c_id AND i_id=pro_pif_id AND pro_type=2
 GROUP BY c_id_i)
 UNION ALL
(SELECT C4.c_id c_id_f,SUM(pro_quantity*f_amount) amount_f
 FROM client C4,fund,property
 WHERE pro_c_id=C4.c_id AND f_id=pro_pif_id AND pro_type=3
 GROUP BY c_id_f)) AS final(c_id_pif,amount_pif)
ON(C1.c_id=final.c_id_pif)
GROUP BY C1.c_id
ORDER BY total_amount DESC;
/*  end  of  your code  */ 
</code></pre>
<h3 id="313-å®¢æˆ·æ€»èµ„äº§">3.13 å®¢æˆ·æ€»èµ„äº§</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
ç»¼åˆå®¢æˆ·è¡¨(client)ã€èµ„äº§è¡¨(property)ã€ç†è´¢äº§å“è¡¨(finances_product)ã€ä¿é™©è¡¨(insurance)ã€åŸºé‡‘è¡¨(fund)ï¼Œåˆ—å‡ºæ‰€æœ‰å®¢æˆ·çš„ç¼–å·ã€åç§°å’Œæ€»èµ„äº§ï¼Œæ€»èµ„äº§å‘½åä¸ºtotal_propertyã€‚æ€»èµ„äº§ä¸ºå‚¨è“„å¡æ€»ä½™é¢ï¼ŒæŠ•èµ„æ€»é¢ï¼ŒæŠ•èµ„æ€»æ”¶ç›Šçš„å’Œï¼Œå†æ‰£é™¤ä¿¡ç”¨å¡é€æ”¯çš„æ€»é‡‘é¢(ä¿¡ç”¨å¡ä½™é¢å³ä¸ºé€æ”¯é‡‘é¢)ã€‚å®¢æˆ·æ€»èµ„äº§åŒ…æ‹¬è¢«å†»ç»“çš„èµ„äº§ã€‚</p>
<pre><code class="language-mysql">-- 13) ç»¼åˆå®¢æˆ·è¡¨(client)ã€èµ„äº§è¡¨(property)ã€ç†è´¢äº§å“è¡¨(finances_product)ã€
--     ä¿é™©è¡¨(insurance)ã€åŸºé‡‘è¡¨(fund)å’ŒæŠ•èµ„èµ„äº§è¡¨(property)ï¼Œ
--     åˆ—å‡ºæ‰€æœ‰å®¢æˆ·çš„ç¼–å·ã€åç§°å’Œæ€»èµ„äº§ï¼Œæ€»èµ„äº§å‘½åä¸ºtotal_propertyã€‚
--     æ€»èµ„äº§ä¸ºå‚¨è“„å¡ä½™é¢ï¼ŒæŠ•èµ„æ€»é¢ï¼ŒæŠ•èµ„æ€»æ”¶ç›Šçš„å’Œï¼Œå†æ‰£é™¤ä¿¡ç”¨å¡é€æ”¯çš„é‡‘é¢
--     (ä¿¡ç”¨å¡ä½™é¢å³ä¸ºé€æ”¯é‡‘é¢)ã€‚å®¢æˆ·æ€»èµ„äº§åŒ…æ‹¬è¢«å†»ç»“çš„èµ„äº§ã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT C0.c_id,C0.c_name,coalesce(debit_balance+total_amount+total_income-credit_balance,0) total_property
FROM client C0,
(
    SELECT c_id,coalesce(SUM(final.amount_pif),0) total_amount
    FROM client C1
    LEFT OUTER JOIN
    ((SELECT C2.c_id c_id_p,SUM(pro_quantity*p_amount) amount_p
    FROM client C2,finances_product,property
    WHERE pro_c_id=C2.c_id AND p_id=pro_pif_id AND pro_type=1
    GROUP BY c_id_p)
    UNION ALL
    (SELECT C3.c_id c_id_i,SUM(pro_quantity*i_amount) amount_i
    FROM client C3,insurance,property
    WHERE pro_c_id=C3.c_id AND i_id=pro_pif_id AND pro_type=2
    GROUP BY c_id_i)
    UNION ALL
    (SELECT C4.c_id c_id_f,SUM(pro_quantity*f_amount) amount_f
    FROM client C4,fund,property
    WHERE pro_c_id=C4.c_id AND f_id=pro_pif_id AND pro_type=3
    GROUP BY c_id_f)) AS final(c_id_pif,amount_pif)
    ON(C1.c_id=final.c_id_pif)
    GROUP BY C1.c_id
) AS Amount(c_id,total_amount),
(
    SELECT c_id,coalesce(SUM(b_balance),0) debit_balance
    FROM client LEFT OUTER JOIN
    (
        SELECT b_c_id,b_balance
        FROM bank_card
        WHERE b_type='å‚¨è“„å¡'
    ) AS balance0(b_c_id,b_balance)
    ON(c_id=b_c_id)
    GROUP BY c_id
) AS Debit(c_id,debit_balance),
(
    SELECT c_id,coalesce(SUM(b_balance),0) credit_balance
    FROM client LEFT OUTER JOIN
    (
        SELECT b_c_id,b_balance
        FROM bank_card
        WHERE b_type='ä¿¡ç”¨å¡'
    ) AS balance1(b_c_id,b_balance)
    ON(c_id=b_c_id)
    GROUP BY c_id
) AS Credit(c_id,credit_balance),
(
    SELECT c_id,coalesce(SUM(pro_income),0) total_income
    FROM client LEFT OUTER JOIN property ON(c_id=pro_c_id)
    GROUP BY c_id
) AS Income(c_id,total_income)
WHERE C0.c_id=Amount.c_id AND C0.c_id=Debit.c_id AND C0.c_id=Credit.c_id AND C0.c_id=Income.c_id
ORDER BY c_id
/*  end  of  your code  */ 
</code></pre>
<h3 id="314-ç¬¬né«˜é—®é¢˜">3.14 ç¬¬Né«˜é—®é¢˜</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°æœ¬è¯¢è¦æ±‚ï¼š æŸ¥è¯¢æ¯ä»½ä¿é™©é‡‘é¢ç¬¬4é«˜ä¿é™©äº§å“çš„ç¼–å·å’Œä¿é™©é‡‘é¢ã€‚åœ¨æ•°å­—åºåˆ—8000,8000,7000,7000,6000ä¸­ï¼Œä¸¤ä¸ª8000å‡ä¸ºç¬¬1é«˜ï¼Œä¸¤ä¸ª7000å‡ä¸ºç¬¬2é«˜,6000ä¸ºç¬¬3é«˜ã€‚</p>
<pre><code class="language-mysql">-- 14) æŸ¥è¯¢æ¯ä»½ä¿é™©é‡‘é¢ç¬¬4é«˜ä¿é™©äº§å“çš„ç¼–å·å’Œä¿é™©é‡‘é¢ã€‚
--     åœ¨æ•°å­—åºåˆ—8000,8000,7000,7000,6000ä¸­ï¼Œ
--     ä¸¤ä¸ª8000å‡ä¸ºç¬¬1é«˜ï¼Œä¸¤ä¸ª7000å‡ä¸ºç¬¬2é«˜,6000ä¸ºç¬¬3é«˜ã€‚
-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT i_id,i_amount
FROM insurance
WHERE i_amount = (
    SELECT DISTINCT i_amount
    FROM insurance
    ORDER BY i_amount DESC
    LIMIT 1 OFFSET 3
)
ORDER BY i_id;
/*  end  of  your code  */ 
</code></pre>
<h3 id="315-åŸºé‡‘æ”¶ç›Šä¸¤ç§æ–¹å¼æ’å">3.15 åŸºé‡‘æ”¶ç›Šä¸¤ç§æ–¹å¼æ’å</h3>
<p><strong>æ’åé—®é¢˜ï¼š</strong><br>
æ’åæ˜¯æ•°æ®åº“åº”ç”¨ä¸­çš„ä¸€ç±»ç»å…¸é—®é¢˜ï¼Œå®é™…åˆæ ¹æ®å…·ä½“éœ€æ±‚ç»†åˆ†ä¸º3ç§åœºæ™¯ï¼š</p>
<ul>
<li>è¿ç»­æ’åï¼ŒåŒæ•°ä¸åŒåæ¬¡ï¼Œæ— å¹¶åˆ—åæ¬¡ã€‚ä¾‹å¦‚300ã€200ã€200ã€150ã€150ã€100çš„æ’åç»“æœä¸º1, 2, 3, 4, 5, 6ã€‚è¿™ç§æ’åç±»ä¼¼äºç¼–å·ï¼›</li>
<li>åŒæ•°åŒåæ¬¡ï¼Œæ€»æ’åä¸è¿ç»­ã€‚ä¾‹å¦‚300ã€200ã€200ã€150ã€150ã€100çš„æ’åç»“æœä¸º1, 2, 2, 4, 4, 6ï¼›</li>
<li>åŒæ•°åŒåæ¬¡ï¼Œæ€»æ’åè¿ç»­ã€‚ä¾‹å¦‚300ã€200ã€200ã€150ã€150ã€100çš„æ’åç»“æœä¸º1, 2, 2, 3, 3, 4ã€‚</li>
</ul>
<p>ä¸åŒçš„éœ€æ±‚å¯¹åº”ç€ä¸åŒçš„æŸ¥è¯¢ç­–ç•¥ã€‚æœ¬å…³çš„ä»»åŠ¡æ˜¯å®ç°åä¸¤ç§æ–¹å¼çš„æ’åã€‚</p>
<p><strong>ç¼–ç¨‹è¦æ±‚ï¼š</strong><br>
è¯·åˆ†åˆ«ç”¨ä¸¤æ¡SQLè¯­å¥å®ç°ä¸‹è¿°ä¸¤ä¸ªä»»åŠ¡ï¼š æŸ¥è¯¢èµ„äº§è¡¨ä¸­å®¢æˆ·ç¼–å·ï¼Œå®¢æˆ·åŸºé‡‘æŠ•èµ„æ€»æ”¶ç›Š,åŸºé‡‘æŠ•èµ„æ€»æ”¶ç›Šçš„æ’å(ä»é«˜åˆ°ä½æ’å)ã€‚æ€»æ”¶ç›Šç›¸åŒæ—¶åæ¬¡äº¦ç›¸åŒ(å³å¹¶åˆ—åæ¬¡)ã€‚æ€»æ”¶ç›Šå‘½åä¸ºtotal_revenue, åæ¬¡å‘½åä¸ºrankã€‚ç¬¬ä¸€æ¡SQLè¯­å¥å®ç°å…¨å±€åæ¬¡ä¸è¿ç»­çš„æ’åï¼Œç¬¬äºŒæ¡SQLè¯­å¥å®ç°å…¨å±€åæ¬¡è¿ç»­çš„æ’åã€‚ä¸ç®¡å“ªç§æ–¹å¼æ’åï¼Œæ”¶ç›Šç›¸åŒæ—¶,å®¢æˆ·ç¼–å·å°çš„æ’åœ¨å‰</p>
<pre><code class="language-mysql">-- 15) æŸ¥è¯¢èµ„äº§è¡¨ä¸­å®¢æˆ·ç¼–å·ï¼Œå®¢æˆ·åŸºé‡‘æŠ•èµ„æ€»æ”¶ç›Š,åŸºé‡‘æŠ•èµ„æ€»æ”¶ç›Šçš„æ’å(ä»é«˜åˆ°ä½æ’å)ã€‚
--     æ€»æ”¶ç›Šç›¸åŒæ—¶åæ¬¡äº¦ç›¸åŒ(å³å¹¶åˆ—åæ¬¡)ã€‚æ€»æ”¶ç›Šå‘½åä¸ºtotal_revenue, åæ¬¡å‘½åä¸ºrankã€‚
--     ç¬¬ä¸€æ¡SQLè¯­å¥å®ç°å…¨å±€åæ¬¡ä¸è¿ç»­çš„æ’åï¼Œ
--     ç¬¬äºŒæ¡SQLè¯­å¥å®ç°å…¨å±€åæ¬¡è¿ç»­çš„æ’åã€‚

-- (1) åŸºé‡‘æ€»æ”¶ç›Šæ’å(åæ¬¡ä¸è¿ç»­)
SELECT pro_c_id,total_revenue,rank0 AS 'rank'
FROM(
    SELECT pro_c_id,total_revenue,if(total_revenue=@income,@curRank,@curRank:=@num) AS rank0,@income:=total_revenue,@num:=@num+1
    FROM (
        SELECT pro_c_id,SUM(pro_income) total_revenue
        FROM property
        WHERE pro_type=3
        GROUP BY pro_c_id
        ORDER BY total_revenue DESC,pro_c_id
    ) AS Income,(SELECT @curRank:=0,@income:=NULL,@num:=1) r
) AS r1;
-- (2) åŸºé‡‘æ€»æ”¶ç›Šæ’å(åæ¬¡è¿ç»­)
SELECT pro_c_id,total_revenue,rank0 AS 'rank'
FROM(
    SELECT pro_c_id,total_revenue,if(total_revenue=@income,@curRank,@curRank:=@curRank+1) AS rank0,@income:=total_revenue
    FROM (
        SELECT pro_c_id,SUM(pro_income) total_revenue
        FROM property
        WHERE pro_type=3
        GROUP BY pro_c_id
        ORDER BY total_revenue DESC,pro_c_id
    ) AS Income,(SELECT @curRank:=0,@income:=NULL) r
) AS r1;
/*  end  of  your code  */
</code></pre>
<h3 id="316-æŒæœ‰å®Œå…¨ç›¸åŒåŸºé‡‘ç»„åˆçš„å®¢æˆ·">3.16 æŒæœ‰å®Œå…¨ç›¸åŒåŸºé‡‘ç»„åˆçš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢æŒæœ‰ç›¸åŒåŸºé‡‘ç»„åˆçš„å®¢æˆ·å¯¹ï¼Œå¦‚ç¼–å·ä¸ºAçš„å®¢æˆ·æŒæœ‰çš„åŸºé‡‘ï¼Œç¼–å·ä¸ºBçš„å®¢æˆ·ä¹ŸæŒæœ‰ï¼Œåè¿‡æ¥ï¼Œç¼–å·ä¸ºBçš„å®¢æˆ·æŒæœ‰çš„åŸºé‡‘ï¼Œç¼–å·ä¸ºAçš„å®¢æˆ·ä¹ŸæŒæœ‰ï¼Œåˆ™(A,B)å³ä¸ºæŒæœ‰ç›¸åŒåŸºé‡‘ç»„åˆçš„äºŒå…ƒç»„ï¼Œè¯·åˆ—å‡ºè¿™æ ·çš„å®¢æˆ·å¯¹ã€‚ä¸ºé¿å…è¿‡å¤šçš„é‡å¤ï¼Œå¦‚æœ(1,2)ä¸ºæ»¡è¶³æ¡ä»¶çš„å…ƒç»„ï¼Œåˆ™ä¸å¿…æ˜¾ç¤º(2,1)ï¼Œå³åªæ˜¾ç¤º ç¼–å·å°è€…åœ¨å‰çš„é‚£ä¸€å¯¹ï¼Œè¿™ä¸€ç»„å®¢æˆ·ç¼–å·åˆ†åˆ«å‘½åä¸ºc_id1,c_id2</p>
<pre><code class="language-mysql">-- 16) æŸ¥è¯¢æŒæœ‰ç›¸åŒåŸºé‡‘ç»„åˆçš„å®¢æˆ·å¯¹ï¼Œå¦‚ç¼–å·ä¸ºAçš„å®¢æˆ·æŒæœ‰çš„åŸºé‡‘ï¼Œç¼–å·ä¸ºBçš„å®¢æˆ·ä¹ŸæŒæœ‰ï¼Œåè¿‡æ¥ï¼Œç¼–å·ä¸ºBçš„å®¢æˆ·æŒæœ‰çš„åŸºé‡‘ï¼Œç¼–å·ä¸ºAçš„å®¢æˆ·ä¹ŸæŒæœ‰ï¼Œåˆ™(A,B)å³ä¸ºæŒæœ‰ç›¸åŒåŸºé‡‘ç»„åˆçš„äºŒå…ƒç»„ï¼Œè¯·åˆ—å‡ºè¿™æ ·çš„å®¢æˆ·å¯¹ã€‚ä¸ºé¿å…è¿‡å¤šçš„é‡å¤ï¼Œå¦‚æœ(1,2)ä¸ºæ»¡è¶³æ¡ä»¶çš„å…ƒç»„ï¼Œåˆ™ä¸å¿…æ˜¾ç¤º(2,1)ï¼Œå³åªæ˜¾ç¤ºç¼–å·å°è€…åœ¨å‰çš„é‚£ä¸€å¯¹ï¼Œè¿™ä¸€ç»„å®¢æˆ·ç¼–å·åˆ†åˆ«å‘½åä¸ºc_id1,c_id2ã€‚

-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_id1,c_id2
FROM (
    SELECT pro_c_id,GROUP_CONCAT(
        pro_pif_id
        ORDER BY pro_pif_id
        SEPARATOR ' ') as pifset
    FROM property
    WHERE pro_type=3
    GROUP BY pro_c_id
) AS c1(c_id1,pifset1),
(
    SELECT pro_c_id,GROUP_CONCAT(
        pro_pif_id
        ORDER BY pro_pif_id
        SEPARATOR ' ') as pifset
    FROM property
    WHERE pro_type=3
    GROUP BY pro_c_id
)AS c2(c_id2,pifset2)
WHERE pifset1=pifset2 AND c_id1&lt;c_id2;
/*  end  of  your code  */
</code></pre>
<h3 id="317-è´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸ">3.17 è´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸ</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°æŸ¥è¯¢ä»»åŠ¡ï¼š æŸ¥è¯¢2022å¹´2æœˆè´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸã€‚è‡³å°‘è¿ç»­ä¸‰ä¸ªäº¤æ˜“æ—¥ï¼Œæ‰€æœ‰æŠ•èµ„è€…è´­ä¹°åŸºé‡‘çš„æ€»é‡‘é¢è¶…è¿‡100ä¸‡(å«)ï¼Œåˆ™ç§°è¿™æ®µè¿ç»­äº¤æ˜“æ—¥ä¸ºæŠ•èµ„è€…è´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸã€‚åªæœ‰äº¤æ˜“æ—¥æ‰èƒ½è´­ä¹°åŸºé‡‘,ä½†ä¸èƒ½ä¿è¯æ¯ä¸ªäº¤æ˜“æ—¥éƒ½æœ‰æŠ•èµ„è€…è´­ä¹°åŸºé‡‘ã€‚2022å¹´æ˜¥èŠ‚å‡æœŸä¹‹åçš„ç¬¬1ä¸ªäº¤æ˜“æ—¥ä¸º2æœˆ7æ—¥,å‘¨å…­å’Œå‘¨æ—¥æ˜¯éäº¤æ˜“æ—¥ï¼Œå…¶ä½™å‡ä¸ºäº¤æ˜“æ—¥ã€‚è¯·åˆ—å‡ºé«˜å³°æ—¶æ®µçš„æ—¥æœŸå’Œå½“æ—¥åŸºé‡‘çš„æ€»è´­ä¹°é‡‘é¢ï¼ŒæŒ‰æ—¥æœŸé¡ºåºæ’åºã€‚æ€»è´­ä¹°é‡‘é¢å‘½åä¸ºtotal_amountã€‚</p>
<p>ï¼ˆ<s>ç ´é˜²ï¼åˆ‡èº«æ„Ÿå—åˆ°äº†è¯¾ä¸Šè®²çš„å’Œå®é™…è¦ä½ åšçš„ä¹‹é—´çš„å¤©å£¤ä¹‹åˆ«</s>ï¼‰</p>
<pre><code class="language-mysql">-- 17 æŸ¥è¯¢2022å¹´2æœˆè´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸã€‚è‡³å°‘è¿ç»­ä¸‰ä¸ªäº¤æ˜“æ—¥ï¼Œæ‰€æœ‰æŠ•èµ„è€…è´­ä¹°åŸºé‡‘çš„æ€»é‡‘é¢è¶…è¿‡100ä¸‡(å«)ï¼Œåˆ™ç§°è¿™æ®µè¿ç»­äº¤æ˜“æ—¥ä¸ºæŠ•èµ„è€…è´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸã€‚åªæœ‰äº¤æ˜“æ—¥æ‰èƒ½è´­ä¹°åŸºé‡‘,ä½†ä¸èƒ½ä¿è¯æ¯ä¸ªäº¤æ˜“æ—¥éƒ½æœ‰æŠ•èµ„è€…è´­ä¹°åŸºé‡‘ã€‚2022å¹´æ˜¥èŠ‚å‡æœŸä¹‹åçš„ç¬¬1ä¸ªäº¤æ˜“æ—¥ä¸º2æœˆ7æ—¥,å‘¨å…­å’Œå‘¨æ—¥æ˜¯éäº¤æ˜“æ—¥ï¼Œå…¶ä½™å‡ä¸ºäº¤æ˜“æ—¥ã€‚è¯·åˆ—å‡ºé«˜å³°æ—¶æ®µçš„æ—¥æœŸå’Œå½“æ—¥åŸºé‡‘çš„æ€»è´­ä¹°é‡‘é¢ï¼ŒæŒ‰æ—¥æœŸé¡ºåºæ’åºã€‚æ€»è´­ä¹°é‡‘é¢å‘½åä¸ºtotal_amountã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
/*äº¤æ˜“æ—¥:2.7-2.11,2.14-2.18,2.21-2.25,2.28å…±16å¤©*/
/*éå†å…¨éƒ¨3ä¸ªè¿ç»­äº¤æ˜“æ—¥,éœ€è¦éå†14æ¬¡*/
SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 0
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank0:=@curRank0+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 0
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank0:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 1
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank1:=@curRank1+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 1
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank1:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 2
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank2:=@curRank2+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 2
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank2:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 3
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank3:=@curRank3+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 3
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank3:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 4
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank4:=@curRank4+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 4
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank4:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 5
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank5:=@curRank5+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 5
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank5:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 6
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank6:=@curRank6+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 6
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank6:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 7
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank7:=@curRank7+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 7
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank7:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 8
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank8:=@curRank8+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 8
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank8:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 9
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank9:=@curRank9+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 9
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank9:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 10
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank10:=@curRank10+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 10
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank10:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 11
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank11:=@curRank11+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 11
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank11:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 12
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank12:=@curRank12+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 12
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank12:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))

UNION

SELECT pro_purchase_time,total_amount
FROM(
    SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
    FROM property,fund
    WHERE pro_type=3 AND pro_pif_id=f_id AND
    pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
    GROUP BY pro_purchase_time
    ORDER BY pro_purchase_time
    LIMIT 3 OFFSET 13
) AS amount0(pro_purchase_time,total_amount)
WHERE 3 IN (SELECT `rank` FROM(
    SELECT pro_purchase_time,total_amount,@curRank13:=@curRank13+1 AS `rank`
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
        LIMIT 3 OFFSET 13
    ) AS amount(pro_purchase_time,total_amount),(SELECT @curRank13:=0) AS r
    WHERE total_amount&gt;=1000000
) AS amount1(pro_purchase_time,total_amount,`rank`))
/*  end  of  your code  */
</code></pre>
<h3 id="318-è‡³å°‘æœ‰ä¸€å¼ ä¿¡ç”¨å¡ä½™é¢è¶…è¿‡5000å…ƒçš„å®¢æˆ·ä¿¡æ¯">3.18 è‡³å°‘æœ‰ä¸€å¼ ä¿¡ç”¨å¡ä½™é¢è¶…è¿‡5000å…ƒçš„å®¢æˆ·ä¿¡æ¯</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°ä»¥ä¸‹æŸ¥è¯¢è¦æ±‚ï¼š<br>
æŸ¥è¯¢è‡³å°‘æœ‰ä¸€å¼ ä¿¡ç”¨å¡ä½™é¢è¶…è¿‡5000å…ƒçš„å®¢æˆ·ç¼–å·ï¼Œä»¥åŠè¯¥å®¢æˆ·æŒæœ‰çš„ä¿¡ç”¨å¡æ€»ä½™é¢ï¼Œæ€»ä½™é¢å‘½åä¸ºcredit_card_amountã€‚æŸ¥è¯¢ç»“æœä¾å®¢æˆ·ç¼–å·æ’åºã€‚</p>
<p>ï¼ˆ<s>ç¬¬17å…³å¿«æŠŠäººæ•´æ­»ï¼Œç¬¬18å…³å°±è¿™ï¼Ÿ</s>ï¼‰</p>
<pre><code class="language-mysql"> -- 18) æŸ¥è¯¢è‡³å°‘æœ‰ä¸€å¼ ä¿¡ç”¨å¡ä½™é¢è¶…è¿‡5000å…ƒçš„å®¢æˆ·ç¼–å·ï¼Œä»¥åŠè¯¥å®¢æˆ·æŒæœ‰çš„ä¿¡ç”¨å¡æ€»ä½™é¢ï¼Œæ€»ä½™é¢å‘½åä¸ºcredit_card_amountã€‚
--    è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT A.b_c_id,SUM(b_balance) credit_card_amount
FROM bank_card A
WHERE b_type='ä¿¡ç”¨å¡' AND EXISTS(
    SELECT *
    FROM bank_card B
    WHERE A.b_c_id=B.b_c_id AND b_type='ä¿¡ç”¨å¡' AND b_balance&gt;5000
)
GROUP BY A.b_c_id
ORDER BY A.b_c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="319-ä»¥æ—¥å†è¡¨æ ¼å¼æ˜¾ç¤ºæ¯æ—¥åŸºé‡‘è´­ä¹°æ€»é‡‘é¢">3.19 ä»¥æ—¥å†è¡¨æ ¼å¼æ˜¾ç¤ºæ¯æ—¥åŸºé‡‘è´­ä¹°æ€»é‡‘é¢</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š ä»¥æ—¥å†è¡¨æ ¼å¼åˆ—å‡º2022å¹´2æœˆæ¯å‘¨æ¯ä¸ªäº¤æ˜“æ—¥åŸºé‡‘è´­ä¹°æ€»é‡‘é¢ï¼Œè¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">week_of_trading</th>
<th style="text-align:center">Monday</th>
<th style="text-align:center">Tuesday</th>
<th style="text-align:center">Wednesday</th>
<th style="text-align:center">Thursday</th>
<th style="text-align:center">Friday</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>åˆ—è¡¨ä¸­ç¬¬1åˆ—ä¸ºå‘¨æ¬¡ï¼Œ2022å¹´2æœˆ7æ—¥(æ˜ŸæœŸä¸€)ä¸ºå½“æœˆçš„ç¬¬1ä¸ªäº¤æ˜“æ—¥ï¼Œè¿™ä¸€å‘¨è®°ä¸ºç¬¬1å‘¨æ¬¡ã€‚æ³¨æ„æ˜¾ç¤ºç»“æœå¹¶ä¸éœ€è¦ç”»è¡¨æ ¼çº¿ï¼Œåªéœ€æŒ‰è¿™ä¸ªæ ¼å¼è¾“å‡ºç»“æœå³å¯äº†ã€‚</p>
<pre><code class="language-mysql">-- 19) ä»¥æ—¥å†è¡¨æ ¼å¼åˆ—å‡º2022å¹´2æœˆæ¯å‘¨æ¯æ—¥åŸºé‡‘è´­ä¹°æ€»é‡‘é¢ï¼Œè¾“å‡ºæ ¼å¼å¦‚ä¸‹ï¼š
-- week_of_trading Monday Tuesday Wednesday Thursday Friday
--               1
--               2    
--               3
--               4
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT week_of_trading,
    SUM(if(wd=2,total_amount,NULL)) Monday,
    SUM(if(wd=3,total_amount,NULL)) Tuesday,
    SUM(if(wd=4,total_amount,NULL)) Wednesday,
    SUM(if(wd=5,total_amount,NULL)) Thursday,
    SUM(if(wd=6,total_amount,NULL)) Friday
FROM(
        SELECT week(pro_purchase_time)-5 week_of_trading,dayofweek(pro_purchase_time) wd,total_amount
    FROM(
        SELECT pro_purchase_time,SUM(pro_quantity*f_amount) total_amount
        FROM property,fund
        WHERE pro_type=3 AND pro_pif_id=f_id AND
        pro_purchase_time&gt;='2022-02-07' AND pro_purchase_time&lt;='2022-02-28'
        GROUP BY pro_purchase_time
        ORDER BY pro_purchase_time
    ) R1(pro_purchase_time,total_amount)
) R2(week_of_trading,wd,total_amount)
GROUP BY week_of_trading;
/*  end  of  your code  */
</code></pre>
<h2 id="å››-å®è®­4-æ•°æ®æŸ¥è¯¢selectä¹‹äºŒ">å››ã€å®è®­4 æ•°æ®æŸ¥è¯¢(Select)ä¹‹äºŒ</h2>
<h3 id="41-æŸ¥è¯¢é”€å”®æ€»é¢å‰ä¸‰çš„ç†è´¢äº§å“">4.1 æŸ¥è¯¢é”€å”®æ€»é¢å‰ä¸‰çš„ç†è´¢äº§å“</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
æŸ¥è¯¢2010å¹´å’Œ2011å¹´è¿™ä¸¤å¹´æ¯å¹´é”€å”®æ€»é¢å‰3åï¼ˆå¦‚æœæœ‰å¹¶åˆ—æ’åï¼Œåˆ™åç»­æ’åå·è·³è¿‡ä¹‹å‰çš„å¹¶åˆ—æ’åä¸ªæ•°ï¼Œä¾‹å¦‚1ã€1ã€3ï¼‰çš„ç»Ÿè®¡å¹´ä»½ï¼ˆpyearï¼‰ã€é”€å”®æ€»é¢æ’åå€¼(rk)ã€ç†è´¢äº§å“ç¼–å·(p_id)ã€é”€å”®æ€»é¢(sumamount)ã€‚<br>
æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼š(1)æŒ‰ç…§å¹´ä»½å‡åºæ’åˆ—ï¼ŒåŒä¸€å¹´ä»½æŒ‰ç…§é”€å”®æ€»é¢çš„æ’åå€¼å‡åºæ’åˆ—ï¼Œå¦‚é‡åˆ°å¹¶åˆ—æ’ååˆ™æŒ‰ç…§ç†è´¢äº§å“ç¼–å·å‡åºæ’åˆ—;(2)å±æ€§æ˜¾ç¤ºï¼šç»Ÿè®¡å¹´ä»½ï¼ˆpyearï¼‰ã€é”€å”®æ€»é¢æ’åå€¼(rk)ã€ç†è´¢äº§å“ç¼–å·(p_id)ã€é”€å”®æ€»é¢(sumamount)ï¼ˆ3ï¼‰ç»“æœæ˜¾ç¤ºé¡ºåºï¼šå…ˆæŒ‰ç…§ç»Ÿè®¡å¹´ä»½ï¼ˆpyearï¼‰å‡åºæ’,åŒä¸€å¹´ä»½æŒ‰ç…§é”€å”®æ€»é¢æ’åå€¼ï¼ˆrkï¼‰å‡åºæ’,åŒä¸€æ’åå€¼çš„æŒ‰ç…§ç†è´¢äº§å“ç¼–å·ï¼ˆp_id ï¼‰å‡åºæ’ã€‚</p>
<pre><code class="language-mysql"> -- 1) æŸ¥è¯¢é”€å”®æ€»é¢å‰ä¸‰çš„ç†è´¢äº§å“
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT pyear,rk,p_id,sumamount
FROM(
    SELECT pyear,rank()over(partition by pyear order by sumamount DESC) AS rk,p_id,sumamount
    FROM(
        SELECT p_id,SUM(pro_quantity*p_amount) sumamount,2010 pyear
        FROM property,finances_product
        WHERE pro_pif_id=p_id AND pro_type=1 AND year(pro_purchase_time)=2010
        GROUP BY p_id
        UNION
        SELECT p_id,SUM(pro_quantity*p_amount) sumamount,2011 pyear
        FROM property,finances_product
        WHERE pro_pif_id=p_id AND pro_type=1 AND year(pro_purchase_time)=2011
        GROUP BY p_id
    ) AS R1
) AS R2
WHERE rk&lt;=3;
/*  end  of  your code  */
</code></pre>
<h3 id="42-æŠ•èµ„ç§¯æä¸”åå¥½ç†è´¢ç±»äº§å“çš„å®¢æˆ·">4.2 æŠ•èµ„ç§¯æä¸”åå¥½ç†è´¢ç±»äº§å“çš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
è´­ä¹°äº†3ç§ï¼ˆåŒä¸€ç¼–å·çš„ç†è´¢äº§å“è®°ä¸ºä¸€ç§ï¼‰ä»¥ä¸Šç†è´¢äº§å“çš„å®¢æˆ·è¢«è®¤ä¸ºæŠ•èµ„ç§¯æçš„å®¢æˆ·ï¼Œè‹¥è¯¥å®¢æˆ·æŒæœ‰åŸºé‡‘äº§å“ç§ç±»æ•°ï¼ˆåŒä¸€åŸºé‡‘ç¼–å·è®°ä¸ºç›¸åŒçš„åŸºé‡‘äº§å“ç§ç±»ï¼‰å°äºå…¶æŒæœ‰çš„ç†è´¢äº§å“ç§ç±»æ•°ï¼Œåˆ™è®¤ä¸ºè¯¥å®¢æˆ·ä¸ºæŠ•èµ„ç§¯æä¸”åå¥½ç†è´¢äº§å“çš„å®¢æˆ·ã€‚æŸ¥è¯¢æ‰€æœ‰æ­¤ç±»å®¢æˆ·çš„ç¼–å·(pro_c_id)ã€‚ æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼šæŒ‰ç…§å®¢æˆ·ç¼–å·çš„å‡åºæ’åˆ—ï¼Œä¸”å»é™¤é‡å¤ç»“æœ</p>
<pre><code class="language-mysql">  -- 2) æŠ•èµ„ç§¯æä¸”åå¥½ç†è´¢ç±»äº§å“çš„å®¢æˆ·
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT P.pro_c_id
FROM(
  SELECT pro_c_id,COUNT(pro_pif_id) pnum
  FROM property
  WHERE pro_type=1
  GROUP BY pro_c_id
) P,(
  SELECT pro_c_id,COUNT(pro_pif_id) fnum
  FROM property
  WHERE pro_type=3
  GROUP BY pro_c_id
) F
WHERE P.pro_c_id=F.pro_c_id AND pnum&gt;=3 AND pnum&gt;fnum;
/*  end  of  your code  */
</code></pre>
<h3 id="43-æŸ¥è¯¢è´­ä¹°äº†æ‰€æœ‰ç•…é”€ç†è´¢äº§å“çš„å®¢æˆ·">4.3 æŸ¥è¯¢è´­ä¹°äº†æ‰€æœ‰ç•…é”€ç†è´¢äº§å“çš„å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
è‹¥å®šä¹‰æŒæœ‰äººæ•°è¶…è¿‡2çš„ç†è´¢äº§å“ç§°ä¸ºç•…é”€ç†è´¢äº§å“ã€‚æŸ¥è¯¢è´­ä¹°äº†æ‰€æœ‰ç•…é”€ç†è´¢äº§å“çš„å®¢æˆ·ç¼–å·(pro_c_id)ã€‚ æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼šæŒ‰ç…§å®¢æˆ·ç¼–å·çš„å‡åºæ’åˆ—ï¼Œä¸”å»é™¤é‡å¤ç»“æœã€‚</p>
<p>ï¼ˆ<s>å®è®­3åšå‡ºé˜´å½±äº†ï¼Œæ„Ÿè§‰å®è®­4éƒ½è¿˜ç®—ç®€å•</s>ï¼‰</p>
<pre><code class="language-mysql">   -- 3) æŸ¥è¯¢è´­ä¹°äº†æ‰€æœ‰ç•…é”€ç†è´¢äº§å“çš„å®¢æˆ·
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT pro_c_id
FROM property A
WHERE NOT EXISTS(
   SELECT *
   FROM property B
   WHERE A.pro_c_id=B.pro_c_id AND B.pro_type=1 AND A.pro_pif_id NOT IN(
      SELECT pro_pif_id
      FROM property
      WHERE pro_type=1
      GROUP BY pro_pif_id
      HAVING COUNT(pro_c_id)&gt;2
   )
) AND pro_type=1
GROUP BY pro_c_id
HAVING COUNT(pro_pif_id)=(SELECT COUNT(*) FROM(
   SELECT pro_pif_id
   FROM property
   WHERE pro_type=1
   GROUP BY pro_pif_id
   HAVING COUNT(pro_c_id)&gt;2
) AS R1)
ORDER BY pro_c_id;
/*  end  of  your code  */
</code></pre>
<h3 id="44-æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢äº§å“">4.4 æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢äº§å“</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š  åœ¨æŸäº›æ¨èæ–¹æ³•ä¸­ï¼Œéœ€è¦æŸ¥æ‰¾æŸæ¬¾ç†è´¢äº§å“ç›¸ä¼¼çš„å…¶ä»–ç†è´¢äº§å“ï¼Œä¸å¦¨è®¾å…¶å®šä¹‰ä¸ºï¼šå¯¹äºæŸæ¬¾ç†è´¢äº§å“Aï¼Œå¯æ‰¾åˆ°æŒæœ‰Aæ•°é‡æœ€å¤šçš„â€œ3â€ä¸ªï¼ˆåŒ…æ‹¬æ‰€æœ‰æŒæœ‰ç›¸åŒæ•°é‡çš„å®¢æˆ·ï¼Œå› æ­¤å¦‚æœ‰3ä¸ªå¹¶åˆ—ç¬¬ä¸€ã€1ä¸ªç¬¬äºŒã€ä¸€ä¸ªç¬¬ä¸‰ï¼Œåˆ™æ’åˆ—ç»“æœæ˜¯1,1,1,2,3ï¼‰å®¢æˆ·ï¼Œç„¶åå¯¹äºè¿™â€œ3â€ä¸ªå®¢æˆ·æŒæœ‰çš„æ‰€æœ‰ç†è´¢äº§å“ï¼ˆä¸åŒ…å«äº§å“Aè‡ªèº«ï¼‰ï¼Œæ¯æ¬¾äº§å“è¢«å…¨ä½“å®¢æˆ·æŒæœ‰æ€»äººæ•°è¢«è®¤ä¸ºæ˜¯å’Œäº§å“Açš„ç›¸ä¼¼åº¦ï¼Œè‹¥æœ‰ç›¸ä¼¼åº¦ç›¸åŒçš„ç†è´¢äº§å“ï¼Œåˆ™ä¸ºäº†ä¾¿äºåç»­å¤„ç†çš„ç¡®å®šæ€§ï¼Œåˆ™è¿™äº›ç›¸ä¼¼åº¦ç›¸åŒçš„ç†è´¢äº§å“é—´æŒ‰ç…§äº§å“ç¼–å·çš„å‡åºæ’åˆ—ã€‚æŒ‰ç…§å’Œäº§å“Açš„ç›¸ä¼¼åº¦ï¼Œæœ€å¤šçš„â€œ3â€æ¬¾ï¼ˆåŒä¸Šç†ï¼Œå‰3åå…è®¸å¹¶åˆ—çš„æƒ…å†µï¼Œä¾‹å¦‚æ’åˆ—ç»“æœæ˜¯1,2,2,2,3ï¼‰ç†è´¢äº§å“ï¼Œå°±æ˜¯äº§å“Açš„ç›¸ä¼¼çš„ç†è´¢äº§å“ã€‚ è¯·æŸ¥æ‰¾äº§å“14çš„ç›¸ä¼¼ç†è´¢äº§å“ç¼–å·ï¼ˆä¸åŒ…å«14è‡ªèº«ï¼‰ï¼ˆpro_pif_idï¼‰ã€è¯¥ç¼–å·çš„ç†è´¢äº§å“çš„å®¢è´­ä¹°å®¢æˆ·æ€»äººæ•°ï¼ˆccï¼‰ä»¥åŠè¯¥ç†è´¢äº§å“å¯¹äº14 å·ç†è´¢äº§å“çš„ç›¸ä¼¼åº¦æ’åå€¼ï¼ˆprankï¼‰ã€‚ æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼šæŒ‰ç…§ç›¸ä¼¼åº¦å€¼é™åºæ’åˆ—ï¼Œç›¸åŒç›¸ä¼¼åº¦çš„ç†è´¢äº§å“ä¹‹é—´åˆ™æŒ‰ç…§äº§å“ç¼–å·çš„å‡åºæ’åˆ—ã€‚</p>
<pre><code class="language-mysql">    -- 4) 	æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢äº§å“

--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT R2.pro_pif_id,cc,dense_rank() over(ORDER BY cc DESC) AS prank
FROM(
    SELECT pro_pif_id
    FROM property A,(
        SELECT pro_c_id
        FROM(
            SELECT pro_c_id,dense_rank() over(ORDER BY pro_quantity DESC) AS rk
            FROM property
            WHERE pro_type=1 AND pro_pif_id=14
        ) AS R1(pro_c_id,rk)
        WHERE R1.rk&lt;=3
    ) R1
    WHERE R1.pro_c_id=A.pro_c_id AND A.pro_type=1 AND pro_pif_id&lt;&gt;14
    GROUP BY pro_pif_id
) AS R2,(
    SELECT pro_pif_id,COUNT(pro_c_id) cc
    FROM property
    WHERE pro_type=1
    GROUP BY pro_pif_id
) AS R3
WHERE R2.pro_pif_id=R3.pro_pif_id
ORDER BY cc DESC,pro_pif_id
/*  end  of  your code  */
</code></pre>
<h3 id="45-æŸ¥è¯¢ä»»æ„ä¸¤ä¸ªå®¢æˆ·çš„ç›¸åŒç†è´¢äº§å“æ•°">4.5 æŸ¥è¯¢ä»»æ„ä¸¤ä¸ªå®¢æˆ·çš„ç›¸åŒç†è´¢äº§å“æ•°</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
æŸ¥è¯¢ä»»æ„ä¸¤ä¸ªå®¢æˆ·ä¹‹é—´æŒæœ‰çš„ç›¸åŒç†è´¢äº§å“ç§æ•°ï¼Œå¹¶ä¸”ç»“æœä»…ä¿ç•™ç›¸åŒç†è´¢äº§å“æ•°è‡³å°‘2ç§çš„ç”¨æˆ·å¯¹ã€‚  æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼šç¬¬ä¸€åˆ—å’Œç¬¬äºŒåˆ—è¾“å‡ºå®¢æˆ·ç¼–å·(pro_c_id,pro_c_id)ï¼Œç¬¬ä¸‰åˆ—è¾“å‡ºä»–ä»¬æŒæœ‰çš„ç›¸åŒç†è´¢äº§å“æ•°(total_count)ï¼ŒæŒ‰ç…§ç¬¬ä¸€åˆ—çš„å®¢æˆ·ç¼–å·çš„å‡åºæ’åˆ—ã€‚</p>
<pre><code class="language-mysql">-- 5) æŸ¥è¯¢ä»»æ„ä¸¤ä¸ªå®¢æˆ·çš„ç›¸åŒç†è´¢äº§å“æ•°
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT R1.pro_c_id,R2.pro_c_id,COUNT(*) total_count
FROM(
    SELECT pro_c_id,pro_pif_id
    FROM property
    WHERE pro_type=1
) AS R1,(
    SELECT pro_c_id,pro_pif_id
    FROM property
    WHERE pro_type=1
)AS R2
WHERE R1.pro_pif_id=R2.pro_pif_id AND R1.pro_c_id&lt;&gt;R2.pro_c_id
GROUP BY R1.pro_c_id,R2.pro_c_id
HAVING total_count&gt;=2
ORDER BY R1.pro_c_id
/*  end  of  your code  */
</code></pre>
<h3 id="46-æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢å®¢æˆ·">4.6 æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢å®¢æˆ·</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®Œæˆä»¥ä¸‹æŸ¥è¯¢ä»»åŠ¡ï¼š<br>
åœ¨æŸäº›æ¨èæ–¹æ³•ä¸­ï¼Œéœ€è¦æŸ¥æ‰¾æŸä½å®¢æˆ·åœ¨ç†è´¢è¡Œä¸ºä¸Šç›¸ä¼¼çš„å…¶ä»–å®¢æˆ·ï¼Œä¸å¦¨è®¾å…¶å®šä¹‰ä¸ºï¼šå¯¹äºAå®¢æˆ·ï¼Œå…¶è´­ä¹°çš„ç†è´¢äº§å“é›†åˆä¸º{P}ï¼Œå¦æ‰€æœ‰ä¹°è¿‡{P}ä¸­è‡³å°‘ä¸€æ¬¾äº§å“çš„å…¶ä»–å®¢æˆ·é›†åˆä¸º{B}ï¼Œåˆ™{B}ä¸­æ¯ä½ç”¨æˆ·è´­ä¹°çš„{P}ä¸­äº§å“çš„æ•°é‡ä¸ºä»–ä¸Aå®¢æˆ·çš„ç›¸ä¼¼åº¦å€¼ã€‚å°†{B}ä¸­å®¢æˆ·æŒ‰ç…§ç›¸ä¼¼åº¦å€¼é™åºæ’åˆ—ï¼Œå¾—åˆ°Aå®¢æˆ·çš„ç›¸åŒç›¸ä¼¼åº¦å€¼åˆ™æŒ‰ç…§å®¢æˆ·ç¼–å·å‡åºæ’åˆ—ï¼Œè¿™æ ·å–å‰ä¸¤ä½å®¢æˆ·å³ä¸ºAå®¢æˆ·çš„ç›¸ä¼¼ç†è´¢å®¢æˆ·åˆ—è¡¨ã€‚  æŸ¥è¯¢æ¯ä½å®¢æˆ·(åˆ—åï¼špac)çš„ç›¸ä¼¼åº¦æ’åå€¼å°äº3çš„ç›¸ä¼¼å®¢æˆ·(åˆ—åï¼špbc)åˆ—è¡¨ï¼Œä»¥åŠè¯¥æ¯ä½å®¢æˆ·å’Œä»–çš„æ¯ä½ç›¸ä¼¼å®¢æˆ·çš„å…±åŒæŒæœ‰çš„ç†è´¢äº§å“æ•°(åˆ—åï¼šcommon)ã€ç›¸ä¼¼åº¦æ’åå€¼(åˆ—åï¼šcrank)ã€‚  æ³¨æ„ç»“æœè¾“å‡ºè¦æ±‚ï¼šè¦æ±‚ç»“æœå…ˆæŒ‰ç…§å·¦è¾¹å®¢æˆ·ç¼–å·(pac)å‡åºæ’åˆ—ï¼ŒåŒä¸€ä¸ªå®¢æˆ·çš„ç›¸ä¼¼å®¢æˆ·åˆ™æŒ‰ç…§å®¢æˆ·ç›¸ä¼¼åº¦æ’åå€¼ï¼ˆcrankï¼‰é¡ºåºæ’åˆ—ã€‚</p>
<pre><code class="language-mysql"> -- 6) æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢å®¢æˆ·
--   è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT pac,pbc,common,crank
FROM(
    SELECT pac,pbc,common,rank() over(partition by pac order by common desc,pbc) as crank
    FROM(
        SELECT R1.pro_c_id pac,R2.pro_c_id pbc,COUNT(*) common
        FROM(
            SELECT pro_c_id,pro_pif_id
            FROM property
            WHERE pro_type=1
        ) AS R1,(
            SELECT pro_c_id,pro_pif_id
            FROM property
            WHERE pro_type=1
        )AS R2
        WHERE R1.pro_pif_id=R2.pro_pif_id AND R1.pro_c_id&lt;&gt;R2.pro_c_id
        GROUP BY R1.pro_c_id,R2.pro_c_id
        ORDER BY R1.pro_c_id
    ) AS R1(pac,pbc,common)
) AS R2(pac,pbc,common,crank)
WHERE R2.crank&lt;3
/*  end  of  your code  */
</code></pre>
<h2 id="äº”-å®è®­5-æ•°æ®çš„æ’å…¥-ä¿®æ”¹ä¸åˆ é™¤insertupdatedelete">äº”ã€å®è®­5 æ•°æ®çš„æ’å…¥ã€ä¿®æ”¹ä¸åˆ é™¤(Insert,Update,Delete)</h2>
<h3 id="51-æ’å…¥å¤šæ¡å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯">5.1 æ’å…¥å¤šæ¡å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯</h3>
<p>é‡æ¸©ä¸Šä¸€å®è®­é¡¹ç›®ä¸­é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“ä¸­çš„å®¢æˆ·è¡¨ç»“æ„ï¼š</p>
<p>è¡¨1 client(å®¢æˆ·è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>c_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>å®¢æˆ·ç¼–å·</td>
</tr>
<tr>
<td>c_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·åç§°</td>
</tr>
<tr>
<td>c_mail</td>
<td>CHAR(30)</td>
<td>UNIQUE</td>
<td>å®¢æˆ·é‚®ç®±</td>
</tr>
<tr>
<td>c_id_card</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·èº«ä»½è¯</td>
</tr>
<tr>
<td>c_phone</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·æ‰‹æœºå·</td>
</tr>
<tr>
<td>c_password</td>
<td>CHAR(20)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·ç™»å½•å¯†ç </td>
</tr>
</tbody>
</table>
<p>å‘å®¢æˆ·è¡¨æ’å…¥ä»¥ä¸‹3æ¡æ•°æ®:</p>
<table>
<thead>
<tr>
<th>c_id</th>
<th>c_name</th>
<th>c_mail</th>
<th>c_id_card</th>
<th>c_phone</th>
<th>c_password</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>æ—æƒ é›¯</td>
<td><a href="mailto:960323053@qq.com">960323053@qq.com</a></td>
<td>411014196712130323</td>
<td>15609032348</td>
<td>Mop5UPkl</td>
</tr>
<tr>
<td>2</td>
<td>å´å©‰ç‘œ</td>
<td><a href="mailto:1613230826@gmail.com">1613230826@gmail.com</a></td>
<td>420152196802131323</td>
<td>17605132307</td>
<td>QUTPhxgVNlXtMxN</td>
</tr>
<tr>
<td>3</td>
<td>è”¡è´ä»ª</td>
<td><a href="mailto:252323341@foxmail.com">252323341@foxmail.com</a></td>
<td>160347199005222323</td>
<td>17763232321</td>
<td>Bwe3gyhEErJ7</td>
</tr>
</tbody>
</table>
<p>ç”¨ä¸€æ¡insertè¯­å¥ï¼Œæˆ–ç”¨ä¸‰æ¡insertè¯­å¥å®Œæˆï¼Œéƒ½å¯ä»¥ã€‚</p>
<pre><code class="language-mysql">use finance1;
-- ç”¨insertè¯­å¥å‘å®¢æˆ·è¡¨(client)æ’å…¥ä»»åŠ¡è¦æ±‚çš„3æ¡æ•°æ®:
INSERT
INTO client(c_id,c_name,c_mail,c_id_card,c_phone,c_password)
VALUES(1,'æ—æƒ é›¯','960323053@qq.com','411014196712130323','15609032348','Mop5UPkl');

INSERT
INTO client(c_id,c_name,c_mail,c_id_card,c_phone,c_password)
VALUES(2,'å´å©‰ç‘œ','1613230826@gmail.com','420152196802131323','17605132307','QUTPhxgVNlXtMxN');

INSERT
INTO client(c_id,c_name,c_mail,c_id_card,c_phone,c_password)
VALUES(3,'è”¡è´ä»ª','252323341@foxmail.com','160347199005222323','17763232321','Bwe3gyhEErJ7');
/* end of you code */
</code></pre>
<h3 id="52-æ’å…¥ä¸å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯">5.2 æ’å…¥ä¸å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯</h3>
<p>å·²çŸ¥33å·å®¢æˆ·éƒ¨åˆ†ä¿¡æ¯å¦‚ä¸‹:<br>
c_id(ç¼–å·):33<br>
c_name(åç§°):è”¡ä¾å©·<br>
c_phone(ç”µè¯):18820762130<br>
c_id_card(èº«ä»½è¯å·):350972199204227621<br>
c_password(å¯†ç ):MKwEuc1sc6<br>
è¯·ç”¨ä¸€æ¡SQLè¯­å¥å°†è¿™åå®¢æˆ·çš„ä¿¡æ¯æ’å…¥åˆ°å®¢æˆ·è¡¨(client)</p>
<pre><code class="language-mysql">use finance1;
-- å·²çŸ¥33å·å®¢æˆ·éƒ¨åˆ†ä¿¡æ¯å¦‚ä¸‹:
-- c_id(ç¼–å·):33
-- c_name(åç§°):è”¡ä¾å©·
-- c_phone(ç”µè¯):18820762130
-- c_id_card(èº«ä»½è¯å·):350972199204227621
-- c_password(å¯†ç ):MKwEuc1sc6

-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥å°†è¿™åå®¢æˆ·çš„ä¿¡æ¯æ’å…¥åˆ°å®¢æˆ·è¡¨(client):
INSERT
INTO client(c_id,c_name,c_phone,c_id_card,c_password)
VALUES(33,'è”¡ä¾å©·','18820762130','350972199204227621','MKwEuc1sc6');
/* the end of your code */ 
</code></pre>
<h3 id="53-æ‰¹é‡æ’å…¥æ•°æ®">5.3 æ‰¹é‡æ’å…¥æ•°æ®</h3>
<p>å·²çŸ¥è¡¨new_clientä¿å­˜äº†ä¸€æ‰¹æ–°å®¢æˆ·ä¿¡æ¯ï¼Œè¯¥è¡¨ä¸clientè¡¨ç»“æ„å®Œå…¨ç›¸åŒã€‚<br>
è¯·ç”¨ä¸€æ¡SQLè¯­å¥å°†new_clientè¡¨çš„å…¨éƒ¨å®¢æˆ·ä¿¡æ¯æ’å…¥åˆ°å®¢æˆ·è¡¨(client)</p>
<pre><code class="language-mysql"> use finance1;
 -- å·²çŸ¥è¡¨new_clientä¿å­˜äº†ä¸€æ‰¹æ–°å®¢æˆ·ä¿¡æ¯ï¼Œè¯¥è¡¨ä¸clientè¡¨ç»“æ„å®Œå…¨ç›¸åŒã€‚è¯·ç”¨ä¸€æ¡SQLè¯­å¥å°†new_clientè¡¨çš„å…¨éƒ¨å®¢æˆ·ä¿¡æ¯æ’å…¥åˆ°å®¢æˆ·è¡¨(client):
INSERT
INTO client
SELECT * FROM new_client;
/* the end of your code */
</code></pre>
<h3 id="54-åˆ é™¤æ²¡æœ‰é“¶è¡Œå¡çš„å®¢æˆ·ä¿¡æ¯">5.4 åˆ é™¤æ²¡æœ‰é“¶è¡Œå¡çš„å®¢æˆ·ä¿¡æ¯</h3>
<p>è¯·ç”¨ä¸€æ¡SQLè¯­å¥åˆ é™¤clientè¡¨ä¸­æ²¡æœ‰é“¶è¡Œå¡çš„å®¢æˆ·ä¿¡æ¯ã€‚ æ³¨æ„ï¼šMySQLçš„deleteè¯­å¥ä¸­fromå…³é”®è¯ä¸èƒ½çœç•¥ã€‚</p>
<pre><code class="language-mysql">use finance1;
-- è¯·ç”¨ä¸€æ¡SQLè¯­å¥åˆ é™¤clientè¡¨ä¸­æ²¡æœ‰é“¶è¡Œå¡çš„å®¢æˆ·ä¿¡æ¯ï¼š
DELETE
FROM client
WHERE c_id NOT IN(SELECT b_c_id FROM bank_card);
/* the end of your code */ 
</code></pre>
<h3 id="55-å†»ç»“å®¢æˆ·èµ„äº§">5.5 å†»ç»“å®¢æˆ·èµ„äº§</h3>
<p>è¯·ç”¨ä¸€æ¡updateè¯­å¥å°†æ‰‹æœºå·ç ä¸ºâ€œ13686431238â€è¿™ä½å®¢æˆ·çš„æŠ•èµ„èµ„äº§(ç†è´¢ã€ä¿é™©ä¸åŸºé‡‘)çš„çŠ¶æ€ç½®ä¸ºâ€œå†»ç»“â€ã€‚</p>
<pre><code class="language-mysql">use finance1;
-- è¯·ç”¨ä¸€æ¡updateè¯­å¥å°†æ‰‹æœºå·ç ä¸ºâ€œ13686431238â€çš„è¿™ä½å®¢æˆ·çš„æŠ•èµ„èµ„äº§(ç†è´¢ã€ä¿é™©ä¸åŸºé‡‘)çš„çŠ¶æ€ç½®ä¸ºâ€œå†»ç»“â€ã€‚ï¼š
UPDATE property
SET pro_status='å†»ç»“'
WHERE EXISTS(
    SELECT *
    FROM client
    WHERE c_id=pro_c_id AND c_phone='13686431238'
);
/* the end of your code */
</code></pre>
<h3 id="56-è¿æ¥æ›´æ–°">5.6 è¿æ¥æ›´æ–°</h3>
<p>åœ¨é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“ä¸­ï¼Œå·²åœ¨è¡¨property(èµ„äº§è¡¨)ä¸­æ·»åŠ äº†å®¢æˆ·èº«ä»½è¯åˆ—ï¼Œåˆ—åä¸ºpro_id_cardï¼Œç±»å‹ä¸ºchar(18)ï¼Œè¯¥åˆ—ç›®å‰å…¨éƒ¨ç•™ç©º(null)ã€‚è¯·ç”¨ä¸€æ¡updateè¯­å¥ï¼Œæ ¹æ®clientè¡¨ä¸­æä¾›çš„èº«ä»½è¯å·(c_id_card)ï¼Œå¡«å†™propertyè¡¨ä¸­å¯¹åº”çš„èº«ä»½è¯å·ä¿¡æ¯(pro_id_card)</p>
<pre><code class="language-mysql">use finance1;
-- åœ¨é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“ä¸­ï¼Œå·²åœ¨è¡¨property(èµ„äº§è¡¨)ä¸­æ·»åŠ äº†å®¢æˆ·èº«ä»½è¯åˆ—ï¼Œåˆ—åä¸ºpro_id_cardï¼Œç±»å‹ä¸ºchar(18)ï¼Œè¯¥åˆ—ç›®å‰å…¨éƒ¨ç•™ç©º(null)ã€‚

-- è¯·ç”¨ä¸€æ¡updateè¯­å¥ï¼Œæ ¹æ®clientè¡¨ä¸­æä¾›çš„èº«ä»½è¯å·(c_id_card)ï¼Œå¡«å†™propertyè¡¨ä¸­å¯¹åº”çš„èº«ä»½è¯å·ä¿¡æ¯(pro_id_card)ã€‚
UPDATE property
SET pro_id_card=(
    SELECT c_id_card
    FROM client
    WHERE pro_c_id=c_id
);
/* the end of your code */
</code></pre>
<h2 id="å…­-è§†å›¾">å…­ã€è§†å›¾</h2>
<h3 id="61-åˆ›å»ºæ‰€æœ‰ä¿é™©èµ„äº§çš„è¯¦ç»†è®°å½•è§†å›¾">6.1 åˆ›å»ºæ‰€æœ‰ä¿é™©èµ„äº§çš„è¯¦ç»†è®°å½•è§†å›¾</h3>
<p>æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç ç¼–è¾‘çª—å£å¡«å†™1æ¡SQLè¯­å¥ï¼Œå®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š åˆ›å»ºåŒ…å«æ‰€æœ‰ä¿é™©èµ„äº§è®°å½•çš„è¯¦ç»†ä¿¡æ¯çš„è§†å›¾v_insurance_detailï¼ŒåŒ…æ‹¬è´­ä¹°å®¢æˆ·çš„åç§°ã€å®¢æˆ·çš„èº«ä»½è¯å·ã€ä¿é™©åç§°ã€ä¿éšœé¡¹ç›®ã€å•†å“çŠ¶æ€ã€å•†å“æ•°é‡ã€ä¿é™©é‡‘é¢ã€ä¿é™©å¹´é™ã€å•†å“æ”¶ç›Šå’Œè´­ä¹°æ—¶é—´</p>
<pre><code class="language-mysql">use finance1;
-- åˆ›å»ºåŒ…å«æ‰€æœ‰ä¿é™©èµ„äº§è®°å½•çš„è¯¦ç»†ä¿¡æ¯çš„è§†å›¾v_insurance_detailï¼ŒåŒ…æ‹¬è´­ä¹°å®¢æˆ·çš„åç§°ã€å®¢æˆ·çš„èº«ä»½è¯å·ã€ä¿é™©åç§°ã€ä¿éšœé¡¹ç›®ã€å•†å“çŠ¶æ€ã€å•†å“æ•°é‡ã€ä¿é™©é‡‘é¢ã€ä¿é™©å¹´é™ã€å•†å“æ”¶ç›Šå’Œè´­ä¹°æ—¶é—´ã€‚
-- è¯·ç”¨1æ¡SQLè¯­å¥å®Œæˆä¸Šè¿°ä»»åŠ¡ï¼š
CREATE VIEW v_insurance_detail
AS
SELECT c_name,c_id_card,i_name,i_project,pro_status,pro_quantity,i_amount,i_year,pro_income,pro_purchase_time
FROM client,insurance,property
WHERE c_id=pro_c_id AND pro_pif_id=i_id AND pro_type=2
/*   end  of your code  */
</code></pre>
<h3 id="62-åŸºäºè§†å›¾çš„æŸ¥è¯¢">6.2 åŸºäºè§†å›¾çš„æŸ¥è¯¢</h3>
<p>åŸºäºä¸Šä¸€å…³åˆ›å»ºçš„è§†å›¾v_insurance_detailè¿›è¡Œåˆ†ç»„ç»Ÿè®¡æŸ¥è¯¢ï¼Œåˆ—å‡ºæ¯ä½å®¢æˆ·çš„å§“åï¼Œèº«ä»½è¯å·ï¼Œä¿é™©æŠ•èµ„æ€»é¢ï¼ˆinsurance_total_amountï¼‰å’Œä¿é™©æŠ•èµ„æ€»æ”¶ç›Šï¼ˆinsurance_total_revenueï¼‰,ç»“æœä¾ä¿é™©æŠ•èµ„æ€»é¢é™åºæ’åˆ—</p>
<pre><code class="language-mysql"> -- åŸºäºä¸Šä¸€å…³åˆ›å»ºçš„è§†å›¾v_insurance_detailè¿›è¡Œåˆ†ç»„ç»Ÿè®¡æŸ¥è¯¢ï¼Œåˆ—å‡ºæ¯ä½å®¢æˆ·çš„å§“åï¼Œèº«ä»½è¯å·ï¼Œä¿é™©æŠ•èµ„æ€»é¢(insurance_total_amount)å’Œä¿é™©æŠ•èµ„æ€»æ”¶ç›Š(insurance_total_revenue),ç»“æœä¾ä¿é™©æŠ•èµ„æ€»é¢é™åºæ’åˆ—ã€‚
--  è¯·ç”¨ä¸€æ¡SQLè¯­å¥å®ç°è¯¥æŸ¥è¯¢ï¼š
SELECT c_name,c_id_card,SUM(pro_quantity*i_amount) insurance_total_amount,SUM(pro_income) insurance_total_revenue
FROM v_insurance_detail
GROUP BY c_id_card
ORDER BY insurance_total_amount DESC;
/*  end  of  your code  */
</code></pre>
<h2 id="ä¸ƒ-å­˜å‚¨è¿‡ç¨‹ä¸äº‹åŠ¡">ä¸ƒã€å­˜å‚¨è¿‡ç¨‹ä¸äº‹åŠ¡</h2>
<h3 id="71-ä½¿ç”¨æµç¨‹æ§åˆ¶è¯­å¥çš„å­˜å‚¨è¿‡ç¨‹">7.1 ä½¿ç”¨æµç¨‹æ§åˆ¶è¯­å¥çš„å­˜å‚¨è¿‡ç¨‹</h3>
<p>æ•°æ®åº“ä¸­æœ‰è¡¨fibonacciï¼Œç”¨æ¥å‚¨å­˜æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„å‰né¡¹ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">åˆ—å</th>
<th style="text-align:center">ç±»å‹</th>
<th style="text-align:center">è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">int</td>
<td style="text-align:center">æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„ç¬¬né¡¹,ä¸»ç </td>
</tr>
<tr>
<td style="text-align:center">fib(n)</td>
<td style="text-align:center">bigint</td>
<td style="text-align:center">ç¬¬né¡¹çš„å€¼</td>
</tr>
</tbody>
</table>
<p>æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„å‰5é¡¹ä¸º:</p>
<table>
<thead>
<tr>
<th style="text-align:center">n</th>
<th style="text-align:center">fib(n)</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
</tr>
<tr>
<td style="text-align:center">1</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td style="text-align:center">2</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td style="text-align:center">3</td>
</tr>
</tbody>
</table>
<p>æ¨å¯¼å…¬å¼ä¸ºï¼šfib(n) = fib(n-1) + fib(n-2)ã€‚</p>
<p>è¯·æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œåˆ›å»ºå­˜å‚¨è¿‡ç¨‹<code>sp_fibonacci(in m int)</code>ï¼Œå‘è¡¨fibonacciæ’å…¥æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„å‰mé¡¹ï¼ŒåŠå…¶å¯¹åº”çš„æ–æ³¢æ‹‰å¥‘æ•°ã€‚fibonacciè¡¨åˆå§‹å€¼ä¸ºä¸€å¼ ç©ºè¡¨ã€‚è¯·ä¿è¯ä½ çš„å­˜å‚¨è¿‡ç¨‹å¯ä»¥å¤šæ¬¡è¿è¡Œè€Œä¸å‡ºé”™ã€‚</p>
<pre><code class="language-mysql">use fib;

-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹`sp_fibonacci(in m int)`ï¼Œå‘è¡¨fibonacciæ’å…¥æ–æ³¢æ‹‰å¥‘æ•°åˆ—çš„å‰mé¡¹ï¼ŒåŠå…¶å¯¹åº”çš„æ–æ³¢æ‹‰å¥‘æ•°ã€‚fibonacciè¡¨åˆå§‹å€¼ä¸ºä¸€å¼ ç©ºè¡¨ã€‚è¯·ä¿è¯ä½ çš„å­˜å‚¨è¿‡ç¨‹å¯ä»¥å¤šæ¬¡è¿è¡Œè€Œä¸å‡ºé”™ã€‚

drop procedure if exists sp_fibonacci;
delimiter $$
create procedure sp_fibonacci(in m int)
begin
######## è¯·è¡¥å……ä»£ç å®Œæˆå­˜å‚¨è¿‡ç¨‹ä½“ ########
DECLARE fib0,fib1,fibn,n int;
set fib0=0,fib1=1,n=2;
if m&gt;=1 then
    insert into fibonacci values(0,0);
end if;
if m&gt;=2 then
    insert into fibonacci values(1,1);
end if;
while m&gt;n do
    set fibn=fib0+fib1;
    insert into fibonacci values(n,fibn);
    set fib0=fib1;
    set fib1=fibn;
    set n=n+1;
end while;
end $$

delimiter ;
</code></pre>
<h3 id="72-ä½¿ç”¨æ¸¸æ ‡çš„å­˜å‚¨è¿‡ç¨‹">7.2 ä½¿ç”¨æ¸¸æ ‡çš„å­˜å‚¨è¿‡ç¨‹</h3>
<p>åŒ»é™¢çš„æŸç§‘å®¤æœ‰ç§‘å®¤ä¸»ä»»1å(äº¦ä¸ºåŒ»ç”Ÿ)ï¼ŒåŒ»ç”Ÿè‹¥å¹²(è‡³å°‘2åï¼Œä¸å«ä¸»ä»»)ï¼ŒæŠ¤å£«è‹¥å¹²(è‡³å°‘4äºº)ï¼Œç°åœ¨éœ€è¦ç¼–å†™ä¸€å­˜å‚¨è¿‡ç¨‹ï¼Œè‡ªåŠ¨å®‰æ’æŸä¸ªè¿ç»­æœŸé—´çš„å¤§å¤œç­(å³æ¯å¤©00:00-8:00æ—¶é—´æ®µ)çš„å€¼ç­è¡¨ï¼Œæ’ç­è§„åˆ™ä¸ºï¼š<br>
1.æ¯ä¸ªå¤œç­å®‰æ’1ååŒ»ç”Ÿï¼Œ2åæŠ¤å£«ï¼›<br>
2.å€¼ç­é¡ºåºä¾å·¥å·é¡ºåºå¾ªç¯è½®æµå®‰æ’(å³æ’è‡³æœ€å1ååå†ä»ç¬¬1åæ¥ç€æ’)ï¼›<br>
3.ç§‘å®¤ä¸»ä»»å‚ä¸è½®å€¼å¤œç­ï¼Œä½†ä¸å®‰æ’å‘¨æœ«(æ˜ŸæœŸå…­å’Œæ˜ŸæœŸå¤©)çš„å¤œç­ï¼Œå½“å‘¨æœ«è½®è‡³ç§‘ä¸»ä»»æ—¶ï¼Œä¸»ä»»çš„å¤œç­è°ƒè‡³å‘¨ä¸€ï¼Œç”±æ’åœ¨ä¸»ä»»åé¢çš„åŒ»ç”Ÿä¾æ¬¡é€’è¡¥å€¼å‘¨æœ«çš„å¤œç­ã€‚</p>
<p>å­˜å‚¨è¿‡ç¨‹çš„åå­—ä¸ºsp_night_shift_arrange,å®ƒå¸¦ä¸¤ä¸ªè¾“å…¥å‚æ•°ï¼šstart_date, end_dateï¼Œåˆ†åˆ«æŒ‡æ’ç­çš„èµ·å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ã€‚æ’ç­ç»“æœç›´æ¥å†™å…¥è¡¨night_shift_scheduleï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>è¡¨night_shift_schedule(å¤œç­å€¼ç­å®‰æ’è¡¨)</p>
<table>
<thead>
<tr>
<th>åˆ—</th>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>n_date</td>
<td>date</td>
<td>æ—¥æœŸ, primary key</td>
</tr>
<tr>
<td>n_doctor_name</td>
<td>char(30)</td>
<td>åŒ»ç”Ÿå§“å</td>
</tr>
<tr>
<td>n_nurse1_name</td>
<td>char(30)</td>
<td>æŠ¤å£«1å§“å</td>
</tr>
<tr>
<td>n_nurse2_name</td>
<td>char(30)</td>
<td>æŠ¤å£«2å§“å</td>
</tr>
</tbody>
</table>
<p>å‡å®šè¯¥ç§‘å®¤æ²¡æœ‰åŒåçš„åŒ»ç”Ÿå’ŒåŒåçš„æŠ¤å£«ã€‚<br>
ç§‘å®¤å‚ä¸å€¼ç­çš„åŒ»æŠ¤äººå‘˜å­˜å‚¨åœ¨è¡¨employeeä¸­ï¼Œå…¶ç»“æ„ä¸ºï¼š</p>
<p>è¡¨employee(åŒ»æŠ¤äººå‘˜è¡¨)</p>
<table>
<thead>
<tr>
<th>åˆ—</th>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>e_id</td>
<td>int</td>
<td>ç¼–å·, primary key</td>
</tr>
<tr>
<td>e_name</td>
<td>char(30)</td>
<td>å§“å</td>
</tr>
<tr>
<td>e_type</td>
<td>int</td>
<td>ç±»åˆ«ï¼š1-ä¸»ä»»,åŒ»ç”Ÿ;2-åŒ»ç”Ÿ;3-æŠ¤å£«</td>
</tr>
</tbody>
</table>
<p>ä¸ç”¨è€ƒè™‘å…¶å®ƒä¿¡æ¯(æ¯”å¦‚ç§‘å®¤ä¹‹ç±»çš„)ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œåªéœ€åœ¨whereçŸ­è¯­ä¸­æ–½åŠ æ¡ä»¶é™åˆ¶å³å¯æ˜ç¡®é€‰å‡ºæ‰€éœ€ç§‘å®¤çš„åŒ»æŠ¤äººå‘˜ã€‚è¿™é‡Œï¼Œä¸”æŠŠè¡¨ä¸­å…¨éƒ¨äººå‘˜è§†ä¸ºè¯¥ç§‘å®¤äººå‘˜ã€‚</p>
<p>è¯·æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®Œæˆè¯¥å­˜å‚¨è¿‡ç¨‹ã€‚ï¼ˆ<s>è¿™éƒ¨åˆ†å¤ªé•¿äº†ï¼Œæ„Ÿè§‰æœ‰ç‚¹å¤æ‚ï¼Œæ²¡æœ‰è‡ªå·±å®Œæˆï¼Œä»¥ä¸‹éƒ¨åˆ†ä¸ºå­¦é•¿çš„ä»£ç </s>ï¼‰[HUST-CS-Database-system-principle/ç¬¬2å…³ ä½¿ç”¨æ¸¸æ ‡çš„å­˜å‚¨è¿‡ç¨‹.txt at main Â· fly-lovest/HUST-CS-Database-system-principle (github.com)](https://github.com/fly-lovest/HUST-CS-Database-system-principle/blob/main/æ•°æ®åº“ç³»ç»ŸåŸç†å®éªŒ/å®éªŒcodeåŠæŠ¥å‘Š/æºä»£ç /å®è®­6 å­˜å‚¨è¿‡ç¨‹ä¸äº‹åŠ¡/ç¬¬2å…³ ä½¿ç”¨æ¸¸æ ‡çš„å­˜å‚¨è¿‡ç¨‹.txt)</p>
<pre><code class="language-mysql">use hms1;

-- ç¼–å†™ä¸€å­˜å‚¨è¿‡ç¨‹ï¼Œè‡ªåŠ¨å®‰æ’æŸä¸ªè¿ç»­æœŸé—´çš„å¤§å¤œç­çš„å€¼ç­è¡¨:

delimiter $$
create procedure sp_night_shift_arrange(in start_date date, in end_date date)
begin
declare now_date date;
declare not_found_flag INT default FALSE;
declare weekend_doctor_flag INT default FALSE;
declare d_name,n_name1,n_name2 char(30);
declare temp_name char(30);
declare d_type int default(0);

declare doctor_cursor cursor for select e_name,e_type from employee where e_type &lt;&gt; 3;
declare nurse_cursor cursor for select e_name from employee where e_type = 3;

declare continue handler for NOT FOUND set not_found_flag = TRUE;

open doctor_cursor;
open nurse_cursor;

fetch doctor_cursor into d_name,d_type;
fetch nurse_cursor into n_name1;
fetch nurse_cursor into n_name2;

set now_date = start_date;
while now_date &lt;= end_date do
	if d_type = 1 and (dayofweek(now_date)=1 or dayofweek(now_date)=7) then
		set temp_name = d_name;
		set weekend_doctor_flag = TRUE;
		fetch doctor_cursor into d_name,d_type;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close doctor_cursor;
			open doctor_cursor;
			fetch doctor_cursor into d_name,d_type;
		end if;
		insert into night_shift_schedule values(now_date,d_name,n_name1,n_name2);
		set now_date = date_sub(now_date,interval -1 day);
		fetch doctor_cursor into d_name,d_type;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close doctor_cursor;
			open doctor_cursor;
			fetch doctor_cursor into d_name,d_type;
		end if;
		fetch nurse_cursor into n_name1;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name1;
		end if;
		fetch nurse_cursor into n_name2;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name2;
		end if;	
	elseif dayofweek(now_date)=2 and weekend_doctor_flag = TRUE then
		set weekend_doctor_flag = FALSE;
		insert into night_shift_schedule values(now_date,temp_name,n_name1,n_name2);
		set now_date = date_sub(now_date,interval -1 day);
		fetch nurse_cursor into n_name1;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name1;
		end if;
		fetch nurse_cursor into n_name2;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name2;
		end if;
	else
		insert into night_shift_schedule values(now_date,d_name,n_name1,n_name2);
		set now_date = date_sub(now_date,interval -1 day);
		fetch doctor_cursor into d_name,d_type;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close doctor_cursor;
			open doctor_cursor;
			fetch doctor_cursor into d_name,d_type;
		end if;
		fetch nurse_cursor into n_name1;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name1;
		end if;
		fetch nurse_cursor into n_name2;
		if not_found_flag = TRUE then
			set not_found_flag = FALSE;
			close nurse_cursor;
			open nurse_cursor;
			fetch nurse_cursor into n_name2;
		end if;
	end if;
end while;
close doctor_cursor;
close nurse_cursor;
end$$

delimiter ;

/*  end  of  your code  */ 
</code></pre>
<h3 id="73-ä½¿ç”¨äº‹åŠ¡çš„å­˜å‚¨è¿‡ç¨‹">7.3 ä½¿ç”¨äº‹åŠ¡çš„å­˜å‚¨è¿‡ç¨‹</h3>
<p>åœ¨é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“ä¸­ï¼Œç¼–ç¨‹å®ç°ä¸€ä¸ªè½¬è´¦æ“ä½œçš„å­˜å‚¨è¿‡ç¨‹sp_transferï¼Œå®ç°ä»ä¸€ä¸ªå¸æˆ·å‘å¦ä¸€ä¸ªå¸æˆ·è½¬è´¦ã€‚è¯¥è¿‡ç¨‹æœ‰5ä¸ªè¾“å…¥å‚æ•°ï¼š</p>
<blockquote>
<p>applicant_id ä»˜æ¬¾äººç¼–å·<br>
source_card_id ä»˜æ¬¾å¡å·<br>
receiver_card_id æ”¶æ¬¾äººç¼–å·<br>
dest_card_id æ”¶æ¬¾å¡å·<br>
amount è½¬è´¦é‡‘é¢<br>
return_code 1ï¼šæ­£å¸¸è½¬è´¦ï¼›0:è½¬è´¦ä¸æˆåŠŸ</p>
</blockquote>
<p>è½¬è´¦æ“ä½œæ¶‰åŠå¯¹è¡¨bank_cardçš„æ“ä½œ(åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè‡³å°‘è¿˜è¦è®°å½•è½¬è´¦æ“ä½œæœ¬èº«ç›¸å…³çš„ä¿¡æ¯è‡³è½¬è´¦è¡¨ï¼Œåœ¨å®éªŒç¯å¢ƒä¸­æ²¡æœ‰è®¾è®¡è¿™æ ·çš„è¡¨ï¼Œä»ç•¥ï¼›å¦å¤–ï¼Œç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå½“é“¶è¡Œå¡è¢«å†»ç»“ï¼Œæˆ–è¢«å¡ä¸»æŒ‚å¤±åï¼Œéƒ½ä¸èƒ½è¿›è¡Œè½¬è´¦ï¼Œåœ¨å®éªŒç¯å¢ƒä¸­ï¼Œæ²¡æœ‰è®¾è®¡ç›¸åº”çš„å­—æ®µ ï¼Œæ•…ä¹Ÿä»ç•¥)ã€‚</p>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<blockquote>
<p>ä»…å½“è½¬æ¬¾äººæ˜¯è½¬å‡ºå¡çš„æŒæœ‰äººæ—¶ï¼Œæ‰å¯è½¬å‡ºï¼›<br>
ä»…å½“æ”¶æ¬¾äººæ˜¯æ”¶æ¬¾å¡çš„æŒæœ‰äººæ—¶ï¼Œæ‰å¯è½¬å…¥ï¼›<br>
å‚¨è“„å¡ä¹‹é—´å¯ä»¥ç›¸äº’è½¬è´¦ï¼›<br>
å…è®¸å‚¨è“„å¡å‘ä¿¡ç”¨å¡è½¬è´¦ï¼Œç§°ä¸ºä¿¡ç”¨å¡è¿˜æ¬¾(å…è®¸æ›¿å®ƒäººè¿˜æ¬¾)ï¼Œè¿˜æ¬¾å¯ä»¥è¶…è¿‡ä¿¡ç”¨å¡ä½™é¢ï¼Œæ­¤æ—¶ï¼Œä¿¡ç”¨å¡ä½™é¢ä¸ºè´Ÿæ•°ï¼›<br>
ä¿¡ç”¨å¡ä¸èƒ½å‘å‚¨è“„å¡è½¬è´¦ï¼›<br>
è½¬è´¦é‡‘é¢ä¸èƒ½è¶…è¿‡å‚¨è“„å¡ä½™é¢ï¼›</p>
</blockquote>
<p>é™„ä¸Š bank_card(é“¶è¡Œå¡)è¡¨ç»“æ„ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>b_number</td>
<td>CHAR(30)</td>
<td>PRIMARY KEY</td>
<td>é“¶è¡Œå¡å·</td>
</tr>
<tr>
<td>b_type</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>é“¶è¡Œå¡ç±»å‹(å‚¨è“„å¡/ä¿¡ç”¨å¡)</td>
</tr>
<tr>
<td>b_c_id</td>
<td>INTEGER</td>
<td>NOT NULL FOREIGN KEY</td>
<td>æ‰€å±å®¢æˆ·ç¼–å·,å¼•ç”¨è‡ªclientè¡¨çš„c_idå­—æ®µã€‚</td>
</tr>
<tr>
<td>b_balance</td>
<td>NUMERIC(10,2)</td>
<td>NOT NULL</td>
<td>ä½™é¢,ä¿¡ç”¨å¡ä½™é¢ç³»æŒ‡å·²é€æ”¯çš„é‡‘é¢</td>
</tr>
</tbody>
</table>
<p>è¯·æ ¹æ®ä¸Šè¿°è¦æ±‚ï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®Œæˆå­˜å‚¨è¿‡ç¨‹sp_transferçš„ç¼–ç¨‹ã€‚</p>
<pre><code class="language-mysql">use finance1;

-- åœ¨é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“ä¸­ï¼Œç¼–ç¨‹å®ç°ä¸€ä¸ªè½¬è´¦æ“ä½œçš„å­˜å‚¨è¿‡ç¨‹sp_transfer_balanceï¼Œå®ç°ä»ä¸€ä¸ªå¸æˆ·å‘å¦ä¸€ä¸ªå¸æˆ·è½¬è´¦ã€‚
-- è¯·è¡¥å……ä»£ç å®Œæˆè¯¥è¿‡ç¨‹ï¼š
delimiter $$
create procedure sp_transfer(
	                 IN applicant_id int,      
                     IN source_card_id char(30),
					 IN receiver_id int, 
                     IN dest_card_id char(30),
					 IN	amount numeric(10,2),
					 OUT return_code int)
BEGIN
SET autocommit=OFF;
START transaction;

UPDATE bank_card
SET b_balance=b_balance-amount
WHERE b_number=source_card_id AND b_c_id=applicant_id AND b_type='å‚¨è“„å¡';

UPDATE bank_card
SET b_balance=b_balance+amount
WHERE b_number=dest_card_id AND b_c_id=receiver_id AND b_type='å‚¨è“„å¡';

UPDATE bank_card
SET b_balance=b_balance-amount
WHERE b_number=dest_card_id AND b_c_id=receiver_id AND b_type='ä¿¡ç”¨å¡';

IF NOT EXISTS(
    SELECT *
    FROM bank_card 
    WHERE b_number=source_card_id 
    AND b_c_id=applicant_id 
    AND b_type='å‚¨è“„å¡' 
    AND b_balance&gt;=0
) THEN
SET return_code=0;
rollback;

ELSEIF NOT EXISTS(
    SELECT *
    FROM bank_card
    WHERE b_number=dest_card_id AND b_c_id=receiver_id
) THEN
SET return_code=0;
rollback;

ELSE
SET return_code=1;
commit;

END IF;

END$$

delimiter ;

/*  end  of  your code  */ 
</code></pre>
<h2 id="å…«-è§¦å‘å™¨">å…«ã€è§¦å‘å™¨</h2>
<h3 id="81-ä¸ºæŠ•èµ„è¡¨propertyå®ç°ä¸šåŠ¡çº¦æŸè§„åˆ™-æ ¹æ®æŠ•èµ„ç±»åˆ«åˆ†åˆ«å¼•ç”¨ä¸åŒè¡¨çš„ä¸»ç ">8.1 ä¸ºæŠ•èµ„è¡¨propertyå®ç°ä¸šåŠ¡çº¦æŸè§„åˆ™-æ ¹æ®æŠ•èµ„ç±»åˆ«åˆ†åˆ«å¼•ç”¨ä¸åŒè¡¨çš„ä¸»ç </h3>
<p>åœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨é‡Œè¡¥å……ä»£ç ï¼Œå®ç°æœ¬ä»»åŠ¡æ‰€è¦æ±‚çš„å®Œæ•´æ€§ä¸šåŠ¡è§„åˆ™ã€‚å½“æ’å…¥çš„æ•°æ®ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œæ‹’ç»æ•°æ®çš„æ’å…¥ï¼Œå¹¶åé¦ˆå‡ºé”™ä¿¡æ¯ï¼š<br>
(1) pro_typeæ•°æ®ä¸åˆæ³•æ—¶ï¼Œæ˜¾ç¤º:<br>
type x is illegal!<br>
è¿™é‡Œï¼Œxç³»æŒ‡è¯•å›¾æ’å…¥çš„pro_typeå€¼ã€‚<br>
(2) pro_type = 1,ä½†pro_pif_idä¸æ˜¯finances_productè¡¨ä¸­çš„æŸä¸ªä¸»ç å€¼ï¼Œæ˜¾ç¤º:<br>
finances product #x not found!<br>
è¿™é‡Œ,xç³»æŒ‡è¯•å›¾æ’å…¥çš„pro_pif_diçš„å€¼ã€‚<br>
(3) pro_type = 2,ä½†pro_pif_idä¸æ˜¯insuranceè¡¨ä¸­çš„æŸä¸ªä¸»ç å€¼ï¼Œæ˜¾ç¤º:<br>
insurance #x not found!<br>
è¿™é‡Œ,xç³»æŒ‡è¯•å›¾æ’å…¥çš„pro_pif_idçš„å€¼ã€‚<br>
(3) pro_type = 3,ä½†pro_pif_idä¸æ˜¯fundè¡¨ä¸­çš„æŸä¸ªä¸»ç å€¼ï¼Œæ˜¾ç¤º:<br>
fund #x not found!<br>
è¿™é‡Œ,xç³»æŒ‡è¯•å›¾æ’å…¥çš„pro_pif_idçš„å€¼ã€‚</p>
<p>æç¤ºï¼š<br>
(1) æŸ¥é˜…MySQLçš„å­—ç¬¦ä¸²å‡½æ•°ï¼Œæ„é€ å‡ºé”™ä¿¡æ¯ï¼›<br>
(2) å½“æ•°æ®ä¸åˆæ³•æ—¶ï¼Œç”¨signal sqlstate è¯­å¥æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶è®¾ç½®å‡ºé”™ä¿¡æ¯ï¼š<br>
SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;<br>
å…¶ä¸­ï¼Œé€šç”¨SQLSTATE '45000'æ„æŒ‡ç”¨æˆ·å®šä¹‰çš„å¾…å¤„ç†å¼‚å¸¸ï¼Œmsgéœ€æ›¿æ¢æˆä½ æƒ³è¦æ˜¾ç¤ºçš„æç¤ºä¿¡æ¯(ä¸è¶…è¿‡128ä¸ªå­—ç¬¦)ã€‚</p>
<pre><code class="language-mysql">use finance1;
drop trigger if exists before_property_inserted;
-- è¯·åœ¨é€‚å½“çš„åœ°æ–¹è¡¥å……ä»£ç ï¼Œå®Œæˆä»»åŠ¡è¦æ±‚ï¼š
delimiter $$
CREATE TRIGGER before_property_inserted BEFORE INSERT ON property
FOR EACH ROW 
BEGIN

DECLARE msg varchar(40);
IF new.pro_type&lt;&gt;1 AND new.pro_type&lt;&gt;2 AND new.pro_type&lt;&gt;3 THEN
    SET msg=concat('type ',new.pro_type,' is illegal!');
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
END IF;

IF new.pro_type=1 AND NOT EXISTS(SELECT * FROM finances_product WHERE p_id=new.pro_pif_id) THEN
    SET msg=concat('finances product #',new.pro_pif_id,' not found!');
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
END IF;

IF new.pro_type=2 AND NOT EXISTS(SELECT * FROM insurance WHERE i_id=new.pro_pif_id) THEN
    SET msg=concat('insurance #',new.pro_pif_id,' not found!');
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
END IF;

IF new.pro_type=3 AND NOT EXISTS(SELECT * FROM fund WHERE f_id=new.pro_pif_id) THEN
    SET msg=concat('fund #',new.pro_pif_id,' not found!');
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = msg;
END IF;

END$$
 
delimiter ;
</code></pre>
<h2 id="ä¹-ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°">ä¹ã€ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</h2>
<h3 id="91-åˆ›å»ºå‡½æ•°å¹¶åœ¨è¯­å¥ä¸­ä½¿ç”¨å®ƒ">9.1 åˆ›å»ºå‡½æ•°å¹¶åœ¨è¯­å¥ä¸­ä½¿ç”¨å®ƒ</h3>
<p>ä¸»åœ¨å³ä¾§ä»£æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®Œæˆä»¥ä¸‹ç¼–ç¨‹ä»»åŠ¡ï¼š<br>
(1) ç”¨create functionè¯­å¥åˆ›å»ºç¬¦åˆä»¥ä¸‹è¦æ±‚çš„å‡½æ•°ï¼š<br>
ä¾æ®å®¢æˆ·ç¼–å·è®¡ç®—å…¶æ‰€æœ‰å‚¨è“„å¡ä½™é¢çš„æ€»å’Œ<br>
å‡½æ•°åä¸ºï¼šget_deposit<br>
(2) åˆ©ç”¨åˆ›å»ºçš„å‡½æ•°ï¼Œä»…ç”¨ä¸€æ¡SQLè¯­å¥æŸ¥è¯¢å­˜æ¬¾æ€»é¢åœ¨100ä¸‡(å«)ä»¥ä¸Šçš„å®¢æˆ·èº«ä»½è¯å·ï¼Œå§“åå’Œå­˜æ¬¾æ€»é¢(total_deposit)ï¼Œç»“æœä¾å­˜å‚¨æ€»é¢ä»é«˜åˆ°ä½æ’åº</p>
<pre><code class="language-mysql">use finance1;
set global log_bin_trust_function_creators=1;
drop function IF EXISTS get_deposit;
/*
   ç”¨create functionè¯­å¥åˆ›å»ºç¬¦åˆä»¥ä¸‹è¦æ±‚çš„å‡½æ•°ï¼š
   ä¾æ®å®¢æˆ·ç¼–å·è®¡ç®—è¯¥å®¢æˆ·æ‰€æœ‰å‚¨è“„å¡çš„å­˜æ¬¾æ€»é¢ã€‚
   å‡½æ•°åä¸ºï¼šget_Recordsã€‚å‡½æ•°çš„å‚æ•°åå¯ä»¥è‡ªå·±å‘½å:*/

delimiter $$
create function get_deposit(client_id int)
returns numeric(10,2) 
begin
	DECLARE deposit numeric(10,2);
    SELECT SUM(b_balance) INTO deposit
    FROM bank_card
    WHERE b_c_id=client_id AND b_type='å‚¨è“„å¡'
    GROUP BY b_c_id;
    return deposit;
end$$
delimiter ;

/*  åº”ç”¨è¯¥å‡½æ•°æŸ¥è¯¢å­˜æ¬¾æ€»é¢åœ¨100ä¸‡ä»¥ä¸Šçš„å®¢æˆ·èº«ä»½è¯å·ï¼Œå§“åå’Œå­˜å‚¨æ€»é¢(total_deposit)ï¼Œ
    ç»“æœä¾å­˜æ¬¾æ€»é¢ä»é«˜åˆ°ä»£æ’åº  */
SELECT c_id_card,c_name,get_deposit(c_id) AS total_deposit
FROM client
WHERE get_deposit(c_id)&gt;=1000000
ORDER BY get_deposit(c_id) DESC;
/*  ä»£ç æ–‡ä»¶ç»“æŸ     */
</code></pre>
<h2 id="å-æ•°æ®åº“è®¾è®¡ä¸å®ç°">åã€æ•°æ®åº“è®¾è®¡ä¸å®ç°</h2>
<h3 id="101-ä»æ¦‚å¿µæ¨¡å‹åˆ°mysqlå®ç°">10.1 ä»æ¦‚å¿µæ¨¡å‹åˆ°MySQLå®ç°</h3>
<img src="https://data.educoder.net/api/attachments/2638254" style="zoom:80%;" />
<p>åº”ç”¨èƒŒæ™¯ä»‹ç»<br>
è¿™æ˜¯ä¸€ä¸ªæœºç¥¨è®¢ç¥¨ç³»ç»Ÿï¼Œç³»ç»Ÿéœ€è¦è€ƒè™‘ä»¥ä¸‹å®ä½“ï¼š<br>
<strong>ï¼ˆ1ï¼‰ç”¨æˆ·(user)ï¼š</strong><br>
ç”¨æˆ·åˆ†ä¸¤ç±»ï¼Œæ™®é€šç”¨æˆ·å¯ä»¥è®¢ç¥¨ï¼Œç®¡ç†ç”¨æˆ·æœ‰æƒé™ç»´æŠ¤å’Œç®¡ç†æ•´ä¸ªç³»ç»Ÿçš„è¿è¥ã€‚ä¸ºç®€å•èµ·è§ï¼Œä¸¤ç±»ç”¨æˆ·åˆå¹¶ï¼Œç”¨admin_tagæ ‡è®°åŒºåˆ†ã€‚ç”¨æˆ·çš„å±æ€§(åŒ…æ‹¬ä¸šåŠ¡çº¦æŸ)æœ‰ï¼š</p>
<blockquote>
<p>â— ç”¨æˆ·ç¼–å·: user_id int ä¸»ç ,è‡ªåŠ¨å¢åŠ <br>
â— åå­—: firstname varchar(50) ä¸å¯ä¸ºç©º<br>
â— å§“æ°: lastname varchar(50) ä¸å¯ä¸ºç©º<br>
â— ç”Ÿæ—¥: dob date ä¸å¯ä¸ºç©º<br>
â— æ€§åˆ«: sex char(1) ä¸å¯ä¸ºç©º<br>
â— é‚®ç®±: email varchar(50)<br>
â— è”ç³»ç”µè¯: phone varchar(30)<br>
â— ç”¨æˆ·å: username varchar(20) ä¸å¯ç©º,ä¸å¯æœ‰é‡<br>
â— å¯†ç : password char(32) ä¸å¯ç©º<br>
â— ç®¡ç†å‘˜æ ‡å¿—: admin_tag tinyint ç¼ºçœå€¼0(éç®¡ç†å‘˜),ä¸èƒ½ç©º</p>
</blockquote>
<p><strong>ï¼ˆ2ï¼‰æ—…å®¢(passenger)ï¼š</strong><br>
ç”¨æˆ·ç™»å½•ç³»ç»Ÿä¸ä¸€å®šæ˜¯æ›¿è‡ªå·±ä¹°ç¥¨ï¼Œæ‰€ä»¥ç”¨æˆ·å’Œæ—…å®¢ä¿¡æ¯æ˜¯åˆ†å¼€å­˜å‚¨çš„ã€‚å±æ€§æœ‰ï¼š</p>
<blockquote>
<p>â— æ—…å®¢ç¼–å·: passenger_id int è‡ªå¢ï¼Œä¸»ç <br>
â— è¯ä»¶å·ç : id char(18) ä¸å¯ç©º ä¸å¯é‡<br>
â— åå­—ï¼šfirstname varchar(50) ä¸å¯ç©º<br>
â— å§“æ°: lastname varchar(50) ä¸å¯ç©º<br>
â— é‚®ç®±ï¼šmail varchar(50)<br>
â— ç”µè¯: phone varchar(20) ä¸å¯ç©º<br>
â— æ€§åˆ«: sex char(1) ä¸å¯ç©º<br>
â— ç”Ÿæ—¥: dob date</p>
</blockquote>
<p><strong>ï¼ˆ3ï¼‰æœºåœº(airport)ï¼š</strong><br>
æœ‰ä»¥ä¸‹å±æ€§ï¼š</p>
<blockquote>
<p>â— ç¼–å·: airport_id int è‡ªå¢ï¼Œä¸»ç <br>
â— å›½é™…æ°‘èˆªç»„ç»‡ç¼–ç ï¼šiata char(3) ä¸å¯ç©ºï¼Œå…¨çƒå”¯ä¸€<br>
â— å›½é™…èˆªè¿åä¼šç¼–ç : icao char(4) ä¸å¯ç©ºï¼Œå…¨çƒå”¯ä¸€<br>
â— æœºåœºåç§°: name varchar(50) ä¸å¯ç©ºï¼Œæ™®é€šç´¢å¼•<br>
â— æ‰€åœ¨åŸå¸‚: city varchar(50)<br>
â— æ‰€åœ¨å›½å®¶: country varchar(50)<br>
â— çº¬åº¦: latitude decimal(11,8)<br>
â— ç»åº¦: longitude decimal(11,8)<br>
â— å…¨çƒæ¯ä¸ªæœºåœºéƒ½æœ‰å”¯ä¸€IATAç¼–ç å’ŒICAOç¼–ç ï¼ŒIATAä¸º3ä¸ªå­—ç¬¦ï¼ŒICAOä¸º4ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚é¦–éƒ½æœºåœºçš„(IATA,ICAO)åˆ†åˆ«ä¸º(PEK,ZBAA)ï¼Œå¤§å…´æœºåœºä¸º(PKX,ZBAD),å¤©æ²³æœºæœºåœºä¸º(WUH,ZHHH)ã€‚åœ¨é£æœºç™»è®°ç‰Œä¸Šå‡ºå‘åœ°å’Œåˆ°è¾¾åœ°å‡ç”¨IATAè¡¨ç¤ºã€‚ä¸ºèƒ½åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºæœºåœºä½ç½®ï¼Œéœ€è¦è®°å½•ç»çº¬åº¦ä¿¡æ¯ã€‚</p>
</blockquote>
<p><strong>ï¼ˆ4ï¼‰èˆªç©ºå…¬å¸(airline)ï¼š</strong><br>
æœ‰ä»¥ä¸‹å±æ€§:</p>
<blockquote>
<p>â— ç¼–å·ï¼šairline_id int è‡ªå¢ï¼Œä¸»ç <br>
â— åç§°ï¼šname varchar(30) ä¸å¯ç©º<br>
â— å›½é™…æ°‘èˆªç»„ç»‡ç¼–ç : iata char(2) ä¸å¯ç©ºï¼Œå…·å…¨çƒå”¯ä¸€æ€§<br>
â— èˆªç©ºå…¬å¸çš„IATAç¼–ç ä¸º2ä½ï¼Œå¦‚ä¸œèˆªä¸ºMUï¼Œå›½èˆªä¸ºCA,å—èˆªä¸ºCZç­‰ï¼Œèˆªç­å·ä¸€èˆ¬ä»¥æ‰€å±èˆªç©ºå…¬å¸çš„IATAç ä¸ºå‰ç¼€ã€‚</p>
</blockquote>
<p><strong>ï¼ˆ5ï¼‰æ°‘èˆªé£æœº(airplane)ï¼š</strong><br>
æœ‰å±æ€§ï¼š</p>
<blockquote>
<p>â— ç¼–å·ï¼šairplane_id int è‡ªå¢ï¼Œä¸»ç <br>
â— æœºå‹ï¼štype varchar(50) ä¸å¯ç©ºï¼Œå¦‚B737-300,A320-500ç­‰<br>
â— åº§ä½: capacity smallint ä¸å¯ç©º<br>
â— æ ‡è¯†: identifier varchar(50) ä¸å¯ç©º</p>
</blockquote>
<p><strong>ï¼ˆ6ï¼‰èˆªç­å¸¸è§„è°ƒåº¦è¡¨(flightschedule)ï¼š</strong><br>
èˆ¤ç­ä¸€èˆ¬ä»¥å‘¨æ¬¡å®‰æ’ï¼Œä¾‹å¦‚ï¼šæ¯å‘¨ä¸¤ä¸ªç­æ¬¡ï¼Œå‘¨ä¸€å’Œå‘¨äº”ã€‚æœ‰å±æ€§ï¼š</p>
<blockquote>
<p>â— èˆªç­å·: flight_no char(8) ä¸»ç <br>
â— èµ·é£æ—¶é—´: departure time éç©º<br>
â— åˆ°è¾¾æ—¶é—´: arrival time éç©º<br>
â— é£è¡Œæ—¶é•¿: duration smalint éç©ºï¼Œé£è¡Œæ—¶é•¿ä¸€èˆ¬ä»¥åˆ†ç§è®¡ã€‚<br>
â— å‘¨ä¸€ï¼šmonday tinyint ç¼ºçœ0<br>
â— å‘¨äºŒï¼štuesday tinyint ç¼ºçœ0<br>
â— å‘¨ä¸‰ï¼šwednesday tinyint ç¼ºçœ0<br>
â— å‘¨å››ï¼šthursday tinyint ç¼ºçœ0<br>
â— å‘¨äº”ï¼šfriday tinyint ç¼ºçœ0<br>
â— å‘¨å…­ï¼šsaturday tinyint ç¼ºçœ0<br>
â— å‘¨æ—¥ï¼šsunday tinyint ç¼ºçœ0</p>
</blockquote>
<p><strong>ï¼ˆ7ï¼‰èˆªç­è¡¨(flight)ï¼š</strong><br>
èˆªç­ä¾èˆªç­å¸¸è§„è°ƒåº¦è¡¨ä¸ºåŸºå‡†å®‰æ’ã€‚ä½†è°ƒåº¦è¡¨ä¸æ˜¯ä¸€æˆä¸å˜ï¼Œä¹Ÿä¸æ˜¯æ¯ä¸ªæ—¢å®šçš„èˆªéƒ½å®é™…èµ·é£ï¼Œä¹Ÿä¸æ€»æ˜¯æŒ‰æ—¢å®šçš„æ—¶é—´èµ·é£ï¼Œæ‰€ä»¥å®é£èˆªç­å¿…é¡»å•ç‹¬å®‰æ’å¹¶è®°å½•ã€‚è¦è®°å½•çš„ä¿¡æ¯æœ‰ï¼š</p>
<blockquote>
<p>â— é£è¡Œç¼–å·ï¼šflight_id int è‡ªå¢ï¼Œä¸»ç <br>
â— èµ·é£æ—¶é—´: departure datetime éç©º<br>
â— åˆ°è¾¾æ—¶é—´: arrival datetime éç©º<br>
â— é£è¡Œæ—¶é•¿ï¼šduration smallint éç©º</p>
</blockquote>
<p>æœ‰çš„ç³»ç»Ÿè¿˜ä¼šå®æ—¶æ˜¾ç¤ºèˆªç­ç»çº¬åº¦å’Œé«˜åº¦ä½ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬ä½œäº†ç®€åŒ–ï¼Œå»æ‰äº†å®æ—¶é£è¡Œä¿¡æ¯ã€‚</p>
<p><strong>ï¼ˆ8ï¼‰æœºç¥¨(ticket)ï¼š</strong><br>
ç”¨æˆ·å¯æ›¿è‡ªå·±æˆ–å…¶äº²å‹è´­ä¹°æŸä¸ªèˆªç­çš„æœºç¥¨ã€‚æœºç¥¨çš„å±æ€§æœ‰ï¼š</p>
<blockquote>
<p>â— ç¥¨å·ï¼šticket_id int è‡ªå¢ï¼Œä¸»ç <br>
â— åä½å·ï¼šseat char(4)<br>
â— ä»·æ ¼ï¼šprice decimal(10,2) ä¸èƒ½ç©º</p>
</blockquote>
<p><strong>ï¼ˆ9ï¼‰å®ä½“é—´çš„è”ç³»ï¼š</strong><br>
å®ä½“é—´çš„è”ç³»éƒ½æ¸…æ¥šåœ°æ ‡æ³¨åœ¨ERå›¾ä¸­ï¼š</p>
<p>æ¯ä¸ªèˆªç©ºå…¬å¸éƒ½æœ‰ä¸€ä¸ªæ¯æ¸¯(æœºåœº)ï¼Œåˆå«åŸºåœ°ã€‚å¤§çš„æœºåœºå¯èƒ½ä¼šæ˜¯å¤šå®¶å…¬å¸çš„åŸºåœ°ï¼Œå°å‹æœºåœºå¯èƒ½ä¸æ˜¯ä»»ä½•èˆªç©ºå…¬å¸çš„åŸºåœ°ã€‚<br>
æ¯ä¸ªèˆªç­å±äºä¸€å®¶èˆªç©ºå…¬å¸ï¼Œèˆªç©ºå…¬å¸å¯ä»¥å¾ˆå¤šèˆªç­ã€‚<br>
ä»»ä½•ä¸€é©¾æ°‘èˆªé£æœºå±äºä¸€å®¶èˆªç©ºå…¬å¸ï¼Œèˆªç©ºå…¬å¸å¯ä»¥æœ‰å¤šé©¾é£æœºã€‚<br>
æ¯é©¾é£æœºå¯ä»¥æ‰§é£å¤šä¸ªèˆªç­ï¼Œä¸€ä¸ªé£è¡Œèˆªç­ç”±ä¸€æ¶é£æœºæ‰§é£ã€‚<br>
ä¸€ä¸ªèˆªç­æ ¹æ®æ‰§é£æœºå‹å¯ä»¥å”®å‡ºè‹¥å¹²æœºç¥¨ã€‚ä¸€å¼ æœºç¥¨æ˜¯æŸä¸ªç‰¹å®šèˆªç­çš„æœºç¥¨ã€‚<br>
ç”¨æˆ·å¯ä»¥å¤šæ¬¡è®¢ç¥¨ï¼Œæ—…å®¢å¯ä»¥å¤šæ¬¡ä¹˜åé£æœºã€‚ä¸€å¼ æœºç¥¨è‚¯å®šæ˜¯æŸä¸ªç”¨æˆ·ä¸ºæŸä¸ªç‰¹å®šçš„æ—…å®¢è´­ä¹°çš„ç‰¹å®šèˆªç­çš„æœºç¥¨ã€‚å³æœºç¥¨ä¿¡æ¯ä¸ä»…è·Ÿä¹˜åäººæœ‰å…³ï¼ŒåŒæ—¶è®°å½•è´­ä¹°äººä¿¡æ¯(è™½ç„¶ä¸¤è€…æœ‰æ—¶æ˜¯åŒä¸€äºº)ã€‚ä¸ºç®€å•èµ·è§ï¼Œè®¢è´­æ—¶é—´æ²¡æœ‰è€ƒè™‘ã€‚<br>
æ— è®ºå¸¸è§„è®¡åˆ’çš„èˆªç­ï¼Œè¿˜æ˜¯å®é™…é£è¡Œèˆªç­ï¼Œéƒ½æ˜¯ä»æŸä¸ªæœºåœºå‡ºå‘ï¼Œåˆ°è¾¾å¦ä¸€ä¸ªæœºåœºã€‚ä½†ä¸€ä¸ªæœºåœºå¯ä»¥æ˜¯å¾ˆå¤šä¸ªèˆªç­çš„å‡ºå‘åœ°ï¼Œä¹Ÿæ˜¯å¾ˆå¤šèˆªç­çš„åˆ°è¾¾åœ°ã€‚<br>
è¯·æ ¹æ®ä¸Šè¿°ä¿¡æ¯å’Œæ‰€ç»™ERå›¾ï¼Œç»™å‡ºåœ¨MySQLå®ç°flight_bookingçš„è¯­å¥ï¼ŒåŒ…æ‹¬å»ºåº“ï¼Œå»ºè¡¨ï¼Œåˆ›å»ºä¸»ç ï¼Œå¤–ç ï¼Œç´¢å¼•ï¼ŒæŒ‡å®šç¼ºçœï¼Œä¸èƒ½ä¸ºç©ºç­‰çº¦æŸã€‚æ‰€æœ‰ç´¢å¼•é‡‡ç”¨BTREEã€‚æ‰€æœ‰çº¦æŸçš„åå­—ä¸ä½œè¦æ±‚ã€‚æ‰€æœ‰çš„å¤–ç ä¸ä¸»ç åŒåã€‚ä½†æœ‰ä¸¤å¤„ä¾‹å¤–: è®¡åˆ’èˆªç­å’Œé£è¡Œèˆªç­éƒ½æ¶‰åŠå‡ºå‘æœºåœºå’Œåˆ°è¾¾æœºåœºï¼Œå¤–ç ä¸ä¸»ç åŒåä¼šå¯¼è‡´åŒä¸€è¡¨æœ‰ä¸¤ä¸ªåŒååˆ—ã€‚æ•…è¿™ä¸¤å¤„å¤–ç ä¾‹å¤–å¤„ç†ï¼šå‡ºå‘æœºåœºå‘½åä¸ºfromï¼Œåˆ°è¾¾æœºåœºå‘½åä¸ºtoã€‚<br>
æ³¨æ„ï¼šæ‰€æœ‰çš„è¡¨åå­—å’Œåˆ—åï¼Œéƒ½æ²¡æœ‰å¤§å†™å­—æ¯ã€‚åˆ—åå­˜åœ¨ä¸å…³é”®å­—åŒåçš„æƒ…å½¢ï¼Œè¯·å¦¥å–„å¤„ç†ã€‚ä½ æœ‰å¯èƒ½ä¸èƒ½ä¸€æ¬¡é€šè¿‡è¯„æµ‹ï¼Œè¯·è€ƒè™‘ä½ çš„ä»£ç è¦åå¤ä¿®æ”¹å†è¿è¡Œçš„æƒ…å½¢ã€‚</p>
<pre><code class="language-mysql"> # è¯·å°†ä½ å®ç°flight_bookingæ•°æ®åº“çš„è¯­å¥å†™åœ¨ä¸‹æ–¹ï¼š
CREATE DATABASE flight_booking;
USE flight_booking;
CREATE TABLE user(
    user_id INT PRIMARY KEY AUTO_INCREMENT,
    firstname VARCHAR(50) NOT NULL,
    lastname VARCHAR(50) NOT NULL,
    dob DATE NOT NULL,
    sex CHAR(1) NOT NULL,
    email VARCHAR(50),
    phone VARCHAR(30),
    username VARCHAR(20) NOT NULL UNIQUE,
    password CHAR(32) NOT NULL,
    admin_tag TINYINT NOT NULL DEFAULT 0
);

CREATE TABLE passenger(
    passenger_id INT PRIMARY KEY AUTO_INCREMENT,
    id CHAR(18) NOT NULL UNIQUE,
    firstname VARCHAR(50) NOT NULL,
    lastname VARCHAR(50) NOT NULL,
    mail VARCHAR(50),
    phone VARCHAR(20) NOT NULL,
    sex CHAR(1) NOT NULL,
    dob DATE
);

CREATE TABLE airport(
    airport_id INT PRIMARY KEY AUTO_INCREMENT,
    iata CHAR(3) NOT NULL UNIQUE,
    icao CHAR(4) NOT NULL UNIQUE,
    name VARCHAR(50) NOT NULL,
    city VARCHAR(50),
    country VARCHAR(50),
    latitude DECIMAL(11,8),
    longitude DECIMAL(11,8),
    index(name)
);

CREATE TABLE airline(
    airline_id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(30) NOT NULL,
    iata CHAR(2) NOT NULL UNIQUE,
    airport_id INT NOT NULL,
    CONSTRAINT FK_airline_airport FOREIGN KEY(airport_id) REFERENCES airport(airport_id)
);

CREATE TABLE airplane(
    airplane_id INT PRIMARY KEY AUTO_INCREMENT,
    type VARCHAR(50) NOT NULL,
    capacity SMALLINT NOT NULL,
    identifier VARCHAR(50) NOT NULL,
    airline_id INT NOT NULL,
    CONSTRAINT FK_airplane_airline FOREIGN KEY(airline_id) REFERENCES airline(airline_id)
);

CREATE TABLE flightschedule(
    flight_no CHAR(8) PRIMARY KEY,
    departure TIME NOT NULL,
    arrival TIME NOT NULL,
    duration SMALLINT NOT NULL,
    monday TINYINT DEFAULT 0,
    tuesday TINYINT DEFAULT 0,
    wednesday TINYINT DEFAULT 0,
    thursday TINYINT DEFAULT 0,
    friday TINYINT DEFAULT 0,
    saturday TINYINT DEFAULT 0,
    sunday TINYINT DEFAULT 0,
    airline_id INT NOT NULL,
    `from` INT NOT NULL,
    `to` INT NOT NULL,
    CONSTRAINT FK_flightschedule_airline FOREIGN KEY(airline_id) REFERENCES airline(airline_id),
	CONSTRAINT FK_flightschedule_airport1 FOREIGN KEY(`from`) REFERENCES airport(airport_id),
	CONSTRAINT FK_flightschedule_airport2 FOREIGN KEY(`to`) REFERENCES airport(airport_id)
);

CREATE TABLE flight(
    flight_id INT PRIMARY KEY AUTO_INCREMENT,
    departure DATETIME NOT NULL,
    arrival DATETIME NOT NULL,
    duration SMALLINT NOT NULL,
    airline_id INT NOT NULL,
	airplane_id INT NOT NULL,
	flight_no CHAR(8) NOT NULL,
	`from` INT NOT NULL,
	`to` INT NOT NULL,
    CONSTRAINT FK_flight_airline FOREIGN KEY (airline_id) REFERENCES airline(airline_id),
	CONSTRAINT FK_flight_airplane FOREIGN KEY (airplane_id) REFERENCES airplane(airplane_id),
	CONSTRAINT FK_flight_flightschedule FOREIGN KEY (flight_no) REFERENCES flightschedule(flight_no),
	CONSTRAINT FK_flight_airport1 FOREIGN KEY (`from`) REFERENCES airport(airport_id),
	CONSTRAINT FK_flight_airport2 FOREIGN KEY (`to`) REFERENCES airport(airport_id)
);

CREATE TABLE ticket(
    ticket_id INT PRIMARY KEY AUTO_INCREMENT,
    seat CHAR(4),
    price DECIMAL(10,2) NOT NULL,
    flight_id INT NOT NULL,
	passenger_id INT NOT NULL,
	user_id INT NOT NULL,
	CONSTRAINT FK_ticket_flight FOREIGN KEY (flight_id) REFERENCES flight(flight_id),
	CONSTRAINT FK_ticket_passenger FOREIGN KEY (passenger_id) REFERENCES passenger(passenger_id),
	CONSTRAINT FK_ticket_user FOREIGN KEY (user_id) REFERENCES user(user_id)
);
</code></pre>
<h2 id="åä¸€-æ•°æ®åº“åº”ç”¨å¼€å‘javaç¯‡">åä¸€ã€æ•°æ®åº“åº”ç”¨å¼€å‘(JAVAç¯‡)</h2>
<h3 id="111-jdbcä½“ç³»ç»“æ„å’Œç®€å•çš„æŸ¥è¯¢">11.1 JDBCä½“ç³»ç»“æ„å’Œç®€å•çš„æŸ¥è¯¢</h3>
<p>æ­£ç¡®ä½¿ç”¨JDBCï¼ŒæŸ¥è¯¢é‡‘èåº”ç”¨åœºæ™¯æ•°æ®åº“financeçš„clientè¡¨(å®¢æˆ·è¡¨)ä¸­é‚®ç®±ä¸ä¸ºç©ºçš„å®¢æˆ·ä¿¡æ¯ï¼Œåˆ—å‡ºå®¢æˆ·å§“åï¼Œé‚®ç®±å’Œç”µè¯.ä¸€ä¸ªå±•ç¤ºç»“æœçš„ç¤ºä¾‹å¦‚ä¸‹(å­—ä½“é¢œè‰²æ˜¯å¹³å°è‡ªåŠ¨åŠ çš„ï¼Œä¸æ˜¯ç¼–ç¨‹è¦æ±‚)ï¼š</p>
<pre><code>å§“å	é‚®ç®±				ç”µè¯
å¤é›…æƒ 	57433144004@qq.com		18962433158
é’Ÿåº­ç®	59434199077@163.com		18110434192
</code></pre>
<p>æ³¨ï¼šæ ‡é¢˜ä»¥åŠå­—æ®µå€¼ä¹‹é—´ç”¨åˆ¶è¡¨ç¬¦éš”å¼€ã€‚ç¬¬1åˆ—å’Œç¬¬2åˆ—é—´ç”¨ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼Œç¬¬2åˆ—å’Œç¬¬3åˆ—é—´ï¼Œæ ‡é¢˜ç”¨4ä¸ªåˆ¶è¡¨ç¬¦ï¼Œå­—æ®µå€¼ç”¨ä¸¤ä¸ªåˆ¶è¡¨ç¬¦éš”å¼€ã€‚</p>
<p>JDBCé©±åŠ¨ç¨‹åº(mysql-connector-java-8.0.23.jar)ç”±å¹³å°æä¾›ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œä¸ç”¨ç‰¹åˆ«è®¾ç½®ã€‚</p>
<p>è¯·åœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨é€‚å½“çš„ä½ç½®è¡¥å……ä»£ç ï¼Œå®ç°ä¸Šè¿°ç¼–ç¨‹è¦æ±‚ã€‚</p>
<p>é™„clientè¡¨çš„ç»“æ„: è¡¨1 client(å®¢æˆ·è¡¨)</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>c_id</td>
<td>INTEGER</td>
<td>PRIMARY KEY</td>
<td>å®¢æˆ·ç¼–å·</td>
</tr>
<tr>
<td>c_name</td>
<td>VARCHAR(100)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·åç§°</td>
</tr>
<tr>
<td>c_mail</td>
<td>CHAR(30)</td>
<td>UNIQUE</td>
<td>å®¢æˆ·é‚®ç®±</td>
</tr>
<tr>
<td>c_id_card</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·èº«ä»½è¯</td>
</tr>
<tr>
<td>c_phone</td>
<td>CHAR(20)</td>
<td>UNIQUE NOT NULL</td>
<td>å®¢æˆ·æ‰‹æœºå·</td>
</tr>
<tr>
<td>c_password</td>
<td>CHAR(20)</td>
<td>NOT NULL</td>
<td>å®¢æˆ·ç™»å½•å¯†ç </td>
</tr>
</tbody>
</table>
<pre><code class="language-java">/* è¯·åœ¨é€‚å½“çš„ä½ç½®è¡¥å……ä»£ç ï¼Œå®ŒæˆæŒ‡å®šçš„ä»»åŠ¡ 
   æç¤ºï¼š
      try {


      } catch
    ä¹‹é—´è¡¥å……ä»£ç   
*/
import java.sql.*;

public class Client {
    public static void main(String[] args) {
        Connection connection = null;
        Statement statement = null;
        ResultSet resultSet = null;

        try {
            //æ³¨å†Œé©±åŠ¨ç¨‹åº
            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);
            //åˆ›å»ºæ•°æ®åº“è¿æ¥å¯¹è±¡
            String URL=&quot;jdbc:mysql://127.0.0.1:3306/finance?useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
            String USER=&quot;root&quot;;
            String PASS=&quot;123123&quot;;
            connection=DriverManager.getConnection(URL, USER, PASS);
            //åˆ›å»ºæ‰§è¡Œå¯¹è±¡
            statement = connection.createStatement();
            //æ‰§è¡ŒSQLè¯­å¥
            String SQL = &quot;select * from client where c_mail is not null;&quot;;
            resultSet = statement.executeQuery(SQL);
            //è¾“å‡ºæŸ¥è¯¢ç»“æœ
            System.out.println(&quot;å§“å\té‚®ç®±\t\t\t\tç”µè¯&quot;);
            while (resultSet.next()) {
                System.out.print(resultSet.getString(&quot;c_name&quot;)+'\t');
                System.out.print(resultSet.getString(&quot;c_mail&quot;)+&quot;\t\t&quot;);
                System.out.println(resultSet.getString(&quot;c_phone&quot;));
            }
 
         } catch (ClassNotFoundException e) {
            System.out.println(&quot;Sorry,can`t find the JDBC Driver!&quot;); 
            e.printStackTrace();
        } catch (SQLException throwables) {
            throwables.printStackTrace();
        } finally {
            try {
                if (resultSet != null) {
                    resultSet.close();
                }
                if (statement != null) {
                    statement.close();
                }

                if (connection != null) {
                    connection.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
    }
}
</code></pre>
<h3 id="112-ç”¨æˆ·ç™»å½•">11.2 ç”¨æˆ·ç™»å½•</h3>
<p>ç¼–ç¨‹ä½“éªŒå®¢æˆ·ç™»å½•åŠŸèƒ½.ç¨‹åºå…ˆåæç¤ºå®¢æˆ·è¾“ç”¨æˆ·åå’Œå¯†ç : è¯·è¾“å…¥ç”¨æˆ·åï¼š è¯·è¾“å…¥å¯†ç ï¼š å®¢æˆ·çš„é‚®ç®±(c_mail)å……å½“ç”¨æˆ·å,è€Œä¸æ˜¯ç¼–å·(c_id).é€šå¸¸é‚®ç®±æ›´å®¹æ˜“è®°ä½. æ ¹æ®å®¢æˆ·çš„è¾“å…¥,è¾“å‡ºä»¥ä¸‹ä¸¤ç±»ä¿¡æ¯ä¹‹ä¸€:</p>
<ul>
<li>
<p>ç™»å½•æˆåŠŸã€‚</p>
</li>
<li>
<p>ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼</p>
<p>å¦‚æœç”¨æˆ·åå’Œå¯†ç åŒ¹é…æˆåŠŸ,è¾“å‡ºå‰è€…,å…¶å®ƒæƒ…å†µè¾“å‡ºåè€…(åŒ…æ‹¬è¯¥ç”¨æˆ·ä¸å­˜åœ¨).é€šå¸¸è¢«æ¶æ„ç”¨æˆ·è¯•æ¢å‡ºç”¨æˆ·å,ä¹Ÿä¼šå¸¦æ¥ä¸è‰¯åæœ.</p>
</li>
</ul>
<p>è¯·åœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘çª—è¡¥å……ä»£ç ï¼Œå®Œæˆç¼–ç¨‹ä»»åŠ¡ã€‚</p>
<pre><code class="language-java">import java.sql.*;
import java.util.Scanner;

public class Login {
    public static void main(String[] args) {
        Connection connection = null;
        //ç”³æ˜ä¸‹æ–‡ä¸­çš„resultSet, statement
        Statement statement = null;
        ResultSet resultSet = null;


        Scanner input = new Scanner(System.in);

        System.out.print(&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;);
        String loginName = input.nextLine();
        System.out.print(&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;);
        String loginPass = input.nextLine();

        try {
            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);

            String userName = &quot;root&quot;;
            String passWord = &quot;123123&quot;;
            String url = &quot;jdbc:mysql://127.0.0.1:3306/finance?useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
            connection = DriverManager.getConnection(url, userName, passWord);
            // è¡¥å……å®ç°ä»£ç :
            statement = connection.createStatement();
            String SQL=&quot;SELECT * FROM client WHERE c_mail='&quot;+loginName+&quot;';&quot;;
            resultSet = statement.executeQuery(SQL); 
            if(resultSet.next()){//æœ‰æŸ¥è¯¢ç»“æœ
                if(resultSet.getString(&quot;c_password&quot;).equals(loginPass)){
                    System.out.print(&quot;ç™»å½•æˆåŠŸã€‚\n&quot;);
                }
                else{
                    System.out.print(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼\n&quot;);
                }
            }
            else{
                System.out.print(&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼\n&quot;);
            }

            

         } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (SQLException throwables) {
            throwables.printStackTrace();
        } finally {
            try {
                if (resultSet != null) {
                    resultSet.close();
                }
                if (statement != null) {
                    statement.close();
                }

                if (connection != null) {
                    connection.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
    }
}
</code></pre>
<h3 id="113-æ·»åŠ æ–°å®¢æˆ·">11.3 æ·»åŠ æ–°å®¢æˆ·</h3>
<p>æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®ç°å‘clientè¡¨æ’å…¥å®¢æˆ·ä¿¡æ¯çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-java">public static int insertClient(Connection connection,int c_id, String c_name, String c_mail,           String c_id_card, String c_phone,String c_password){
    
}
</code></pre>
<p>insertClient()æ–¹æ³•çš„æ¯ä¸ªå‚æ•°éƒ½åœ¨æ³¨é‡Šä¸­è¿›è¡Œäº†è¯¦ç»†çš„è¯´æ˜ã€‚ insertClient()æ–¹æ³•è¿”å›æ’å…¥çš„è¡Œæ•°ï¼Œå°½ç®¡main()æ–¹æ³•åœ¨è°ƒæ—¶å¹¶æ²¡æœ‰æ£€æŸ¥è¯¥è¿”å›å€¼(è¯„æµ‹ç¨‹åºèƒ½æ£€æŸ¥å‡ºæ˜¯å¦æ’å…¥æ˜¯å¦æˆåŠŸ)ã€‚ å‡å®šè¾“å…¥çš„å®¢æˆ·ä¿¡æ¯æ²¡æœ‰é”™è¯¯éœ€è¦å¤„ç†(æ¯”å¦‚å®¢æˆ·ç¼–å·ä¸æ˜¯æ•´æ•°ï¼Œä¿¡æ¯é¡¹ç¼ºå¤±ç­‰å¼‚å¸¸æƒ…å†µ)ã€‚</p>
<p>è¯·ä¸è¦ä¿®æ”¹main()æ–¹æ³•ã€‚</p>
<pre><code class="language-java">import java.sql.*;
import java.util.Scanner;

public class AddClient {
    static final String JDBC_DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;
    static final String DB_URL = &quot;jdbc:mysql://127.0.0.1:3306/finance?allowPublicKeyRetrieval=true&amp;useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
    static final String USER = &quot;root&quot;;
    static final String PASS = &quot;123123&quot;;
    /**
     * å‘Clientè¡¨ä¸­æ’å…¥æ•°æ®
     *
     * @param connection æ•°æ®åº“è¿æ¥å¯¹è±¡
     * @param c_id å®¢æˆ·ç¼–å·
     * @param c_name å®¢æˆ·åç§°
     * @param c_mail å®¢æˆ·é‚®ç®±
     * @param c_id_card å®¢æˆ·èº«ä»½è¯
     * @param c_phone å®¢æˆ·æ‰‹æœºå·
     * @param c_password å®¢æˆ·ç™»å½•å¯†ç 
     */
    public static int insertClient(Connection connection,
                                   int c_id, String c_name, String c_mail,
                                   String c_id_card, String c_phone, 
                                   String c_password){
        int n=0;
        PreparedStatement pps = null;
        try{
            String SQL=&quot;INSERT INTO client VALUES(?,?,?,?,?,?);&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setInt(1,c_id);
            pps.setString(2,c_name);
            pps.setString(3,c_mail);
            pps.setString(4,c_id_card);
            pps.setString(5,c_phone);
            pps.setString(6,c_password);
            n=pps.executeUpdate();
        }catch (SQLException throwables) {
            throwables.printStackTrace();
        } finally {
            try {
                if (pps != null) {
                    pps.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
        return n;
    }

    // ä¸è¦ä¿®æ”¹main() 
    public static void main(String[] args) throws Exception {

        Scanner sc = new Scanner(System.in);
        Class.forName(JDBC_DRIVER);

        Connection connection = DriverManager.getConnection(DB_URL, USER, PASS);

        while(sc.hasNext())
        {
            String input = sc.nextLine();
            if(input.equals(&quot;&quot;))
                break;

            String[]commands = input.split(&quot; &quot;);
            if(commands.length ==0)
                break;
            int id = Integer.parseInt(commands[0]);
            String name = commands[1];
            String mail = commands[2];
            String idCard = commands[3];
            String phone = commands[4];
            String password = commands[5];

            insertClient(connection, id, name, mail, idCard, phone, password);
        }
    }

}
</code></pre>
<h3 id="114-é“¶è¡Œå¡é”€æˆ·">11.4 é“¶è¡Œå¡é”€æˆ·</h3>
<p>æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®ç°å‘é“¶è¡Œå¡é”€å·çš„æ–¹æ³•ï¼Œåªè¦å®¢æˆ·ç¼–å·å’Œé“¶è¡Œå¡å·åŒ¹é…ï¼Œå³ä»bank_cardè¡¨ä¸­åˆ é™¤è¯¥é“¶è¡Œå¡ã€‚è‡³äºå¡å†…ä½™é¢æˆ–ä¿¡ç”¨å¡çš„æ¬ æ¬¾ï¼Œç”±å®¢æˆ·åœ¨æŸœå°å½“é¢ç»“æ¸…ï¼Œç¨‹åºä¸ç”¨è€ƒè™‘å…¶å®ƒäº‹é¡¹ã€‚</p>
<pre><code class="language-java">public static int removeBankCard(Connection connection,int b_c_id, String b_number){
}
</code></pre>
<p>removeBankCard()æ–¹æ³•çš„æ¯ä¸ªå‚æ•°éƒ½åœ¨æ³¨é‡Šä¸­è¿›è¡Œäº†è¯¦ç»†çš„è¯´æ˜ã€‚ removeBankCard()æ–¹æ³•è¿”å›è¢«åˆ é™¤çš„è¡Œæ•°ã€‚ å‡å®šè¾“å…¥çš„å®¢æˆ·ä¿¡æ¯æ²¡æœ‰é”™è¯¯éœ€è¦å¤„ç†(æ¯”å¦‚å®¢æˆ·ç¼–å·ä¸æ˜¯æ•´æ•°ï¼Œä¿¡æ¯é¡¹ç¼ºå¤±ç­‰å¼‚å¸¸æƒ…å†µ)ã€‚</p>
<p>è¯·ä¸è¦ä¿®æ”¹main()æ–¹æ³•ã€‚</p>
<pre><code class="language-java">import java.sql.*;
import java.util.Scanner;

public class RemoveCard {
    static final String JDBC_DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;
    static final String DB_URL = &quot;jdbc:mysql://127.0.0.1:3306/finance?allowPublicKeyRetrieval=true&amp;useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
    static final String USER = &quot;root&quot;;
    static final String PASS = &quot;123123&quot;;
    /**
     * åˆ é™¤bank_cardè¡¨ä¸­æ•°æ®
     *
     * @param connection æ•°æ®åº“è¿æ¥å¯¹è±¡
     * @param b_c_id å®¢æˆ·ç¼–å·
     * @param c_number é“¶è¡Œå¡å·
     */
    public static int removeBankCard(Connection connection,
                                   int b_c_id, String b_number){
        int n=0;
        PreparedStatement pps = null;
        try{
            String SQL=&quot;DELETE FROM bank_card WHERE b_c_id=? AND b_number=? ;&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setInt(1,b_c_id);
            pps.setString(2,b_number);
            n=pps.executeUpdate();
        }catch (SQLException throwables) {
            throwables.printStackTrace();
        } finally {
            try {
                if (pps != null) {
                    pps.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }
        return n;
    }

    // ä¸è¦ä¿®æ”¹main() 
    public static void main(String[] args) throws Exception {

        Scanner sc = new Scanner(System.in);
        Class.forName(JDBC_DRIVER);

        Connection connection = DriverManager.getConnection(DB_URL, USER, PASS);

        while(sc.hasNext())
        {
            String input = sc.nextLine();
            if(input.equals(&quot;&quot;))
                break;

            String[]commands = input.split(&quot; &quot;);
            if(commands.length ==0)
                break;
            int id = Integer.parseInt(commands[0]);
            String carNumber = commands[1];
            
            int n = removeBankCard(connection, id, carNumber);
            if (n &gt; 0) {
               System.out.println(&quot;å·²é”€å¡æ•°ï¼š&quot; + n);
            } else {
               System.out.println(&quot;é”€æˆ·å¤±è´¥ï¼Œè¯·æ£€æŸ¥å®¢æˆ·ç¼–å·æˆ–é“¶è¡Œå¡å·ï¼&quot; );
            }
        }
    }

}
</code></pre>
<h3 id="115-å®¢æˆ·ä¿®æ”¹å¯†ç ">11.5 å®¢æˆ·ä¿®æ”¹å¯†ç </h3>
<p>æ ¹æ®æç¤ºï¼Œåœ¨å³ä¾§ä»£ç æ–‡ä»¶ç¼–è¾‘å™¨è¡¥å……ä»£ç ï¼Œå®ç°ä¿®æ”¹å¯†ç çš„æ–¹æ³•passwd()ã€‚å®¢æˆ·ä¿®æ”¹å¯†ç é€šå¸¸éœ€è¦ç¡®è®¤å®¢æˆ·èº«ä»½ï¼Œå³å®¢æˆ·éœ€æä¾›ç”¨æˆ·å(ä»¥é‚®ç®±ä¸ºç”¨æˆ·å)å’Œå¯†ç ï¼ŒåŒæ—¶è¿˜éœ€è¦è¾“ä¸¤æ¬¡æ–°å¯†ç ï¼Œä»¥å…å®¢æˆ·å®é™…è¾“å…¥çš„å¯†ç ä¸å¿ƒä¸­æƒ³çš„ä¸ä¸€è‡´ï¼Œåªæœ‰å½“æ‰€æœ‰æ¡ä»¶(åˆæ³•çš„å®¢æˆ·ï¼Œä¸¤æ¬¡å¯†ç è¾“å…¥ä¸€è‡´)æ—¶æ‰ä¿®æ”¹å¯†ç ã€‚main()æ–¹æ³•åœ¨è°ƒç”¨passwd()ä¹‹å‰ï¼Œä¼šå…ˆæ£€æŸ¥æ–°è®¾å¯†ç çš„ä¸¤æ¬¡è¾“å…¥æ˜¯å¦ä¸€è‡´ï¼Œåªæœ‰åœ¨ä¸¤æ¬¡è¾“å…¥ä¸€è‡´çš„æƒ…å½¢ä¸‹æ‰ä¼šè°ƒç”¨passwd();</p>
<pre><code class="language-java">public static int insertClient(Connection connection,String mail,String password,String newPass){
    
}
</code></pre>
<p>passwd()æ–¹æ³•çš„æ¯ä¸ªå‚æ•°éƒ½åœ¨æ³¨é‡Šä¸­è¿›è¡Œäº†è¯¦ç»†çš„è¯´æ˜ã€‚ passwd()æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´æ•°ï¼š<br>
1 - å¯†ç ä¿®æ”¹æˆåŠŸ<br>
2 - ç”¨æˆ·ä¸å­˜åœ¨<br>
3 - å¯†ç ä¸æ­£ç¡®<br>
-1 - ç¨‹åºå¼‚å¸¸(å¦‚æ²¡èƒ½è¿æ¥åˆ°æ•°æ®åº“ç­‰ï¼‰</p>
<p>è¯·ä¸è¦ä¿®æ”¹main()æ–¹æ³•ã€‚</p>
<pre><code class="language-java">import java.sql.*;
import java.util.Scanner;

public class ChangePass {
    static final String JDBC_DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;
    static final String DB_URL = &quot;jdbc:mysql://127.0.0.1:3306/finance?allowPublicKeyRetrieval=true&amp;useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
    static final String USER = &quot;root&quot;;
    static final String PASS = &quot;123123&quot;;
    /**
     * ä¿®æ”¹å®¢æˆ·å¯†ç 
     *
     * @param connection æ•°æ®åº“è¿æ¥å¯¹è±¡
     * @param mail å®¢æˆ·é‚®ç®±,ä¹Ÿæ˜¯ç™»å½•å
     * @param password å®¢æˆ·ç™»å½•å¯†ç 
     * @param newPass  æ–°å¯†ç 
     * @return
     *   1 - å¯†ç ä¿®æ”¹æˆåŠŸ
     *   2 - ç”¨æˆ·ä¸å­˜åœ¨
     *   3 - å¯†ç ä¸æ­£ç¡®
     *  -1 - ç¨‹åºå¼‚å¸¸(å¦‚æ²¡èƒ½è¿æ¥åˆ°æ•°æ®åº“ç­‰ï¼‰
     */
    public static int passwd(Connection connection,
                             String mail,
                             String password, 
                             String newPass){
        int n=0;
        PreparedStatement pps = null;
        ResultSet resultSet = null;
        try{
            //é¦–å…ˆç¡®è®¤ç”¨æˆ·æ˜¯å¦å­˜åœ¨
            String SQL=&quot;SELECT * FROM client WHERE c_mail=?;&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setString(1,mail);
            resultSet = pps.executeQuery();
            if(resultSet.next()){//æŸ¥è¯¢åˆ°äº†ç”¨æˆ·
                SQL=&quot;SELECT * FROM client WHERE c_mail=? AND c_password=? ;&quot;;
                pps=connection.prepareStatement(SQL);
                pps.setString(1,mail);
                pps.setString(2,password);
                resultSet = pps.executeQuery();
                if(resultSet.next()){//å¯†ç æ­£ç¡®
                    SQL=&quot;UPDATE client SET c_password = ? where c_mail = ?;&quot;;
                    pps=connection.prepareStatement(SQL);
                    pps.setString(1,newPass);
                    pps.setString(2,mail);
                    n = pps.executeUpdate();
                }
                else{//å¯†ç é”™è¯¯
                    n=3;
                }
            }
            else{//æœªæŸ¥è¯¢åˆ°ç”¨æˆ·
                n=2;
            }
        }catch (SQLException throwables) {
            throwables.printStackTrace();
            n = -1;
        } finally {
            try {
                if (pps != null) {
                    pps.close();
                }
                if (resultSet != null) {
                    resultSet.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
                n = -1;
            }
        }
        return n;
    }

    // ä¸è¦ä¿®æ”¹main() 
    public static void main(String[] args) throws Exception {

        Scanner sc = new Scanner(System.in);
        Class.forName(JDBC_DRIVER);

        Connection connection = DriverManager.getConnection(DB_URL, USER, PASS);

        while(sc.hasNext())
        {
            String input = sc.nextLine();
            if(input.equals(&quot;&quot;))
                break;

            String[]commands = input.split(&quot; &quot;);
            if(commands.length ==0)
                break;
            String email = commands[0];
            String pass = commands[1];
            String pwd1 = commands[2];
            String pwd2 = commands[3];
            if (pwd1.equals(pwd2)) {
              int n = passwd(connection, email, pass, pwd1);  
              System.out.println(&quot;return: &quot; + n);
            } else {
              System.out.println(&quot;ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€æ ·!&quot;);
            }
        }
    }

}
</code></pre>
<h3 id="116-äº‹åŠ¡ä¸è½¬è´¦æ“ä½œ">11.6 äº‹åŠ¡ä¸è½¬è´¦æ“ä½œ</h3>
<p>ç¼–å†™ä¸€ä¸ªé“¶è¡Œå¡è½¬è´¦çš„æ–¹æ³•transferBalance()ã€‚</p>
<p>transferBalance()åœ¨è¢«è°ƒç”¨å‰ï¼ŒæŸœå°å·²ç»ç¡®è®¤è¿‡è½¬å‡ºå¸å·æŒæœ‰è€…èº«ä»½ï¼Œæ‰€ä»¥è½¬å¸æ–¹æ³•åªæ¥å—è½¬å‡ºå¡å·ï¼Œè½¬å…¥å¡å·å’Œè½¬è´¦é‡‘é¢ä¸‰ä¸ªå‚æ•°ã€‚ç”±è°ƒç”¨è€…ä¿è¯è½¬è´¦é‡‘é¢ä¸ºæ­£æ•°ã€‚ transferBalance()æ–¹æ³•çš„æ¯ä¸ªå‚æ•°éƒ½åœ¨æ³¨é‡Šä¸­è¿›è¡Œäº†è¯¦ç»†çš„è¯´æ˜ã€‚ transferBalance()è¿”å›booleanå€¼ï¼Œtrueè¡¨ç¤ºè½¬å¸æˆåŠŸï¼Œfalseè¡¨ç¤ºè½¬è´¦å¤±è´¥ï¼Œå¹¶ä¸éœ€è¦ç»†åˆ†æˆ–è§£é‡Šå¤±è´¥çš„åŸå› ã€‚ ä¸‹åˆ—ä»»ä¸€æƒ…å½¢éƒ½ä¸å¯è½¬è´¦(è½¬è´¦å¤±è´¥çš„åŸå› )ï¼š è½¬å‡ºæˆ–è½¬å…¥å¸å·ä¸å­˜åœ¨ è½¬å‡ºè´¦å·æ˜¯ä¿¡ç”¨å¡ è½¬å‡ºå¸å·ä½™é¢ä¸è¶³</p>
<p>æç¤ºï¼š<br>
1.æœ¬æ–¹æ³•éœ€å¼€å¯æ‰‹å·¥äº‹åŠ¡,å¹¶æ­£ç¡®ä½¿ç”¨commitå’Œrollbackï¼›<br>
2.å½“è½¬å…¥å¡æ˜¯ä¿¡ç”¨å¡æ—¶ï¼Œæ„æŒ‡ä¿¡ç”¨å¡è¿˜æ¬¾ï¼Œè¿˜æ¬¾å¯ä»¥è¶…è¿‡é€æ”¯æ¬¾é¡¹ï¼›<br>
3.å¯¹äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ä¸ä½œè¦æ±‚ã€‚</p>
<p>è¯·ä¸è¦ä¿®æ”¹main()æ–¹æ³•ã€‚</p>
<p>é™„:bank_card(é“¶è¡Œå¡)çš„è¡¨ç»“æ„ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µåç§°</th>
<th>æ•°æ®ç±»å‹</th>
<th>çº¦æŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>b_number</td>
<td>CHAR(30)</td>
<td>PRIMARY KEY</td>
<td>é“¶è¡Œå¡å·</td>
</tr>
<tr>
<td>b_type</td>
<td>CHAR(20)</td>
<td>æ— </td>
<td>é“¶è¡Œå¡ç±»å‹(å‚¨è“„å¡/ä¿¡ç”¨å¡)</td>
</tr>
<tr>
<td>b_c_id</td>
<td>INTEGER</td>
<td>NOT NULL FOREIGN KEY</td>
<td>æ‰€å±å®¢æˆ·ç¼–å·,å¼•ç”¨è‡ªclientè¡¨çš„c_idå­—æ®µã€‚</td>
</tr>
<tr>
<td>b_balance</td>
<td>NUMERIC(10,2)</td>
<td>NOT NULL</td>
<td>ä½™é¢,ä¿¡ç”¨å¡ä½™é¢ç³»æŒ‡å·²é€æ”¯</td>
</tr>
</tbody>
</table>
<pre><code class="language-java">import java.sql.*;
import java.util.Scanner;

public class Transfer {
    static final String JDBC_DRIVER = &quot;com.mysql.cj.jdbc.Driver&quot;;
    static final String DB_URL = &quot;jdbc:mysql://127.0.0.1:3306/finance?allowPublicKeyRetrieval=true&amp;useUnicode=true&amp;characterEncoding=UTF8&amp;useSSL=false&amp;serverTimezone=UTC&quot;;
    static final String USER = &quot;root&quot;;
    static final String PASS = &quot;123123&quot;;
    /**
     * è½¬è´¦æ“ä½œ
     *
     * @param connection æ•°æ®åº“è¿æ¥å¯¹è±¡
     * @param sourceCard è½¬å‡ºè´¦å·
     * @param destCard è½¬å…¥è´¦å·
     * @param amount  è½¬è´¦é‡‘é¢
     * @return boolean
     *   true  - è½¬è´¦æˆåŠŸ
     *   false - è½¬è´¦å¤±è´¥
     */
    public static boolean transferBalance(Connection connection,
                             String sourceCard,
                             String destCard, 
                             double amount){
        PreparedStatement pps = null;
        ResultSet resultSet = null;
        boolean n = true;
        try{
            connection.setAutoCommit(false);//ç¦æ­¢è‡ªåŠ¨æäº¤
            
            String SQL=&quot;UPDATE bank_card SET b_balance = b_balance - ? WHERE b_number = ? AND b_type='å‚¨è“„å¡';&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setDouble(1,amount);
            pps.setString(2,sourceCard);
            pps.executeUpdate();
            
            SQL=&quot;UPDATE bank_card SET b_balance = b_balance + ? WHERE b_number = ? AND b_type='å‚¨è“„å¡' ;&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setDouble(1,amount);
            pps.setString(2,destCard);
            pps.executeUpdate();

            SQL=&quot;UPDATE bank_card SET b_balance = b_balance - ? WHERE b_number = ? AND b_type='ä¿¡ç”¨å¡' ;&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setDouble(1,amount);
            pps.setString(2,destCard);
            pps.executeUpdate();

            SQL=&quot;SELECT * FROM bank_card WHERE b_number=? AND b_type='å‚¨è“„å¡' ;&quot;;
            pps=connection.prepareStatement(SQL);
            pps.setString(1,sourceCard);
            resultSet = pps.executeQuery();
            if(!resultSet.next()){//ä¸å­˜åœ¨è½¬å‡ºå¡
                n=false;
                connection.rollback();
            }
            else{//å­˜åœ¨è½¬å‡ºå¡
                if(resultSet.getDouble(&quot;b_balance&quot;)&lt;0){//å½“å‰b_balanceä¸ºè½¬å‡ºçš„çŠ¶æ€
                    n=false;
                    connection.rollback();
                }
                else{
                    //åˆ¤æ–­è½¬å‡ºå¡æ˜¯å¦å­˜åœ¨
                    SQL=&quot;SELECT * FROM bank_card WHERE b_number=? ;&quot;;
                    pps=connection.prepareStatement(SQL);
                    pps.setString(1,destCard);
                    resultSet = pps.executeQuery();
                    if(!resultSet.next()){
                        n=false;
                        connection.rollback();
                    }
                    else connection.commit();
                }
            }
        }catch (SQLException throwables) {
            throwables.printStackTrace();
            n = false;
        } finally {
            try {
                if (pps != null) {
                    pps.close();
                }
                if (resultSet != null) {
                    resultSet.close();
                }
            } catch (SQLException throwables) {
                throwables.printStackTrace();
                n = false;
            }
        }
        return n;
    }

    // ä¸è¦ä¿®æ”¹main() 
    public static void main(String[] args) throws Exception {

        Scanner sc = new Scanner(System.in);
        Class.forName(JDBC_DRIVER);

        Connection connection = DriverManager.getConnection(DB_URL, USER, PASS);

        while(sc.hasNext())
        {
            String input = sc.nextLine();
            if(input.equals(&quot;&quot;))
                break;

            String[]commands = input.split(&quot; &quot;);
            if(commands.length ==0)
                break;
            String payerCard = commands[0];
            String  payeeCard = commands[1];
            double  amount = Double.parseDouble(commands[2]);
            if (transferBalance(connection, payerCard, payeeCard, amount)) {
              System.out.println(&quot;è½¬è´¦æˆåŠŸã€‚&quot; );
            } else {
              System.out.println(&quot;è½¬è´¦å¤±è´¥,è¯·æ ¸å¯¹å¡å·ï¼Œå¡ç±»å‹åŠå¡ä½™é¢!&quot;);
            }
        }
    }

}
</code></pre>

            </div>
            <hr style="width: 80%;">
            
            <div class="postfooter">
                <ul class="post-copyright">
                    <li><strong>æ–‡ç« ä½œè€…ï¼š</strong>w_CS</li>
            <li><strong>åŸæ–‡é“¾æ¥ï¼š</strong>https://2006wzt.github.io/post/æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºå®éªŒ/</li>
            <li><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA
                è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li>
            </ul>
        </div>
        
            <div class="shareContainer">
                <div class="share" style="height:30px;">
                    <a class="qq" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/qqs.png" alt=""></i></a>
                    <a class="wechat" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/wechats.png" alt=""></i></a>
                    <a class="weibo" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/weibos.png" alt=""></i></a>
                    <a class="qzone" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/qzones.png" alt=""></i></a>
                    <a class="douban" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/doubans.png" alt=""></i></a>
                    <a class="facebook" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/facebooks.png" alt=""></i></a>
                    <a class="twitter" href=""><i><img class="shareicon"
                                src="https://2006wzt.github.io/media/images/twitter.png" alt=""></i></a>
                </div>
            </div>
            
        <div id="otherpost">
            
            
            <a data-pjax class="next-post-pc" href="https://2006wzt.github.io/post/socketç¼–ç¨‹å®éªŒ/"  style="color: black;">
                <div id="npcontainer">
                    
                    <img src="https://2006wzt.github.io/post-images/socketç¼–ç¨‹å®éªŒ.png" style="width: 100%;" class="opimg">
                    
                    <h4 class="optitle">Socketç¼–ç¨‹å®éªŒ</h4>
                </div>
            </a>
            <div class="next-post">
                ä¸‹ä¸€ç¯‡ <a  data-pjax href="https://2006wzt.github.io/post/socketç¼–ç¨‹å®éªŒ/">Socketç¼–ç¨‹å®éªŒ</a>
            </div>
            
        </div>
    </div>
    </div>
    </div>
    <!-- å¼¹çª— -->
    <div id="myModal" class="modal">
        <img class="modal-content" id="img01">
    </div>
</body>
<script>
    //æ–‡ç« é˜…è¯»çƒ­åº¦
    var pl = $("#pl").html();
    var rootaddr = $("#rootaddr").html();
    pl = pl.replace(rootaddr, "");
    $("#hotnum").attr('id', pl);
</script>
                    <div class="toc-container">
                        <ul class="markdownIt-TOC">
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%9E%E9%AA%8C">æ•°æ®åº“å®éªŒ</a>
<ul>
<li><a href="#%E4%B8%80-%E5%AE%9E%E8%AE%AD1-%E6%95%B0%E6%8D%AE%E5%BA%93-%E8%A1%A8%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F%E7%9A%84%E5%AE%9A%E4%B9%89create">ä¸€ã€<strong>å®è®­1 æ•°æ®åº“ã€è¡¨ä¸å®Œæ•´æ€§çº¦æŸçš„å®šä¹‰(Create)</strong></a>
<ul>
<li><a href="#11-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93">1.1 åˆ›å»ºæ•°æ®åº“</a></li>
<li><a href="#12-%E5%88%9B%E5%BB%BA%E8%A1%A8%E5%8F%8A%E8%A1%A8%E7%9A%84%E4%B8%BB%E7%A0%81%E7%BA%A6%E6%9D%9F">1.2 åˆ›å»ºè¡¨åŠè¡¨çš„ä¸»ç çº¦æŸ</a></li>
<li><a href="#13-%E5%88%9B%E5%BB%BA%E5%A4%96%E7%A0%81%E7%BA%A6%E6%9D%9Fforeign-key">1.3 åˆ›å»ºå¤–ç çº¦æŸ(foreign key)</a></li>
<li><a href="#14-check%E7%BA%A6%E6%9D%9F">1.4 CHECKçº¦æŸ</a></li>
<li><a href="#15-default%E7%BA%A6%E6%9D%9F">1.5 DEFAULTçº¦æŸ</a></li>
<li><a href="#16-unique%E7%BA%A6%E6%9D%9F">1.6 UNIQUEçº¦æŸ</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C-%E5%AE%9E%E8%AE%AD2-%E8%A1%A8%E7%BB%93%E6%9E%84%E4%B8%8E%E5%AE%8C%E6%95%B4%E6%80%A7%E7%9A%84%E4%BF%AE%E6%94%B9alter">äºŒã€å®è®­2 è¡¨ç»“æ„ä¸å®Œæ•´æ€§çš„ä¿®æ”¹(ALTER)</a>
<ul>
<li><a href="#21-%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D">2.1 ä¿®æ”¹è¡¨å</a></li>
<li><a href="#22-%E6%B7%BB%E5%8A%A0%E4%B8%8E%E5%88%A0%E9%99%A4%E5%AD%97%E6%AE%B5">2.2 æ·»åŠ ä¸åˆ é™¤å­—æ®µ</a></li>
<li><a href="#23-%E4%BF%AE%E6%94%B9%E5%AD%97%E6%AE%B5">2.3 ä¿®æ”¹å­—æ®µ</a></li>
<li><a href="#24-%E6%B7%BB%E5%8A%A0-%E5%88%A0%E9%99%A4%E4%B8%8E%E4%BF%AE%E6%94%B9%E7%BA%A6%E6%9D%9F">2.4 æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹çº¦æŸ</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89-%E5%AE%9E%E8%AE%AD3-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2select%E4%B9%8B%E4%B8%80">ä¸‰ã€<strong>å®è®­3 æ•°æ®æŸ¥è¯¢(Select)ä¹‹ä¸€</strong></a>
<ul>
<li><a href="#31-%E6%9F%A5%E8%AF%A2%E5%AE%A2%E6%88%B7%E4%B8%BB%E8%A6%81%E4%BF%A1%E6%81%AF">3.1 æŸ¥è¯¢å®¢æˆ·ä¸»è¦ä¿¡æ¯</a></li>
<li><a href="#32-%E9%82%AE%E7%AE%B1%E4%B8%BAnull%E7%9A%84%E5%AE%A2%E6%88%B7">3.2 é‚®ç®±ä¸ºnullçš„å®¢æˆ·</a></li>
<li><a href="#33-%E6%97%A2%E4%B9%B0%E4%BA%86%E4%BF%9D%E9%99%A9%E5%8F%88%E4%B9%B0%E4%BA%86%E5%9F%BA%E9%87%91%E7%9A%84%E5%AE%A2%E6%88%B7">3.3 æ—¢ä¹°äº†ä¿é™©åˆä¹°äº†åŸºé‡‘çš„å®¢æˆ·</a></li>
<li><a href="#34-%E5%8A%9E%E7%90%86%E4%BA%86%E5%82%A8%E8%93%84%E5%8D%A1%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">3.4 åŠç†äº†å‚¨è“„å¡çš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#35-%E6%AF%8F%E4%BB%BD%E9%87%91%E9%A2%9D%E5%9C%A830000~50000%E4%B9%8B%E9%97%B4%E7%9A%84%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81">3.5 æ¯ä»½é‡‘é¢åœ¨30000ï½50000ä¹‹é—´çš„ç†è´¢äº§å“</a></li>
<li><a href="#36-%E5%95%86%E5%93%81%E6%94%B6%E7%9B%8A%E7%9A%84%E4%BC%97%E6%95%B0">3.6 å•†å“æ”¶ç›Šçš„ä¼—æ•°</a></li>
<li><a href="#37-%E6%9C%AA%E8%B4%AD%E4%B9%B0%E4%BB%BB%E4%BD%95%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81%E7%9A%84%E6%AD%A6%E6%B1%89%E5%B1%85%E6%B0%91">3.7 æœªè´­ä¹°ä»»ä½•ç†è´¢äº§å“çš„æ­¦æ±‰å±…æ°‘</a></li>
<li><a href="#38-%E6%8C%81%E6%9C%89%E4%B8%A4%E5%BC%A0%E4%BF%A1%E7%94%A8%E5%8D%A1%E7%9A%84%E7%94%A8%E6%88%B7">3.8 æŒæœ‰ä¸¤å¼ ä¿¡ç”¨å¡çš„ç”¨æˆ·</a></li>
<li><a href="#39-%E8%B4%AD%E4%B9%B0%E4%BA%86%E8%B4%A7%E5%B8%81%E5%9E%8B%E5%9F%BA%E9%87%91%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">3.9 è´­ä¹°äº†è´§å¸å‹åŸºé‡‘çš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#310-%E6%8A%95%E8%B5%84%E6%80%BB%E6%94%B6%E7%9B%8A%E5%89%8D%E4%B8%89%E5%90%8D%E7%9A%84%E5%AE%A2%E6%88%B7">3.10 æŠ•èµ„æ€»æ”¶ç›Šå‰ä¸‰åçš„å®¢æˆ·</a></li>
<li><a href="#311-%E9%BB%84%E5%A7%93%E5%AE%A2%E6%88%B7%E6%8C%81%E5%8D%A1%E6%95%B0%E9%87%8F">3.11 é»„å§“å®¢æˆ·æŒå¡æ•°é‡</a></li>
<li><a href="#312-%E5%AE%A2%E6%88%B7%E7%90%86%E8%B4%A2-%E4%BF%9D%E9%99%A9%E4%B8%8E%E5%9F%BA%E9%87%91%E6%8A%95%E8%B5%84%E6%80%BB%E9%A2%9D">3.12 å®¢æˆ·ç†è´¢ã€ä¿é™©ä¸åŸºé‡‘æŠ•èµ„æ€»é¢</a></li>
<li><a href="#313-%E5%AE%A2%E6%88%B7%E6%80%BB%E8%B5%84%E4%BA%A7">3.13 å®¢æˆ·æ€»èµ„äº§</a></li>
<li><a href="#314-%E7%AC%ACn%E9%AB%98%E9%97%AE%E9%A2%98">3.14 ç¬¬Né«˜é—®é¢˜</a></li>
<li><a href="#315-%E5%9F%BA%E9%87%91%E6%94%B6%E7%9B%8A%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%8E%92%E5%90%8D">3.15 åŸºé‡‘æ”¶ç›Šä¸¤ç§æ–¹å¼æ’å</a></li>
<li><a href="#316-%E6%8C%81%E6%9C%89%E5%AE%8C%E5%85%A8%E7%9B%B8%E5%90%8C%E5%9F%BA%E9%87%91%E7%BB%84%E5%90%88%E7%9A%84%E5%AE%A2%E6%88%B7">3.16 æŒæœ‰å®Œå…¨ç›¸åŒåŸºé‡‘ç»„åˆçš„å®¢æˆ·</a></li>
<li><a href="#317-%E8%B4%AD%E4%B9%B0%E5%9F%BA%E9%87%91%E7%9A%84%E9%AB%98%E5%B3%B0%E6%9C%9F">3.17 è´­ä¹°åŸºé‡‘çš„é«˜å³°æœŸ</a></li>
<li><a href="#318-%E8%87%B3%E5%B0%91%E6%9C%89%E4%B8%80%E5%BC%A0%E4%BF%A1%E7%94%A8%E5%8D%A1%E4%BD%99%E9%A2%9D%E8%B6%85%E8%BF%875000%E5%85%83%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">3.18 è‡³å°‘æœ‰ä¸€å¼ ä¿¡ç”¨å¡ä½™é¢è¶…è¿‡5000å…ƒçš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#319-%E4%BB%A5%E6%97%A5%E5%8E%86%E8%A1%A8%E6%A0%BC%E5%BC%8F%E6%98%BE%E7%A4%BA%E6%AF%8F%E6%97%A5%E5%9F%BA%E9%87%91%E8%B4%AD%E4%B9%B0%E6%80%BB%E9%87%91%E9%A2%9D">3.19 ä»¥æ—¥å†è¡¨æ ¼å¼æ˜¾ç¤ºæ¯æ—¥åŸºé‡‘è´­ä¹°æ€»é‡‘é¢</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E5%AE%9E%E8%AE%AD4-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2select%E4%B9%8B%E4%BA%8C">å››ã€å®è®­4 æ•°æ®æŸ¥è¯¢(Select)ä¹‹äºŒ</a>
<ul>
<li><a href="#41-%E6%9F%A5%E8%AF%A2%E9%94%80%E5%94%AE%E6%80%BB%E9%A2%9D%E5%89%8D%E4%B8%89%E7%9A%84%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81">4.1 æŸ¥è¯¢é”€å”®æ€»é¢å‰ä¸‰çš„ç†è´¢äº§å“</a></li>
<li><a href="#42-%E6%8A%95%E8%B5%84%E7%A7%AF%E6%9E%81%E4%B8%94%E5%81%8F%E5%A5%BD%E7%90%86%E8%B4%A2%E7%B1%BB%E4%BA%A7%E5%93%81%E7%9A%84%E5%AE%A2%E6%88%B7">4.2 æŠ•èµ„ç§¯æä¸”åå¥½ç†è´¢ç±»äº§å“çš„å®¢æˆ·</a></li>
<li><a href="#43-%E6%9F%A5%E8%AF%A2%E8%B4%AD%E4%B9%B0%E4%BA%86%E6%89%80%E6%9C%89%E7%95%85%E9%94%80%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81%E7%9A%84%E5%AE%A2%E6%88%B7">4.3 æŸ¥è¯¢è´­ä¹°äº†æ‰€æœ‰ç•…é”€ç†è´¢äº§å“çš„å®¢æˆ·</a></li>
<li><a href="#44-%E6%9F%A5%E6%89%BE%E7%9B%B8%E4%BC%BC%E7%9A%84%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81">4.4 æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢äº§å“</a></li>
<li><a href="#45-%E6%9F%A5%E8%AF%A2%E4%BB%BB%E6%84%8F%E4%B8%A4%E4%B8%AA%E5%AE%A2%E6%88%B7%E7%9A%84%E7%9B%B8%E5%90%8C%E7%90%86%E8%B4%A2%E4%BA%A7%E5%93%81%E6%95%B0">4.5 æŸ¥è¯¢ä»»æ„ä¸¤ä¸ªå®¢æˆ·çš„ç›¸åŒç†è´¢äº§å“æ•°</a></li>
<li><a href="#46-%E6%9F%A5%E6%89%BE%E7%9B%B8%E4%BC%BC%E7%9A%84%E7%90%86%E8%B4%A2%E5%AE%A2%E6%88%B7">4.6 æŸ¥æ‰¾ç›¸ä¼¼çš„ç†è´¢å®¢æˆ·</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E5%AE%9E%E8%AE%AD5-%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8F%92%E5%85%A5-%E4%BF%AE%E6%94%B9%E4%B8%8E%E5%88%A0%E9%99%A4insertupdatedelete">äº”ã€å®è®­5 æ•°æ®çš„æ’å…¥ã€ä¿®æ”¹ä¸åˆ é™¤(Insert,Update,Delete)</a>
<ul>
<li><a href="#51-%E6%8F%92%E5%85%A5%E5%A4%9A%E6%9D%A1%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">5.1 æ’å…¥å¤šæ¡å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#52-%E6%8F%92%E5%85%A5%E4%B8%8D%E5%AE%8C%E6%95%B4%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">5.2 æ’å…¥ä¸å®Œæ•´çš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#53-%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE">5.3 æ‰¹é‡æ’å…¥æ•°æ®</a></li>
<li><a href="#54-%E5%88%A0%E9%99%A4%E6%B2%A1%E6%9C%89%E9%93%B6%E8%A1%8C%E5%8D%A1%E7%9A%84%E5%AE%A2%E6%88%B7%E4%BF%A1%E6%81%AF">5.4 åˆ é™¤æ²¡æœ‰é“¶è¡Œå¡çš„å®¢æˆ·ä¿¡æ¯</a></li>
<li><a href="#55-%E5%86%BB%E7%BB%93%E5%AE%A2%E6%88%B7%E8%B5%84%E4%BA%A7">5.5 å†»ç»“å®¢æˆ·èµ„äº§</a></li>
<li><a href="#56-%E8%BF%9E%E6%8E%A5%E6%9B%B4%E6%96%B0">5.6 è¿æ¥æ›´æ–°</a></li>
</ul>
</li>
<li><a href="#%E5%85%AD-%E8%A7%86%E5%9B%BE">å…­ã€è§†å›¾</a>
<ul>
<li><a href="#61-%E5%88%9B%E5%BB%BA%E6%89%80%E6%9C%89%E4%BF%9D%E9%99%A9%E8%B5%84%E4%BA%A7%E7%9A%84%E8%AF%A6%E7%BB%86%E8%AE%B0%E5%BD%95%E8%A7%86%E5%9B%BE">6.1 åˆ›å»ºæ‰€æœ‰ä¿é™©èµ„äº§çš„è¯¦ç»†è®°å½•è§†å›¾</a></li>
<li><a href="#62-%E5%9F%BA%E4%BA%8E%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9F%A5%E8%AF%A2">6.2 åŸºäºè§†å›¾çš„æŸ¥è¯¢</a></li>
</ul>
</li>
<li><a href="#%E4%B8%83-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E4%B8%8E%E4%BA%8B%E5%8A%A1">ä¸ƒã€å­˜å‚¨è¿‡ç¨‹ä¸äº‹åŠ¡</a>
<ul>
<li><a href="#71-%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E8%AF%AD%E5%8F%A5%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">7.1 ä½¿ç”¨æµç¨‹æ§åˆ¶è¯­å¥çš„å­˜å‚¨è¿‡ç¨‹</a></li>
<li><a href="#72-%E4%BD%BF%E7%94%A8%E6%B8%B8%E6%A0%87%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">7.2 ä½¿ç”¨æ¸¸æ ‡çš„å­˜å‚¨è¿‡ç¨‹</a></li>
<li><a href="#73-%E4%BD%BF%E7%94%A8%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B">7.3 ä½¿ç”¨äº‹åŠ¡çš„å­˜å‚¨è¿‡ç¨‹</a></li>
</ul>
</li>
<li><a href="#%E5%85%AB-%E8%A7%A6%E5%8F%91%E5%99%A8">å…«ã€è§¦å‘å™¨</a>
<ul>
<li><a href="#81-%E4%B8%BA%E6%8A%95%E8%B5%84%E8%A1%A8property%E5%AE%9E%E7%8E%B0%E4%B8%9A%E5%8A%A1%E7%BA%A6%E6%9D%9F%E8%A7%84%E5%88%99-%E6%A0%B9%E6%8D%AE%E6%8A%95%E8%B5%84%E7%B1%BB%E5%88%AB%E5%88%86%E5%88%AB%E5%BC%95%E7%94%A8%E4%B8%8D%E5%90%8C%E8%A1%A8%E7%9A%84%E4%B8%BB%E7%A0%81">8.1 ä¸ºæŠ•èµ„è¡¨propertyå®ç°ä¸šåŠ¡çº¦æŸè§„åˆ™-æ ¹æ®æŠ•èµ„ç±»åˆ«åˆ†åˆ«å¼•ç”¨ä¸åŒè¡¨çš„ä¸»ç </a></li>
</ul>
</li>
<li><a href="#%E4%B9%9D-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0">ä¹ã€ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°</a>
<ul>
<li><a href="#91-%E5%88%9B%E5%BB%BA%E5%87%BD%E6%95%B0%E5%B9%B6%E5%9C%A8%E8%AF%AD%E5%8F%A5%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%AE%83">9.1 åˆ›å»ºå‡½æ•°å¹¶åœ¨è¯­å¥ä¸­ä½¿ç”¨å®ƒ</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0">åã€æ•°æ®åº“è®¾è®¡ä¸å®ç°</a>
<ul>
<li><a href="#101-%E4%BB%8E%E6%A6%82%E5%BF%B5%E6%A8%A1%E5%9E%8B%E5%88%B0mysql%E5%AE%9E%E7%8E%B0">10.1 ä»æ¦‚å¿µæ¨¡å‹åˆ°MySQLå®ç°</a></li>
</ul>
</li>
<li><a href="#%E5%8D%81%E4%B8%80-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91java%E7%AF%87">åä¸€ã€æ•°æ®åº“åº”ç”¨å¼€å‘(JAVAç¯‡)</a>
<ul>
<li><a href="#111-jdbc%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%80%E5%8D%95%E7%9A%84%E6%9F%A5%E8%AF%A2">11.1 JDBCä½“ç³»ç»“æ„å’Œç®€å•çš„æŸ¥è¯¢</a></li>
<li><a href="#112-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95">11.2 ç”¨æˆ·ç™»å½•</a></li>
<li><a href="#113-%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%AE%A2%E6%88%B7">11.3 æ·»åŠ æ–°å®¢æˆ·</a></li>
<li><a href="#114-%E9%93%B6%E8%A1%8C%E5%8D%A1%E9%94%80%E6%88%B7">11.4 é“¶è¡Œå¡é”€æˆ·</a></li>
<li><a href="#115-%E5%AE%A2%E6%88%B7%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81">11.5 å®¢æˆ·ä¿®æ”¹å¯†ç </a></li>
<li><a href="#116-%E4%BA%8B%E5%8A%A1%E4%B8%8E%E8%BD%AC%E8%B4%A6%E6%93%8D%E4%BD%9C">11.6 äº‹åŠ¡ä¸è½¬è´¦æ“ä½œ</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                    </div>
                    <div class="tog">
                        <div class="toggleContainer">
                            <div class="toggle">
                                <i class="fas fa-angle-double-up"></i>
                            </div>
                        </div>
                    </div>
                    <!---------------------------- è¯„è®ºç³»ç»ŸğŸ‘‡ ------------------------->
                    <div id="comment" class="comment">
                        <div class="commentcontainer">
                            
                                
                            
                        </div>
                    </div>
                    <!---------------------------- è¯„è®ºç³»ç»ŸğŸ‘† ------------------------->
                </div>
                <!-- mainæ ‡ç­¾ï¼Œpjaxæ¸²æŸ“æ—¶åŠ è½½ä»¥ä¸Šå†…å®¹ğŸ‘† -->
                <div class="col-md-1 col-lg-2"></div>
                <div id="bg">
                </div>
            </div>
            <!-- ----------------å·¦ä¾§èœå•æ html ğŸ‘†-------------------------------------->
            
        </div>
        <!-- aplayeræ’­æ”¾å™¨åŠ è½½ğŸ‘‡ -->
            
        <!-- aplayeræ’­æ”¾å™¨åŠ è½½ğŸ‘† -->
    </div>
    <!-- èƒŒæ™¯å›¾åŠ è½½æ–¹å¼ğŸ‘‡ -->
    <div id="bgchoice" style="display: none">link
                </div>
                
                <div id="bgurl" style="display:none">https://raw.githubusercontent.com/2006wzt/PicGo_images/master/images/background.png</div>
                
    <!-- èƒŒæ™¯å›¾åŠ è½½æ–¹å¼ğŸ‘† -->
</body>

<script>
    //åˆå§‹åŒ–
    //æ›´æ¢twikooå¤´åƒ
    setTimeout(replaceAvatar,1000);
    setTimeout(replaceAvatar,2000);
    setTimeout(replaceAvatar,8000);
    // --------ä¸ºæ¯å¼ å›¾ç‰‡æ·»åŠ æ‡’åŠ è½½ï¼ˆlazyloadï¼‰æ ‡ç­¾-->æ‡’åŠ è½½åŠŸèƒ½ ğŸ‘‡------------
    lazyload();
    //ä¸ºæ–‡ç« å†…æ‰€æœ‰ä»£ç å—æ·»åŠ ä»£ç å¤åˆ¶åŠŸèƒ½ ğŸ‘‡
    codeinit();
    // ------ä»£ç é«˜äº®æ˜¾ç¤ºåŠŸèƒ½-------------
    hljs.initHighlightingOnLoad();
    if (shareChoice)
        shareInit();
    if (donateChoice)
        donateInit();
</script>

<!------------------ åŠ è½½live2dæ¨¡å‹åŠŸèƒ½ï¼ˆçœ‹æ¿å¨˜ï¼‰ğŸ‘‡ ---------------->

<script type="text/javascript">
    var message_Path = '/live2d/'
    var home_Path = document.getElementById("domainname").innerHTML + "/"; //æ­¤å¤„ä¿®æ”¹ä¸ºä½ çš„åŸŸåï¼Œå¿…é¡»å¸¦æ–œæ 
</script>
<script type="text/javascript" src="https://2006wzt.github.io/media/js/live2d.js"></script>
<script type="text/javascript" src="https://2006wzt.github.io/media/live2d/js/message.js"></script>
<script type="text/javascript">
    loadlive2d("live2d", "https://2006wzt.github.io/media/live2d/assets/tororo.model.json");
</script>

<!------------------ åŠ è½½live2dæ¨¡å‹åŠŸèƒ½ï¼ˆçœ‹æ¿å¨˜ï¼‰ğŸ‘† ---------------->


<!----------------------- è¿”å›é¡¶éƒ¨æŒ‰é’®åŠŸèƒ½ğŸ‘‡ --------------------->
<script>
    $(function () {
        $('.toggleContainer').click(function () {
            $('html,body').animate({
                scrollTop: '0px'
            }, 800);
        });
        $(window).scroll(function () {
            var st = $(window).scrollTop();
            if (st > 30) {
                $(".toggleContainer").fadeIn(400);
            } else {
                $(".toggleContainer").fadeOut(100);
            }
        });
    });
</script>
<!----------------------- è¿”å›é¡¶éƒ¨æŒ‰é’®åŠŸèƒ½ğŸ‘† --------------------->


<!------------ åŠ è½½å…¨å±€èƒŒæ™¯å›¾åŠŸèƒ½ğŸ‘‡ï¼ˆå¼€å§‹æ—¶æ²¡æœ‰å†™å¥½ï¼Œè¿™åŠŸèƒ½æœ‰ç‚¹é¸¡è‚‹/(ã„’oã„’)/~~ï¼‰ -->
<script>
    var bgchoice = "link"
    var bg = $('#bg');
    var bgurl = document.getElementById("bgurl").innerHTML;
    if (bgchoice == 'default')
    {
        for (var i = 0; i < 3; i++)
            bgurl = bgurl.replace("\\", "/");
        bgurl = "https://2006wzt.github.io/" + bgurl;
    }
    bg.css("background", "url('" + bgurl + "')");

    window.onload = function () {
        aplayerbtnInit();
    }
</script>
<!------------ åŠ è½½å…¨å±€èƒŒæ™¯å›¾åŠŸèƒ½ğŸ‘†ï¼ˆå¼€å§‹æ—¶æ²¡æœ‰å†™å¥½ï¼Œè¿™åŠŸèƒ½æœ‰ç‚¹é¸¡è‚‹/(ã„’oã„’)/~~ï¼‰ -->




<script src="https://2006wzt.github.io/media/js/index.js"></script>


<script>
    //åŠ è½½åçš„äº‹ä»¶åŒæ­¥ï¼ˆé˜…è¯»é‡ã€ç§»åŠ¨ç«¯è¯„è®ºç­‰
    window.onload = function () {
    //ä»£ç å—é«˜äº®æ¸²æŸ“
    document.querySelectorAll('pre code').forEach((block) => {
            hljs.highlightBlock(block);
    });
        getHotnum();
        var sharepc = $(".share").eq(0).html();
        $(".share").eq(1).html(sharepc);   //æ’ä»¶åªä¼šå¯»æ‰¾ä¸€ä¸ªåˆ†äº«æ ‡ç­¾æ¸²æŸ“ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨æ·»åŠ åˆ°ç§»åŠ¨ç«¯
        aplayerbtnInit();
        $(".hljs").css({
            "padding": "20px"
        })
    }
</script>

<!-- <script src="https://2006wzt.github.io/media/js/av-min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@3.13.0/dist/av-min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.6.1/dist/av-live-query-min.js"></script> -->